import{_ as X,o as f,c as v,a as i,n as I,t as h,e as z,f as A,F as S,g as x,d as k,u as L,h as C,v as D,i as R,j as re,k as T,l as se}from"./index-BTXnXW8k.js";class M{constructor(e){this.short=e,this.props={short:e};let t=q.find(a=>a.short==e);if(t){this.props=t,this.member=t.member;let a=le.find(m=>m.member==t.member);a&&(this.year=a.year,this.unit=a.unit),this.cost=t.cost,this.teCostDelta=0}}copy(){let e=new M(this.short);return e.cost=this.cost,e.teCostDelta=this.teCostDelta,e}getMain(e){var t;return(t=this.props)!=null&&t.main?typeof this.props.main=="function"?this.props.main(e):this.props.main:""}getCost(e=!1){let t=this.cost;return e&&(t+=this.teCostDelta),t>=1?t:1}isReshuffle(e){var t;return(t=this.props)!=null&&t.reshuffle?typeof this.props.reshuffle=="function"?this.props.reshuffle(e):this.props.reshuffle:!1}onSkill(e){var t;(t=this.props)!=null&&t.skill&&(typeof this.props.skill=="function"?this.props.skill(e):e.trigger(this.props.skill))}afterSkill(e){var t;(t=this.props)!=null&&t.afterSkill&&this.props.afterSkill(e)}onDraw(e){var t;this.teCostDelta=0,(t=this.props)!=null&&t.draw&&(typeof this.props.draw=="function"?this.props.draw(e,this):e.trigger(this.props.draw))}onCross(e,t){var a;(a=this.props)!=null&&a.cross&&this.props.cross(e,t,this)}matchAttrs(e){return Object.keys(e).every(t=>e[t]==null?!0:e[t]==this[t])}calcSubtractAp(e){let t=0;if(e!=null&&e.length)for(let a of e)this.matchAttrs({...a,cost:void 0})&&(t+=a.cost);return t}}const le=[{member:3,short:"kz",year:102,unit:"srb"},{member:4,short:"tz",year:102,unit:"drk"},{member:6,short:"mg",year:102,unit:"mrp"},{member:1,short:"kh",year:103,unit:"srb"},{member:2,short:"sy",year:103,unit:"drk"},{member:5,short:"rr",year:103,unit:"mrp"},{member:7,short:"gn",year:104,unit:"srb"},{member:8,short:"sz",year:104,unit:"drk"},{member:9,short:"hm",year:104,unit:"mrp"}],q=[{short:"圣夜吟",member:7,cost:8,main:"dress",reshuffle:!0,skill:{cards:["圣夜👗","圣夜👗","圣夜👗","圣夜👗","圣夜👗"]}},{short:"圣夜👗",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill:{mental:1,voltage:1}},{short:"pa吟",member:7,cost:4,main:"dress",skill:{cards:["pa吟👗","pa吟👗"]}},{short:"pa吟👗",member:"dress",cost:2,main:"ap",once:!0},{short:"lttf铃",member:8,cost:9,main:"voltage",skill:{voltage:1,mental:-1},drawFilters:[{member:9}]},{short:"上升姬芽",member:9,cost:3,main(r){return r!=null&&r.ignition?"reshuffle":"mental"},reshuffle:r=>r==null?void 0:r.ignition,skill:{mental:1,protect:1},afterSkill(r){r.ignition&&(r.timesDict[this.short]==null?r.timesDict[this.short]=0:r.timesDict[this.short]++,r.timesDict[this.short]>=3&&(r.ignition=!1,r.timesDict[this.short]=void 0),r.getAllCards().forEach(e=>{e.unit=="mrp"&&(e.cost-=3)}))},cross(r,e){if(!r.ignition){let t=e.getMain(r);(t=="mental"||t=="protect")&&(r.ignition=!0)}}},{short:"pa姬芽",member:9,cost:4,main:"reshuffle",reshuffle:!0,skill:{protect:1}},{short:"织姬花帆",member:1,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:1}},{short:"音击花帆",member:1,cost:9,main:"heart",reshuffle:!0,yamaReshuffle:!0,skill:{heart:3},draw:{heart:1,mental:1}},{short:"lttf沙耶",member:2,cost:5,main:"voltage",skill:{voltage:1},drawFilters:[{member:6}]},{short:"沏茶瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:1},draw:{heart:1}},{short:"蛋糕瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:1},draw:{heart:1}},{short:"花结梢",member:3,cost:13,main:"reshuffle",reshuffle:!0,drawFilters:[{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"}],cross(r,e,t){e.unit=="srb"&&(r.trigger({heart:1}),t.teCostDelta-=3)},afterSkill(r){r.getAllCards().forEach(e=>{(e.unit=="srb"||e.member=="dress")&&(e.cost-=3)})}},{short:"kol梢",member:3,cost:9,main:"mental",skill:{mental:1,heart:1},draw:{"ap-":[{member:6,cost:-9}]},cross(r,e){e.member==6&&r.trigger({protect:1,heart:1})}},{short:"自由缀",member:4,cost:2,main:"mental",skill:{mental:1,heart:1},draw:r=>{let e={};r.mental&&(e={heart:1}),r.trigger(e)}},{short:"kol缀",member:4,cost:3,main:"voltage",skill:{voltage:1,heart:1},draw:{"ap-":[{member:3,cost:-3},{member:6,cost:-3}]},cross(r,e){e.member==6&&r.trigger({voltage:1,heart:1})}},{short:"hsct慈",member:6,cost:4,main:"reshuffle",reshuffle:!0},{short:"kol慈",member:6,cost:39,main:"heart",skill:{heart:2,cards:["💎"]},cross(r,e,t){(e.member==1||e.member==2||e.member==3||e.member==4||e.member==5||e.member==7||e.member==8||e.member==9)&&(t.teCostDelta-=3)}},{short:"💎",member:"jewelry",cost:1,main:"ap-",once:!0,skill:{"ap-":[{cost:-1}]},draw:{heart:1,voltage:1,protect:1}},{short:"舞会缀",member:4,cost:2,main:"voltage",skill:{voltage:1}},{short:"舞会沙耶",member:2,cost:2,main:"love+"},{short:"银河缀",member:4,cost:2,main:"voltage",skill:{voltage:1,heart:1},afterSkill(r){r.sp=="tz2"&&r.trigger({ap:5})}},{short:"银河慈",member:6,cost:5,main:"reshuffle",reshuffle:!0,skill:{mental:2,protect:1},afterSkill(r){r.sp=="mg2"&&r.trigger({ap:20})}},{short:"讴歌梢",member:3,cost:3,main:"love+",draw:{heart:1}},{short:"ritm梢",member:3,cost:2,main:"voltage",skill:{voltage:1},draw:{mental:1}},{short:"秋色梢",member:3,cost:6,main:"love+",draw:{mental:1}},{short:"自由梢",member:3,cost:2,main:"protect",skill:{protect:1},draw:r=>{let e={};r.mental&&(e={protect:1}),r.trigger(e)}},{short:"教师梢",member:3,cost:2,main:"heart",skill:{heart:1,mental:-1},draw:{mental:1}},{short:"ss缀",member:4,cost:3,main:"heart",skill:{heart:1},draw:{voltage:1}},{short:"雨伞缀",member:4,cost:5,main:"love+",draw:{heart:1}},{short:"花火缀",member:4,cost:3,main:"voltage",skill:{voltage:1},draw:{voltage:1}},{short:"秋色缀",member:4,cost:6,main:"heart",skill:r=>{let e={};r.mental?e={heart:3}:e={heart:2},r.trigger(e)},draw:{mental:1}},{short:"抱花缀",member:4,cost:4,main:"voltage",skill:{voltage:1},draw:{voltage:1}},{short:"音击缀",member:4,cost:9,main:"voltage",skill:{voltage:1,heart:3},draw:{voltage:1,protect:1}},{short:"蛋糕慈",member:6,cost:4,main:"mental",skill:{mental:1},draw:{mental:1,protect:1}},{short:"舞会慈",member:6,cost:3,main:"love+",yamaUse:!0,skill:{mental:-1},draw:{mental:1}},{short:"圣诞慈",member:6,cost:4,main:"mental",skill:{mental:3},draw:{mental:1}},{short:"抱花慈",member:6,cost:4,main:"protect",skill:{protect:1},draw:{protect:1}},{short:"ritm花帆",member:1,cost:1,main:"heart",skill:{heart:1},draw:{mental:1}},{short:"讴歌花帆",member:1,cost:3,main:"mental",skill:{mental:1},draw:{voltage:1}},{short:"雨伞花帆",member:1,cost:3,main:"voltage",skill:{voltage:1},draw:{mental:1}},{short:"自由花帆",member:1,cost:2,main:"voltage",skill:{voltage:1,heart:1},draw:r=>{let e={};r.mental&&(e={voltage:1}),r.trigger(e)}},{short:"快乐花帆",member:1,cost:2,main:"mental",skill:{mental:1,voltage:1},draw:{mental:1,heart:1}},{short:"雨伞沙耶",member:2,cost:4,main:"mental",skill:{mental:1},draw:{voltage:1}},{short:"tc沙耶",member:2,cost:3,main:"love+",skill:{mental:-1},draw:{voltage:1}},{short:"圣诞沙耶",member:2,cost:4,main:"voltage",skill:{voltage:1,heart:2},draw:{voltage:1}},{short:"db瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:1},draw:{voltage:1}},{short:"rod瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:1},draw:{mental:1}},{short:"白昼瑠璃",member:5,cost:3,main:"reshuffle",reshuffle:!0,skill:{mental:-1},draw:{heart:1}},{short:"ritm吟",member:7,cost:5,main:"dress",skill:{cards:["ritm👗1","ritm👗2","ritm👗3"]},draw:{protect:1}},{short:"ritm👗1",member:"dress",cost:1,main:"heart",once:!0,skill:{heart:1}},{short:"ritm👗2",member:"dress",cost:1,main:"voltage",once:!0,skill:{voltage:1}},{short:"ritm👗3",member:"dress",cost:1,main:"teMax",once:!0},{short:"af缀",member:4,cost:9,main:"voltage",skill:{voltage:1,heart:9,ap:-20},afterSkill(r){r.sp=="tz2"&&r.trigger({ap:20})}},{short:"af慈",member:6,cost:9,main:"protect",skill:{protect:1,heart:9,ap:-20},afterSkill(r){r.sp=="tz2"&&r.trigger({ap:3})}}];let Z=class _{constructor(e){this.score=0,this.te=[],this.sute=[],this.yama=e,this.mental=!0,this.protect=!1,this.apMax=20,this.ignition=!1,this.timesDict={kol慈:0,"💎":0,apSkip:0},this.timesCount=0,this.sp="",this.effect="",this.teMax=8,this.ap=8,this.apSpeed=2.5,this.drawHeartCount=0}getAllCards(){return[...this.te,...this.sute,...this.yama]}getDrawYama(){return this.yama.length?this.yama:this.sute}calcDrawHeartCount(){let e=0;return this.getAllCards().forEach(t=>{var m,s,u,p;let a;(m=t.props)!=null&&m.draw&&(typeof((s=t.props)==null?void 0:s.draw)=="function"?a=(u=t.props)==null?void 0:u.draw(this):a=(p=t.props)==null?void 0:p.draw),e+=(a==null?void 0:a.heart)||0,this.sp=="tz"&&(e+=(a==null?void 0:a.voltage)||0),this.sp=="mg2"&&(e+=((a==null?void 0:a.mental)||0)+((a==null?void 0:a.protect)||0))}),this.drawHeartCount=e,e}start(){this.sp=="kz2"&&(this.ap=1/0);for(let e=0;e<this.teMax;e++){let t=Math.floor(Math.random()*this.yama.length),a=this.yama.splice(t,1)[0];this.te.push(a)}this.calcDrawHeartCount()}draw(e,t){this.yama.length||(this.yama=[...this.sute],this.sute=[],this.effect=="kj1a"&&this.yama.forEach(u=>{u.getMain(this)=="reshuffle"&&u.cost++}));let a;t?(a=this.yama.filter(u=>u.matchAttrs(t)),a.length||(a=this.yama)):a=this.yama;let m=Math.floor(Math.random()*a.length),s=a[m];this.yama.splice(this.yama.indexOf(s),1),this.te[e]=s,s.onDraw(this)}autoAp(){this.sp!="kz2"&&this.addAp(this.apSpeed)}useCard(e){var m,s,u,p,g,n,b;if(e==null){this.timesDict.apSkip++,this.autoAp();return}let t=this.te[e];(t.short=="kol慈"||t.short=="💎")&&this.timesDict[t.short]++;let a=t.isReshuffle(this);t.onSkill(this);for(let d of this.te)d.onCross(this,t);if(this.sp=="sy"&&this.score++,a){for(let d in this.te)d!=e&&this.sute.push(this.te[d]);(m=t.props)!=null&&m.yamaReshuffle&&this.yama.push(...this.sute.splice(0));for(let d=0;d<this.teMax;d++)this.draw(d,(u=(s=t.props)==null?void 0:s.drawFilters)==null?void 0:u[d])}else this.draw(e,(g=(p=t.props)==null?void 0:p.drawFilters)==null?void 0:g[0]);if((n=t.props)!=null&&n.once||((b=t.props)!=null&&b.yamaUse?this.yama.push(t):this.sute.push(t)),this.calcDrawHeartCount(),this.sp!="kz2"&&(this.addAp(-t.getCost(!0)),this.autoAp()),t.cost=t.props.cost,t.afterSkill(this),this.timesCount++,this.effect=="kj1b"&&this.timesCount%5==0){this.sute.push(...this.te.splice(0));for(let d=0;d<this.teMax;d++)this.draw(d)}this.effect=="st1a"&&this.timesCount%6==0&&this.getAllCards().forEach(d=>d.cost++),!this.protect&&this.sp!="mg2"&&(this.mental=!1)}testCard(e){var s,u,p,g,n,b;let t=new _([]);for(let d of this.te)t.te.push(d.copy());t.mental=this.mental,t.protect=this.protect,t.ap=this.ap,t.apSpeed=this.apSpeed,t.ignition=this.ignition,t.timesDict=this.timesDict,t.sp=this.sp;let a=t.te[e],m=a.isReshuffle(this);a.onSkill(t);for(let d of t.te)d.onCross(t,a);return(t.score+(m?this.drawHeartCount*8/this.getAllCards().length:0))/(1+((p=(u=(s=a.props)==null?void 0:s.skill)==null?void 0:u.cards)!=null&&p.length?((b=(n=(g=a.props)==null?void 0:g.skill)==null?void 0:n.cards)==null?void 0:b.length)*8:0))*(a.short=="上升姬芽"?3/4:1)}trigger(e){this.addAp(e.ap),this.addHeart(e.heart),this.addVoltage(e.voltage),this.addMental(e.mental),this.addProtect(e.protect),this.subtractAp(e["ap-"]),this.addCard(e.cards)}addHeart(e){e&&(this.score+=e)}addVoltage(e){e&&this.sp=="tz"&&(this.score+=e,this.addAp(1*e))}addMental(e){e&&(e>0&&this.sp=="mg2"&&(this.score+=e,this.addAp(1*e)),e>0?this.mental=!0:e<0&&this.sp!="mg2"&&(this.mental=!1))}addProtect(e){e&&(this.sp=="mg2"&&(this.score+=e,this.addAp(2*e)),this.protect=!0)}subtractAp(e){if(e!=null&&e.length)for(let t of this.getAllCards())t.cost+=t.calcSubtractAp(e)}addCard(e){if(e!=null&&e.length)for(let t of e)this.yama.push(new M(t))}addAp(e){if(e){let t=this.ap+e;t>this.apMax&&(t=this.apMax),t<0&&(t=0),this.ap=Number(t.toFixed(2))}}};const ie={class:"cost"},ae={key:0,class:"close"},oe={key:1,class:"test"},ne={key:2,class:"time"},me={__name:"Card",props:{card:{type:M},stage:{type:Z},te:{default:!1},close:{default:!1},pointerEvents:{default:"auto"}},setup(r){const e=r,t={heart:"rgb(204,39,39)","love+":"rgb(174,141,24)",voltage:"rgb(174,141,24)",mental:"rgb(48,124,24)",reshuffle:"rgb(134,82,195)",teMax:"rgb(134,82,195)",protect:"rgb(48,124,24)",dress:"rgb(134,82,195)",ap:"rgb(174,141,24)","ap-":"rgb(134,82,195)","":"transparent"},a={1:"#f8b500",2:"#5383c3",3:"#68be8d",4:"#ba2636",5:"#e7609e",6:"#c8c2c6",7:"#a2d7dd",8:"#fad764",9:"#9d8de2"};return(m,s)=>{var u,p;return f(),v("div",{class:"card",style:I({pointerEvents:r.te&&e.card.getCost(r.te)>e.stage.ap?"none":e.pointerEvents})},[i("div",{class:"background",style:I({backgroundColor:a[e.card.member]?`${a[e.card.member]}`:"transparent"})},null,4),i("div",{style:I({fontWeight:e.card.isReshuffle(e.stage)?"bold":"",fontStyle:e.card.isReshuffle(e.stage)?"italic":""})},h(e.card.short),5),i("div",ie,h(e.card.getCost(r.te)),1),i("div",{class:"main",style:I({backgroundColor:t[e.card.getMain(e.stage)]})},null,4),e.close?(f(),v("div",ae,"×")):z("",!0),e.te?(f(),v("div",oe,h(Number(e.stage.testCard(e.stage.te.indexOf(e.card)).toFixed(1))),1)):z("",!0),((u=e.stage)==null?void 0:u.timesDict[e.card.short])!=null?(f(),v("div",ne,h((p=e.stage)==null?void 0:p.timesDict[e.card.short]),1)):z("",!0)],4)}}},F=X(me,[["__scopeId","data-v-896a03d4"]]);function P(r){let e=[];for(let t=0;t<r.te.length;t++)r.te[t].getCost(!0)<=r.ap&&e.push(t);return e}function U(r,e){let t=e.map(m=>r.testCard(m)),a=Math.max(...t);return a==0?ee(r,e):e.filter((m,s)=>t[s]==a)}function G(r,e){let t=r.te.map((s,u)=>r.testCard(u)/r.te[u].getCost(!0)),a=e.map(s=>t[s]),m=Math.max(...a);if(m==0&&Math.max(...t)>0){let s=Math.min(...e.map(u=>r.te[u].getCost(!0)));return s<=r.apSpeed?e.filter(u=>r.te[u].getCost(!0)==s):ee(r,e)}else return e.filter((s,u)=>a[u]==m)}function ue(r,e){let t=e.map(m=>{let s=r.te[m],u=0;return r.getAllCards().forEach(p=>{var g,n,b,d;(n=(g=p.props)==null?void 0:g.draw)!=null&&n["ap-"]&&(u+=s.calcSubtractAp((d=(b=p.props)==null?void 0:b.draw)==null?void 0:d["ap-"]))}),u}),a=Math.min(...t);return e.filter((m,s)=>t[s]==a)}function ee(r,e){let t=r.getDrawYama(),a=e.map(s=>{var g,n;let u=r.te[s],p=t;if((g=u.props)!=null&&g.drawFilters){let b=(n=u.props)==null?void 0:n.drawFilters[0];p=t.filter(d=>Object.keys(b).every(j=>d[j]==b[j])),p.length||(p=t)}return p.filter(b=>b.isReshuffle(r)).length/p.length}),m=Math.max(...a);return e.filter((s,u)=>a[u]==m)}function Y(r,e){let t=e.filter(a=>{var m,s;return(s=(m=r.te[a].props)==null?void 0:m.drawFilters)==null?void 0:s.length});return t.length?t:e}function de(r,e){let t=e.filter(a=>{var m,s;return!(((s=(m=r.te[a].props)==null?void 0:m.skill)==null?void 0:s.mental)<0)});return t.length?t:e}function W(r,e){let t=e.filter(a=>r.te[a].member=="dress");return t.length?t:e}function J(r,e){let t=e.filter(a=>{var m,s;return!((s=(m=r.te[a].props)==null?void 0:m.skill)!=null&&s.cards)});return t.length?t:e}function Q(r,e,t){if(r.getAllCards().filter(s=>s.member=="jewelry").length>e)return t;let m=t.filter(s=>r.te[s].member!="jewelry");return m.length?m:t}function H(r,e=8,t){let a,m;if(t==null&&(t=r.strategy??(r.sp=="mg2"||r.sp=="tz2"||r.sp=="kz2"?"score":"cost")),!r.ignition&&r.te.find(s=>s.short=="上升姬芽")&&r.te.find(s=>(s.getMain(r)=="mental"||s.getMain(r)=="protect")&&s.short!="上升姬芽")&&(t!="score"?a=U(r,G(r,P(r).filter(s=>{let u=r.te[s];return(u.getMain(r)=="mental"||u.getMain(r)=="protect")&&u.short!="上升姬芽"})))[0]:a=U(r,P(r).filter(s=>{let u=r.te[s];return(u.getMain(r)=="mental"||u.getMain(r)=="protect")&&u.short!="上升姬芽"}))[0]),a==null&&(m=r.te.findIndex(s=>s.short=="kol慈"),m>=0&&r.getAllCards().filter(s=>s.member=="jewelry").length<e&&r.te[m].getCost(!0)<(t=="score"?r.ap:r.ap+r.apSpeed-4)&&(a=m)),a==null&&(m=r.te.findIndex(s=>s.member=="jewelry"&&s.getCost(!0)==2),m>=0&&r.getAllCards().filter(s=>s.member=="jewelry").length>e&&(a=m)),a==null&&(t!="score"?a=ue(r,Y(r,Q(r,e,J(r,G(r,de(r,W(r,P(r))))))))[0]:a=Y(r,Q(r,e,J(r,U(r,W(r,P(r))))))[0]),P(r).length&&a==null)debugger;return a}window.strategyPlay=H;const fe={class:"grid"},he=["open"],pe={class:"grid"},ce={style:{"font-size":"small"}},ve=["disabled"],be=["disabled"],ge=["disabled"],ke=["disabled"],ye=["disabled"],we=["disabled"],Ce=["disabled"],Se=["disabled"],Ae=["disabled"],De=["disabled"],Me=["disabled"],xe={style:{"text-align":"right"}},je={class:"flex-between"},Te={class:"flex-between"},Fe={class:"flex-between"},Pe={class:"grid"},ze={class:"grid"},Ee={class:"grid"},Ne={style:{width:"100%"}},Ve={colspan:"6"},$e={colspan:"3"},Ie={colspan:"3"},Re={colspan:"3"},Ue={colspan:"3"},qe={__name:"Stage",setup(r){const e=A(!1),t=A(!1),a=A([]),m=A(!1),s=A({qc:140,sh:3.3,apSpeed:2.6,sp:"",effect:"",jewelryCountTargetMin:0,jewelryCountTargetMax:20,cardTimes:373,skipTimes:36,strategy:"cost"}),u=A(10),p=q.map(c=>new M(c.short)).sort((c,l)=>typeof c.member=="number"&&typeof l.member=="number"?c.member-l.member:typeof c.member=="number"&&typeof l.member!="number"?-1:typeof c.member!="number"&&typeof l.member=="number"||c.member>l.member?1:c.member<l.member?-1:0),g=A(q.filter(c=>typeof c.member=="number").map(c=>new M(c.short)).slice(0,16)),n=A();window.getStage=()=>n.value;const b=()=>{n.value=new Z([]),n.value.apSpeed=Number(s.value.apSpeed),n.value.sp=s.value.sp,n.value.effect=s.value.effect,n.value.strategy=s.value.strategy,n.value.yama=g.value.map(c=>new M(c.short))};b();const d=()=>{e.value=!1,b()},j=async c=>{var l;if(m.value=!1,e.value=!0,t.value=c,c){a.value.push({deck:g.value.map(o=>o.short).join(", "),formData:{...s.value},dict:{}});for(let o=Number(s.value.jewelryCountTargetMin);o<=Number(s.value.jewelryCountTargetMax)&&e.value;o++){let y=0,w=0,N=0,V=0,K=0;for(let B=0;B<Number(s.value.skipTimes);B++){await te(),b(),n.value.start();for(let $=0;$<Number(s.value.cardTimes)&&e.value;$++)n.value.useCard(H(n.value,o));if(!e.value)break;y+=n.value.score,w+=(l=n.value.getAllCards().filter($=>$.member=="jewelry"))==null?void 0:l.length,N+=n.value.timesDict.kol慈,V+=n.value.timesDict["💎"],K+=n.value.timesDict.apSkip}if(a.value.at(-1).dict[o]={score:Number((y/s.value.skipTimes).toFixed(2)),jewelryCount:Number((w/s.value.skipTimes).toFixed(2)),kt:Number((N/s.value.skipTimes).toFixed(2)),jt:Number((V/s.value.skipTimes).toFixed(2)),st:Number((K/s.value.skipTimes).toFixed(2))},!e.value)break}e.value=!1}else b(),n.value.start(),E()},te=async c=>new Promise(l=>setTimeout(l,c)),O=A(-1),E=()=>{O.value=H(n.value,u.value)};return(c,l)=>(f(),v("div",null,[!e.value||t.value?(f(),v(S,{key:0},[l[19]||(l[19]=i("h2",null,"DECK",-1)),l[20]||(l[20]=i("hr",null,null,-1)),i("div",fe,[(f(!0),v(S,null,x(g.value,(o,y)=>(f(),T(F,{card:o,close:!0,onClick:w=>g.value.splice(y,1),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))]),i("details",{open:m.value},[l[18]||(l[18]=i("summary",null,[k(" CARD "),i("hr")],-1)),i("div",pe,[(f(!0),v(S,null,x(L(p),(o,y)=>(f(),T(F,{card:o,onClick:w=>g.value.push(new(L(M))(o.short)),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))])],8,he)],64)):z("",!0),i("form",null,[l[37]||(l[37]=i("h2",null,"STAGE",-1)),l[38]||(l[38]=i("hr",null,null,-1)),i("div",ce,[l[21]||(l[21]=i("label",{for:"qc"},"曲长: ",-1)),C(i("input",{"onUpdate:modelValue":l[0]||(l[0]=o=>s.value.qc=o),type:"text",disabled:e.value,id:"qc"},null,8,ve),[[D,s.value.qc]]),l[22]||(l[22]=k(" s  ")),l[23]||(l[23]=i("label",{for:"qc"},"生化值: ",-1)),C(i("input",{"onUpdate:modelValue":l[1]||(l[1]=o=>s.value.sh=o),type:"text",disabled:e.value,id:"sh"},null,8,be),[[D,s.value.sh]]),l[24]||(l[24]=k("   ")),i("button",{onClick:l[2]||(l[2]=o=>{s.value.apSpeed=Number((1200/s.value.qc/s.value.sh).toFixed(2)),s.value.cardTimes=Math.floor(s.value.qc*8/3)}),disabled:e.value}," 计算AP回复速度/CARD回数 ",8,ge)]),i("div",null,[l[25]||(l[25]=i("label",{for:"ap"},"AP回复速度: ",-1)),C(i("input",{"onUpdate:modelValue":l[3]||(l[3]=o=>s.value.apSpeed=o),type:"text",disabled:e.value,id:"ap"},null,8,ke),[[D,s.value.apSpeed]])]),i("div",null,[l[27]||(l[27]=i("label",{for:"sp"},"SP: ",-1)),C(i("select",{"onUpdate:modelValue":l[4]||(l[4]=o=>s.value.sp=o),disabled:e.value,id:"sp",onChange:l[5]||(l[5]=o=>s.value.sp.includes("2")?s.value.strategy="score":s.value.strategy="cost")},l[26]||(l[26]=[re('<option value="" data-v-3fe0be63>--</option><option value="tz" data-v-3fe0be63>舞会缀</option><option value="sy" data-v-3fe0be63>舞会沙耶</option><option value="tz2" data-v-3fe0be63>银河缀</option><option value="mg2" data-v-3fe0be63>银河慈</option>',5)]),40,ye),[[R,s.value.sp]])]),i("div",null,[l[29]||(l[29]=i("label",{for:"effect"},"效果: ",-1)),C(i("select",{"onUpdate:modelValue":l[6]||(l[6]=o=>s.value.effect=o),disabled:e.value,id:"effect"},l[28]||(l[28]=[i("option",{value:""},"--",-1),i("option",{value:"st1a"}," (2025年1月公会战A) skill6回使用 deck全card消费AP+1 ",-1),i("option",{value:"kj1a"}," (2025年1月个人战A) 山札切 main效果reshuffle效果deck全card消费AP+1 ",-1),i("option",{value:"kj1b"}," (2025年1月个人战B) skill5回使用 手札全捨 山札手札上限引直 ",-1)]),8,we),[[R,s.value.effect]])]),i("div",null,[l[30]||(l[30]=i("label",{for:"jewelry"},"TARGET💎: ",-1)),C(i("input",{"onUpdate:modelValue":l[7]||(l[7]=o=>s.value.jewelryCountTargetMin=o),disabled:e.value,type:"number",id:"jewelry"},null,8,Ce),[[D,s.value.jewelryCountTargetMin]]),l[31]||(l[31]=k(" ~ ")),C(i("input",{"onUpdate:modelValue":l[8]||(l[8]=o=>s.value.jewelryCountTargetMax=o),disabled:e.value,type:"number",id:"jewelry"},null,8,Se),[[D,s.value.jewelryCountTargetMax]]),l[32]||(l[32]=k(" / ")),C(i("input",{"onUpdate:modelValue":l[9]||(l[9]=o=>u.value=o),type:"number",id:"jewelry",onChange:l[10]||(l[10]=o=>{e.value&&!t.value&&E()})},null,544),[[D,u.value]])]),i("div",null,[l[33]||(l[33]=i("label",{for:"card-time"},"CARD回数: ",-1)),C(i("input",{"onUpdate:modelValue":l[11]||(l[11]=o=>s.value.cardTimes=o),disabled:e.value,type:"number",id:"card-time"},null,8,Ae),[[D,s.value.cardTimes]])]),i("div",null,[l[34]||(l[34]=i("label",{for:"skip-time"},"SKIP回数: ",-1)),C(i("input",{"onUpdate:modelValue":l[12]||(l[12]=o=>s.value.skipTimes=o),disabled:e.value,type:"number",id:"skip-time"},null,8,De),[[D,s.value.skipTimes]])]),i("div",null,[l[36]||(l[36]=i("label",{for:"strategy"},"策略: ",-1)),C(i("select",{"onUpdate:modelValue":l[13]||(l[13]=o=>s.value.strategy=o),disabled:e.value,id:"strategy"},l[35]||(l[35]=[i("option",{value:"cost"},"pt/AP优先",-1),i("option",{value:"score"},"pt优先",-1)]),8,Me),[[R,s.value.strategy]])])]),i("div",xe,[e.value?(f(),v("button",{key:0,onClick:d},"RETIRE")):(f(),v(S,{key:1},[a.value.length?(f(),v("button",{key:0,onClick:l[14]||(l[14]=o=>a.value=[])}," CLEAR RESULTS ")):z("",!0),i("button",{onClick:l[15]||(l[15]=o=>j(!0))},"SKIP"),i("button",{onClick:l[16]||(l[16]=o=>j(!1))},"LIVE START")],64))]),e.value&&!t.value?(f(),v(S,{key:1},[i("h2",je,[i("div",null,h(n.value.score),1),i("div",null,h(n.value.timesCount)+"回",1)]),i("h2",Te,[i("div",null,h(n.value.sp=="mg2"?"∞":n.value.mental?"100%":"-%"),1),i("div",null,h(n.value.ignition?"🔥":"🚫")+" "+h(n.value.sp=="kz2"?"∞":n.value.ap),1)]),l[39]||(l[39]=i("div",{style:{"text-align":"right"}},null,-1)),i("h2",Fe,[i("div",null,"手札 "+h(n.value.te.length),1),i("button",{onClick:l[17]||(l[17]=o=>{n.value.useCard(void 0),E()})}," AP SKIP ")]),l[40]||(l[40]=i("hr",null,null,-1)),i("div",Pe,[(f(!0),v(S,null,x(n.value.te,(o,y)=>(f(),T(F,{card:o,stage:n.value,te:!0,class:se({highlight:O.value==y}),onClick:w=>{n.value.useCard(y),E()}},null,8,["card","stage","class","onClick"]))),256))]),i("h2",null,"捨札 "+h(n.value.sute.length),1),l[41]||(l[41]=i("hr",null,null,-1)),i("div",ze,[(f(!0),v(S,null,x(n.value.sute,(o,y)=>(f(),T(F,{card:o,stage:n.value,"pointer-events":"none"},null,8,["card","stage"]))),256))]),i("h2",null,"山札 "+h(n.value.yama.length),1),l[42]||(l[42]=i("hr",null,null,-1)),i("div",Ee,[(f(!0),v(S,null,x(n.value.yama,(o,y)=>(f(),T(F,{card:o,stage:n.value,"pointer-events":"none"},null,8,["card","stage"]))),256))])],64)):(f(!0),v(S,{key:2},x(a.value,(o,y)=>(f(),v("table",Ne,[i("thead",null,[i("tr",null,[i("td",Ve,h(o.deck),1)]),i("tr",null,[i("td",$e,"AP回复速度: "+h(o.formData.apSpeed),1),i("td",Ie," SP: "+h(o.formData.sp)+", 效果: "+h(o.formData.effect),1)]),i("tr",null,[i("td",Re,"CARD回数: "+h(o.formData.cardTimes),1),i("td",Ue,"SKIP回数: "+h(o.formData.skipTimes),1)]),l[43]||(l[43]=i("tr",null,[i("td",null,[k("target"),i("br"),k("💎")]),i("td",null,[k("kol慈"),i("br"),k("回数")]),i("td",null,[k("💎"),i("br"),k("回数")]),i("td",null,[k("AP SKIP"),i("br"),k("回数")]),i("td",null,"pt"),i("td",null,"%")],-1))]),i("tbody",null,[(f(!0),v(S,null,x(o.dict,(w,N)=>(f(),v("tr",null,[i("td",null,h(N),1),i("td",null,h(w.kt),1),i("td",null,h(w.jt),1),i("td",null,h(w.st),1),i("td",null,h(w.score),1),i("td",null,h(Number((w.score/Math.max(...Object.values(o.dict).map(V=>V.score))*100).toFixed(2))),1)]))),256))])]))),256))]))}},Oe=X(qe,[["__scopeId","data-v-3fe0be63"]]);export{Oe as default};
