import{_ as ee,o as c,c as g,a,n as U,t as p,e as z,f as E,F as T,d as y,g as L,u as B,h as M,v as I,i as Y,j as J,k as Q,l as O,m as re}from"./index-BNIKN5rw.js";class F{constructor(e){this.short=e,this.props={short:e};let t=G.find(s=>s.short==e);if(t){this.props=t,this.member=t.member;let s=le.find(i=>i.member==t.member);s&&(this.year=s.year,this.unit=s.unit),this.cost=t.cost,this.costDelta=0,this.teCostDelta=0}}copy(){let e=new F(this.short);return e.cost=this.cost,e.costDelta=this.costDelta,e.teCostDelta=this.teCostDelta,e}getMain(e){var t;return(t=this.props)!=null&&t.main?typeof this.props.main=="function"?this.props.main(e):this.props.main:""}getCost(e,t=!0){var i,m,h,n;let s=this.cost;return s+=this.costDelta,e&&((i=this.props)!=null&&i.teCostDelta)&&(s+=(m=this.props)==null?void 0:m.teCostDelta(e)),e&&(s+=this.teCostDelta),t&&((h=this.props)!=null&&h.spCostDelta)&&(s+=(n=this.props)==null?void 0:n.spCostDelta(e)),s>=1?s:1}getCalcCost(e){let t=this.getSkill(e),s=this.getCost(e.te),i=s;return i-=(t==null?void 0:t.ap)??0,i-=(t==null?void 0:t.spAp)??0,(i<1||i>=e.apMax&&s<=e.ap)&&(i=1),i}isReshuffle(e){var t;return(t=this.props)!=null&&t.reshuffle?typeof this.props.reshuffle=="function"?this.props.reshuffle(e):this.props.reshuffle:!1}getSkill(e){var t;if((t=this.props)!=null&&t.skill)return typeof this.props.skill=="function"?this.props.skill(e):this.props.skill}onSkill(e){e.trigger(this.getSkill(e))}afterSkill(e){var t;(t=this.props)!=null&&t.afterSkill&&this.props.afterSkill(e,this)}onDraw(e){var t;this.teCostDelta=0,(t=this.props)!=null&&t.draw&&(typeof this.props.draw=="function"?e.trigger(this.props.draw(e,this)):e.trigger(this.props.draw))}calcDrawHeartCount(e){var h,n,d,v,w,f,k,o,x,$,N,C;let t=0,s;(h=this.props)!=null&&h.draw&&(typeof((n=this.props)==null?void 0:n.draw)=="function"?s=(d=this.props)==null?void 0:d.draw(e):s=(v=this.props)==null?void 0:v.draw),t+=((w=s==null?void 0:s.heart)==null?void 0:w.length)||0,e.sp=="tz"&&(t+=((f=s==null?void 0:s.voltage)==null?void 0:f.length)||0),e.sp=="mg2"&&(t+=(((k=s==null?void 0:s.mental)==null?void 0:k.length)||0)+(((o=s==null?void 0:s.protect)==null?void 0:o.length)||0));let i=0,m=this.getSkill(e);if((m==null?void 0:m.ap)<0){i+=((x=m.heart)==null?void 0:x.length)||0,e.sp=="tz"&&(i+=(($=m==null?void 0:m.voltage)==null?void 0:$.length)||0),e.sp=="mg2"&&(i+=(((N=m==null?void 0:m.mental)==null?void 0:N.length)||0)+(((C=m==null?void 0:m.protect)==null?void 0:C.length)||0));let V=e.getAllCards().length/e.teMax;t+=i*V/(V+e.scoreCardCount)}return t}onCross(e,t,s){var i;(i=this.props)!=null&&i.cross&&this.props.cross(e,t,s,this)}matchAttrs(e){return Object.keys(e).every(t=>e[t]==null?!0:e[t]==this[t])}calcSubtractAp(e){let t=0;if(e!=null&&e.length)for(let s of e)this.matchAttrs({...s,cost:void 0})&&(t+=s.cost);return t}}const le=[{member:3,short:"kz",year:102,unit:"srb"},{member:4,short:"tz",year:102,unit:"drk"},{member:6,short:"mg",year:102,unit:"mrp"},{member:1,short:"kh",year:103,unit:"srb"},{member:2,short:"sy",year:103,unit:"drk"},{member:5,short:"rr",year:103,unit:"mrp"},{member:7,short:"gn",year:104,unit:"srb"},{member:8,short:"sz",year:104,unit:"drk"},{member:9,short:"hm",year:104,unit:"mrp"}],G=[{short:"圣夜吟",member:7,cost:8,main:"dress",reshuffle:!0,skill:{cards:["圣夜👗","圣夜👗","圣夜👗","圣夜👗","圣夜👗"]}},{short:"圣夜👗",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill:{mental:[{}],voltage:[{}]}},{short:"pa吟",member:7,cost:4,main:"dress",skill:{cards:["pa👗","pa👗"]}},{short:"pa👗",member:"dress",cost:2,main:"ap",once:!0},{short:"lttf铃",member:8,cost:9,main:"voltage",skill:{voltage:[{over:!0,spAp:6}],mental:[{minus:!0}]},drawFilters:[{member:9}]},{short:"上升姬芽",member:9,cost:3,main(r){return r!=null&&r.ignition?"reshuffle":"mental"},reshuffle:r=>r==null?void 0:r.ignition,skill(r){let e={mental:[{}],protect:[{}]};return r.ignition&&(e["ap-"]=[{unit:"mrp",cost:-3}]),e},ignitionTimes:3,cross(r,e,t){r.ignition||(t=="mental"||t=="protect")&&r.trigger({ignition:1})}},{short:"pa姬芽",member:9,cost:4,main:"reshuffle",reshuffle:!0,skill:{protect:[{}]}},{short:"织姬花帆",member:1,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]}},{short:"音击花帆",member:1,cost:9,main:"heart",reshuffle:!0,yamaReshuffle:!0,skill:{heart:[{},{},{}]},draw:{heart:[{}],mental:[{}]}},{short:"lttf沙耶",member:2,cost:5,main:"voltage",skill:{voltage:[{spAp:3}]},drawFilters:[{member:6}]},{short:"沏茶瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:[{}]},draw:{heart:[{}]}},{short:"蛋糕瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]},draw:{heart:[{}]}},{short:"花结梢",member:3,cost:13,main:"reshuffle",reshuffle:!0,drawFilters:[{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"}],skill:{"ap-":[{unit:"srb",cost:-3},{member:"dress",cost:-3}]},cross(r,e,t,s){e.unit=="srb"&&(r.trigger({heart:[{}]}),s.teCostDelta-=3)}},{short:"kol梢",member:3,cost:9,main:"mental",skill:{mental:[{spAp:5}],heart:[{}]},draw:{"ap-":[{member:6,cost:-9}]},cross(r,e){e.member==6&&r.trigger({protect:[{}],heart:[{}]})}},{short:"自由缀",member:4,cost:2,main:"mental",skill:{mental:[{spAp:6}],heart:[{}]},draw(r){let e={};return r.mental&&(e={heart:[{}]}),e}},{short:"kol缀",member:4,cost:3,main:"voltage",skill:{voltage:[{}],heart:[{}]},draw:{"ap-":[{member:3,cost:-3},{member:6,cost:-3}]},cross(r,e){e.member==6&&r.trigger({voltage:[{}],heart:[{}]})}},{short:"af慈",member:6,cost:9,main:"protect",skill:{protect:[{spAp:17}],heart:[{over:!0},{},{},{},{},{},{},{},{}],ap:-1/0}},{short:"kol慈",member:6,cost:39,main:"heart",skill:{heart:[{over:!0}],cards:["💎"]},cross(r,e,t,s){(e.member==1||e.member==2||e.member==3||e.member==4||e.member==5||e.member==7||e.member==8||e.member==9)&&(s.teCostDelta-=3)}},{short:"💎",member:"jewelry",cost:1,main:"ap-",once:!0,skill:{"ap-":[{cost:-1}]},draw:{heart:[{}],voltage:[{}],protect:[{}]}},{short:"舞会缀",member:4,cost:2,main:"voltage",skill:{voltage:[{spAp:5}]}},{short:"舞会沙耶",member:2,cost:2,main:"love+"},{short:"银河缀",member:4,cost:2,main:"voltage",skill:{voltage:[{spAp:6}],heart:[{}]}},{short:"银河慈",member:6,cost:5,main:"reshuffle",reshuffle:!0,skill:{mental:[{over:!0,spAp:21}],protect:[{spAp:10}]}},{short:"讴歌梢",member:3,cost:3,main:"love+",draw:{heart:[{}]}},{short:"ritm梢",member:3,cost:2,main:"voltage",skill:{voltage:[{spAp:3}]},draw:{mental:[{}]}},{short:"秋色梢",member:3,cost:6,main:"love+",draw:{mental:[{}]}},{short:"自由梢",member:3,cost:2,main:"protect",skill:{protect:[{spAp:4}]},draw(r){let e={};return r.mental&&(e={protect:[{spAp:6}]}),e}},{short:"教师梢",member:3,cost:2,main:"heart",skill:{heart:[{}],mental:-1},draw:{mental:[{}]}},{short:"蓝远梢",member:3,cost:3,main:"dress",skill:{cards:["蓝远梢👗"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"蓝远梢👗",member:"dress",cost:3,main:"love+",once:!0},{short:"水母梢",member:3,cost:5,main:"love+",draw:{cards:["⚪"]}},{short:"⚪",member:"bubble",cost:1,main:"ap-",once:!0,skill:{"ap-":[{unit:"srb",cost:-3},{member:"dress",cost:-3}]}},{short:"af梢",member:3,cost:0,spCostDelta(r){var e;return((e=r==null?void 0:r.filter(t=>{var s;return!((s=t.props)!=null&&s.spCostDelta)}))==null?void 0:e.reduce((t,s)=>t+s.getCost(r,!1),0))||0},main:"ensemble",reshuffle:!0,skill:{ensemble:!0,heart:[{},{},{},{},{},{},{},{},{}],ap:-1/0}},{short:"ss缀",member:4,cost:3,main:"heart",skill:{heart:[{}]},draw:{voltage:[{}]}},{short:"雨伞缀",member:4,cost:5,main:"love+",draw:{heart:[{}]}},{short:"花火缀",member:4,cost:3,main:"voltage",skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"秋色缀",member:4,cost:6,main:"heart",skill(r){let e={};return r.mental?e={heart:[{},{},{}]}:e={heart:[{},{}]},e},draw:{mental:[{}]}},{short:"抱花缀",member:4,cost:4,main:"voltage",skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"音击缀",member:4,cost:9,main:"voltage",skill:{voltage:[{}],heart:[{},{},{}]},draw:{voltage:[{}],protect:[{}]}},{short:"af缀",member:4,cost:9,main:"voltage",skill:{voltage:[{over:!0,spAp:22}],heart:[{over:!0},{},{},{},{},{},{},{},{}],ap:-1/0}},{short:"蛋糕慈",member:6,cost:4,main:"mental",skill:{mental:[{}]},draw:{mental:[{}],protect:[{}]}},{short:"舞会慈",member:6,cost:3,main:"love+",yamaUse:!0,skill:{mental:-1},draw:{mental:[{}]}},{short:"圣诞慈",member:6,cost:4,main:"mental",skill:{mental:[{},{},{}]},draw:{mental:[{}]}},{short:"抱花慈",member:6,cost:4,main:"protect",skill:{protect:[{}]},draw:{protect:[{}]}},{short:"hsct慈",member:6,cost:4,main:"reshuffle",reshuffle:!0},{short:"ritm花帆",member:1,cost:1,main:"heart",skill:{heart:[{}]},draw:{mental:[{}]}},{short:"讴歌花帆",member:1,cost:3,main:"mental",skill:{mental:[{}]},draw:{voltage:[{}]}},{short:"雨伞花帆",member:1,cost:3,main:"voltage",skill:{voltage:[{}]},draw:{mental:[{}]}},{short:"自由花帆",member:1,cost:2,main:"voltage",skill:{voltage:[{spAp:3}],heart:[{}]},draw(r){let e={};return r.mental&&(e={voltage:[{spAp:2}]}),e}},{short:"舞会花帆",member:1,cost:6,main:"heart",skill:{heart:[{}]}},{short:"偶活花帆",member:1,cost:9,main:"heart",reshuffle:!0,skill:{heart:[{}]},cross(r,e,t,s){(e.member==2||e.member==5)&&(s.teCostDelta-=2)}},{short:"快乐花帆",member:1,cost:2,main:"mental",skill:{mental:[{}],voltage:[{}]},draw:{mental:[{}],heart:[{}]}},{short:"蓝远花帆",member:1,cost:3,main:"dress",skill:{cards:["蓝远花帆👗"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"蓝远花帆👗",member:"dress",cost:3,main:"heart",once:!0,skill:{heart:[{}]}},{short:"雨伞沙耶",member:2,cost:4,main:"mental",skill:{mental:[{}]},draw:{voltage:[{}]}},{short:"tc沙耶",member:2,cost:3,main:"love+",skill:{mental:-1},draw:{voltage:[{}]}},{short:"宇宙沙耶",member:2,cost:4,main:"teMax",skill:{voltage:[{}]}},{short:"沏茶沙耶",member:2,cost:2,main:"love+",skill:{voltage:[{}]}},{short:"圣诞沙耶",member:2,cost:4,main:"voltage",skill:{voltage:[{}],heart:[{},{}]},draw:{voltage:[{}]}},{short:"db瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"梦境瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]}},{short:"rod瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]},draw:{mental:[{}]}},{short:"一专瑠璃",member:5,cost:5,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]}},{short:"abdl瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]}},{short:"白昼瑠璃",member:5,cost:3,main:"reshuffle",reshuffle:!0,skill:{mental:-1},draw:{heart:[{}]}},{short:"mc瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill(r){let e;return r.ignition?e={heart:[{}]}:e={ap:1},e}},{short:"ritm吟",member:7,cost:5,main:"dress",skill:{cards:["ritm👗1","ritm👗2","ritm👗3"]},draw:{protect:[{}]}},{short:"ritm👗1",member:"dress",cost:1,main:"heart",once:!0,skill:{heart:[{}]}},{short:"ritm👗2",member:"dress",cost:1,main:"voltage",once:!0,skill:{voltage:[{}]}},{short:"ritm👗3",member:"dress",cost:1,main:"teMax",once:!0},{short:"蓝远吟",member:7,cost:3,main:"dress",skill:{cards:["蓝远👗","蓝远👗","蓝远👗"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"蓝远👗",member:"dress",cost:2,main:"reshuffle",reshuffle:!0,once:!0,skill:{heart:[{}]}},{short:"花结吟",member:7,cost:13,teCostDelta(r){let e=0;for(let t of r)t.unit=="srb"&&(e-=3);return e},main:"dress",reshuffle:!0,skill:{cards:["花结👗1","花结👗1","花结👗1","花结👗2","花结👗2","花结👗2","花结👖3","花结👖3","花结👖3"]},drawFilters:[{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"}]},{short:"花结👗1",member:"dress",cost:3,main:"voltage",once:!0,skill(r){let e={voltage:[{over:!0,spAp:9}]};return r.getAllCards().length>=33&&(e.heart=[{over:!0}]),e}},{short:"花结👗2",member:"dress",cost:3,main:"protect",once:!0,skill(r){let e={protect:[{spAp:8}]};return r.getAllCards().length>=33&&(e.heart=[{over:!0}]),e}},{short:"花结👖3",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill(r){return r.getAllCards().length>=30?{heart:[{over:!0}]}:res},drawFilters:[{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"}]},{short:"db铃",member:8,cost:5,main:"heart",skill:{heart:[{}]},afterSkill(r,e){e.costDelta--}},{short:"雪纺铃",member:8,cost:3,main:"mental",skill:{mental:[{}]}}];let te=class se{constructor(e){this.score=0,this.te=[],this.sute=[],this.yama=e,this.mental=!0,this.protect=!1,this.apMax=20,this.ignition=!1,this.ignitionTimesDict={},this.cardTimesDict={apSkip:0},this.ignitionChangeQueue=[],this.timesCount=0,this.cardsCount=0,this.sp="",this.effect="",this.teMax=8,this.ap=0,this.apSpeed=2.5,this.drawHeartCount=0,this.jewelryCountTarget=0,this.hasCostEffect=!1,this.testResults=[],this.hasIgnitionAndScoreCard=!1,this.hasEnsemble=!1,this.scoreCardCount=0}getAllCards(){return[...this.te,...this.sute,...this.yama]}getDrawYama(){return this.yama.length?this.yama:this.sute}start(){this.ap=this.apSpeed,this.hasIgnitionAndScoreCard=this.getAllCards().filter(e=>{var t,s,i;return(((t=e.props)==null?void 0:t.main)=="mental"||((s=e.props)==null?void 0:s.main)=="protect")&&(e.isReshuffle(this)||((i=e.getSkill(this))==null?void 0:i.ap)<0)}).length>0,this.hasEnsemble=this.getAllCards().filter(e=>{var t;return((t=e.props)==null?void 0:t.main)=="ensemble"}).length>0,this.scoreCardCount=this.getAllCards().filter(e=>{var t;return((t=e.getSkill(this))==null?void 0:t.ap)<0}).length,this.sp=="kz2"&&(this.ap=1/0);for(let e=0;e<this.teMax;e++){let t=Math.floor(Math.random()*this.yama.length),s=this.yama.splice(t,1)[0];this.te.push(s)}this.hasCostEffect=["st1a"].includes(this.effect),this.testAllCards()}draw(e,t){this.yama.length||(this.yama=[...this.sute],this.sute=[],this.effect=="kj1a"&&(this.addAp(3),this.yama.forEach(h=>{h.getMain(this)=="reshuffle"&&h.cost++})));let s;t?(s=this.yama.filter(h=>h.matchAttrs(t)),s.length||(s=this.yama)):s=this.yama;let i=Math.floor(Math.random()*s.length),m=s[i];this.yama.splice(this.yama.indexOf(m),1),this.te[e]=m,m.onDraw(this)}autoAp(){this.sp!="kz2"&&this.addAp(this.apSpeed)}useCard(e,t=!1){var i,m,h,n,d,v,w,f,k;if(e==null){this.cardTimesDict.apSkip++,this.autoAp(),this.timesCount++;return}this.usingCard={heart:!1};let s=this.te[e];this.cardTimesDict[s.short]||(this.cardTimesDict[s.short]=0),this.cardTimesDict[s.short]++,this.sp!="kz2"&&this.addAp(-s.getCost(this.te)),s.cost=s.props.cost,s.onSkill(this),this.sp=="sy"&&this.trigger({heart:[{}]}),this.ignition&&((i=s.props)!=null&&i.ignitionTimes)&&(this.ignitionTimesDict[s.short]==null&&(this.ignitionTimesDict[s.short]=0),this.ignitionTimesDict[s.short]++,this.ignitionTimesDict[s.short]>=((m=s.props)==null?void 0:m.ignitionTimes)&&(this.trigger({ignition:0}),this.ignitionTimesDict[s.short]=0));for(let o of this.te)o.onCross(this,s,s.getMain(this));if(s.afterSkill(this),(h=s.props)!=null&&h.yamaUse&&(s.toYama=!0),(n=s.props)!=null&&n.yamaReshuffle&&this.getAllCards().forEach(o=>{o!=s&&(o.toYama=!0)}),(d=s.props)!=null&&d.once&&(s.toOut=!0),!t){if(s.isReshuffle(this)){for(let o in this.te)o!=e&&this.sute.push(this.te[o]);this.yama.push(...this.sute.filter(o=>o.toYama&&!o.toOut)),this.sute=this.sute.filter(o=>!o.toYama&&!o.toOut);for(let o=0;o<this.teMax;o++)this.draw(o,(w=(v=s.props)==null?void 0:v.drawFilters)==null?void 0:w[o])}else this.draw(e,(k=(f=s.props)==null?void 0:f.drawFilters)==null?void 0:k[0]);this.usingCard=!1;for(let o=0;o<this.ignitionChangeQueue.length;o++)this.trigger({ignition:this.ignitionChangeQueue.shift()});s.toOut||(s.toYama?this.yama.push(s):this.sute.push(s)),this.getAllCards().forEach(o=>o.toYama=!1)}if(this.timesCount++,this.cardsCount++,this.effect=="gc1a"&&this.cardsCount%30==0)this.getAllCards().forEach(o=>{o.getMain()=="mental"&&o.costDelta--});else if(this.effect=="gc1b"&&this.cardsCount%15==0)this.getAllCards().forEach(o=>{o.unit=="srb"&&o.costDelta--});else if(this.effect=="gc1c"&&this.cardsCount%20==0)this.getAllCards().forEach(o=>{o.unit=="drk"&&o.costDelta--});else if(this.effect=="kj1b"&&this.cardsCount%5==0){this.sute.push(...this.te.splice(0));for(let o=0;o<this.teMax;o++)this.draw(o)}else this.effect=="st1a"&&this.cardsCount%6==0&&this.getAllCards().forEach(o=>o.cost++);!this.protect&&this.sp!="mg2"&&(this.mental=!1),t||(this.autoAp(),this.testAllCards())}calcTestDrawHeartCount(){let e=0,t=this.getAllCards(),s=t.filter(i=>i.short=="💎").length;if(s<this.jewelryCountTarget)for(let i=0;i<this.jewelryCountTarget-s;i++)t.push(new F("💎"));return t.forEach(i=>{e+=i.calcDrawHeartCount(this)}),this.drawHeartCount=e,e}calcNextDrawHeartCount(e){var n;let t=0,s=0,i=[],m=[],h=this.getAllCards();return i=(n=e.props)!=null&&n.yamaReshuffle?h.filter(d=>d!=e):this.yama,i.forEach(d=>{t+=d.calcDrawHeartCount(this)}),i.length<this.teMax?(m=[...this.sute,...this.te.filter(d=>d!=e)],m.forEach(d=>s+=d.calcDrawHeartCount(this)),(t+s/m.length*(this.teMax-i.length))/h.length*Math.min(h.length,this.teMax*2)+this.drawHeartCount*this.teMax/h.length*Math.max(0,h.length-this.teMax*2)/h.length):t/i.length*this.teMax/h.length*Math.min(h.length,this.teMax*2)+this.drawHeartCount*this.teMax/h.length*Math.max(0,h.length-this.teMax*2)/h.length}testCard(e,t){var o,x,$,N;let s=t?t.short:this.te[e].short;if(s=="kol慈")return .01;if(s=="💎")return 0;if(["ritm吟","蓝远梢","蓝远花帆","pa吟","花结吟"].includes(s))return-.01;let i=new se([]);i.usingCard={heart:!1};for(let C of this.te)i.te.push(C.copy());for(let C of this.sute)i.sute.push(C.copy());for(let C of this.yama)i.yama.push(C.copy());i.mental=this.mental,i.protect=this.protect,i.ap=this.ap,i.apMax=this.apMax,i.apSpeed=this.apSpeed,i.ignition=this.ignition,i.ignitionTimesDict={...this.ignitionTimesDict},i.sp=this.sp,i.jewelryCountTarget=this.jewelryCountTarget,i.scoreCardCount=this.scoreCardCount;let m=i.getAllCards().length,h,n;if(t&&(h=i.te[e].getCost(i.te),i.te[e]=t,n=i.te[e].getCost(i.te),(i.sp=="mg2"||i.sp=="tz2"||i.sp=="kz2")&&(h=1,n=1),n>i.apMax))return 0;let d=i.te[e],v=d.getSkill(i);v&&(v={...v,ensemble:!1});let w=d.isReshuffle(i);d.onSkill(i);for(let C of i.te)C.onCross(i,d,d.getMain(i));i.calcTestDrawHeartCount();let f=i.score,k=i.getAllCards().length;if(w&&(f+=i.calcNextDrawHeartCount(d)),((x=(o=d.props)==null?void 0:o.drawFilters)==null?void 0:x.length)==1&&!t){let C=($=d.props)==null?void 0:$.drawFilters[0],V=i.getDrawYama().filter(H=>Object.keys(C).every(b=>H[b]==C[b]));V.forEach(H=>f+=i.testCard(e,H)/V.length)}return(N=d.props)!=null&&N.once&&(f+=((i.drawHeartCount-d.calcDrawHeartCount(i))/(m-1)-i.drawHeartCount/m)*Math.min(this.hasEnsemble?k/i.teMax:1/0,w?i.teMax:i.teMax**3)),f+=(i.drawHeartCount/k-i.drawHeartCount/m)*Math.min(this.hasEnsemble?k/i.teMax:1/0,i.teMax),k>m&&(f/=(k-m)/(this.hasEnsemble?k/i.teMax:1)+1),(v==null?void 0:v.ap)<=-i.apMax&&(f/=Math.ceil(Math.min(...this.te.filter(C=>C!=d&&C.member!="jewelry").map(C=>C.getCost(this.te)))/i.apSpeed)),d.short=="上升姬芽"&&(this.hasIgnitionAndScoreCard||(f*=3/4),this.hasCostEffect&&(f*=d.getCost(i.te))),t&&(f/=Math.max(2,(h+n)/h)),f<0?0:f}testAllCards(){this.testResults=this.te.map((e,t)=>this.testCard(t))}trigger(e){if(e)for(let t in e){let s=e[t];t=="ap"&&this.addAp(s),t=="heart"&&this.addHeart(s),t=="voltage"&&this.addVoltage(s),t=="mental"&&this.addMental(s),t=="protect"&&this.addProtect(s),t=="ap-"&&this.subtractAp(s),t=="cards"&&this.addCard(s),t=="ensemble"&&this.ensemble(s),t=="ignition"&&this.changeIgnition(s),t=="spAp"&&this.addAp(s)}}addHeart(e){if(e!=null&&e.length){if(!this.usingCard)debugger;!this.usingCard.heart&&e[0].over&&this.score++,this.score+=e.length,this.usingCard.heart=!0}}addVoltage(e){e!=null&&e.length&&(this.sp=="tz"&&this.addHeart(e),this.sp=="tz2"&&e.forEach(t=>this.addAp(t.spAp??1)))}addMental(e){e!=null&&e.length&&e.forEach(t=>{!t.minus&&this.sp=="mg2"&&(this.addHeart([t]),this.addAp(t.spAp??1)),t.minus&&this.sp!="mg2"?this.mental=!1:this.mental=!0})}addProtect(e){e!=null&&e.length&&(this.sp=="mg2"&&(this.addHeart(e),e.forEach(t=>this.addAp(t.spAp??2))),this.protect=!0)}subtractAp(e){if(e!=null&&e.length)for(let t of this.getAllCards())t.cost+=t.calcSubtractAp(e)}addCard(e){if(e!=null&&e.length)for(let t of e)this.yama.push(new F(t))}addAp(e){if(e){let t=this.ap+e;t>this.apMax&&(t=this.apMax),t<0&&(t=0),this.ap=Number(t.toFixed(2))}}changeIgnition(e){e!=null&&(this.usingCard?this.ignitionChangeQueue.push(e):e==1?this.ignition=!0:e==0?this.ignition=!1:e==-1&&(this.ignition=!this.ignition))}ensemble(e){e&&this.te.forEach((t,s)=>{var i;(i=t.getSkill(this))!=null&&i.ensemble||this.useCard(s,!0)})}};const ie={class:"cost"},ae={key:0,class:"close"},oe={key:1,class:"test"},ne={key:2,class:"time"},ue={__name:"Card",props:{card:{type:F},stage:{type:te},te:{default:!1},close:{default:!1},pointerEvents:{default:"auto"}},setup(r){const e=r,t={heart:"rgb(204,39,39)","love+":"rgb(174,141,24)",voltage:"rgb(174,141,24)",mental:"rgb(48,124,24)",reshuffle:"rgb(134,82,195)",teMax:"rgb(134,82,195)",protect:"rgb(48,124,24)",dress:"rgb(134,82,195)",ap:"rgb(174,141,24)","ap-":"rgb(134,82,195)",ensemble:"black","":"transparent"},s={1:"#f8b500",2:"#5383c3",3:"#68be8d",4:"#ba2636",5:"#e7609e",6:"#c8c2c6",7:"#a2d7dd",8:"#fad764",9:"#9d8de2",bubble:"#555555",jewelry:"#555555"};return(i,m)=>{var h,n,d,v;return c(),g("div",{class:"card",style:U({pointerEvents:r.te&&e.card.getCost(r.te?e.stage.te:void 0)>e.stage.ap?"none":e.pointerEvents})},[a("div",{class:"background",style:U({backgroundColor:s[e.card.member]?`${s[e.card.member]}`:"transparent"})},null,4),a("div",{style:U({fontWeight:e.card.isReshuffle(e.stage)?"bold":"",fontStyle:e.card.isReshuffle(e.stage)?"italic":""})},p(e.card.short),5),a("div",ie,p(e.card.getCost(r.te?e.stage.te:void 0)),1),a("div",{class:"main",style:U({backgroundColor:t[e.card.getMain(e.stage)]})},null,4),e.close?(c(),g("div",ae,"×")):z("",!0),e.te?(c(),g("div",oe,p(Number(e.stage.testResults[e.stage.te.indexOf(e.card)].toFixed(2))),1)):z("",!0),(h=e.stage)!=null&&h.ignition&&((d=(n=e.card)==null?void 0:n.props)!=null&&d.ignitionTimes)?(c(),g("div",ne,p(((v=e.stage)==null?void 0:v.ignitionTimesDict[e.card.short])??0),1)):z("",!0)],4)}}},R=ee(ue,[["__scopeId","data-v-41d7c9d5"]]);function q(r){let e=[];for(let t=0;t<r.te.length;t++)r.te[t].getCost(r.te)<=r.ap&&r.testResults[t]>=0&&e.push(t);return e}function W(r,e){let t=e.map(i=>r.testResults[i]),s=Math.max(...t);return e.filter((i,m)=>t[m]==s)}function X(r,e,t){let s=r.te.map((n,d)=>r.testResults[d]/r.te[d].getCalcCost(r)),i=e.map(n=>s[n]),m=Math.max(...i),h=(Math.min(...i)+m)/2;if(!t&&m<=0&&Math.max(...s)>0){let n=e.filter(v=>i[v]>=h),d=Math.min(...n.map(v=>r.te[v].getCost(r.te)));return d<=r.apSpeed?n.filter(v=>r.te[v].getCost(r.te)==d):[]}else return e.filter((n,d)=>i[d]==m)}function me(r,e){let t=e.filter(m=>{var h;return(h=r.te[m].getSkill(r))==null?void 0:h["ap-"]});t.length||(t=e);let s=t.map(m=>{let h=r.te[m],n=0;return r.getAllCards().forEach(d=>{var v,w,f,k;(w=(v=d.props)==null?void 0:v.draw)!=null&&w["ap-"]&&(n+=h.calcSubtractAp((k=(f=d.props)==null?void 0:f.draw)==null?void 0:k["ap-"]))}),n}),i=Math.min(...s);return t.filter((m,h)=>s[h]==i)}function Z(r,e){let t=e.filter(s=>{var i,m;return(m=(i=r.te[s].props)==null?void 0:i.drawFilters)==null?void 0:m.length});return t.length?t:e}function _(r,e,t){if(r.getAllCards().filter(m=>m.member=="jewelry").length>e)return t;let i=t.filter(m=>r.te[m].member!="jewelry");return i.length?i:t}function K(r,e=8,t){let s,i;return t==null&&(t=r.strategy??(r.sp=="mg2"||r.sp=="tz2"||r.sp=="kz2"?"score":"cost"),r.ap+r.apSpeed*(r.apMax/10)>=r.apMax&&(t="score")),!r.ignition&&r.te.find(m=>m.short=="上升姬芽")&&r.te.find(m=>(m.getMain(r)=="mental"||m.getMain(r)=="protect")&&m.short!="上升姬芽")&&(t=="score"?s=W(r,q(r).filter(m=>{let h=r.te[m];return(h.getMain(r)=="mental"||h.getMain(r)=="protect")&&h.short!="上升姬芽"}))[0]:s=X(r,q(r).filter(m=>{let h=r.te[m];return(h.getMain(r)=="mental"||h.getMain(r)=="protect")&&h.short!="上升姬芽"}),!0)[0]),s==null&&(i=r.te.findIndex(m=>m.short=="kol慈"),i>=0&&r.getAllCards().filter(m=>m.member=="jewelry").length<e&&r.te[i].getCost(r.te)<(t=="score"?r.ap-r.apSpeed:r.ap-r.apSpeed*(r.apMax/10))&&(s=i)),s==null&&(i=r.te.findIndex(m=>m.member=="jewelry"&&r.hasCostEffect),i>=0&&r.getAllCards().filter(m=>m.member=="jewelry").length>e&&(s=i)),s==null&&(t=="score"?s=Z(r,_(r,e,W(r,q(r))))[0]:s=me(r,Z(r,_(r,e,X(r,q(r)))))[0]),s}window.strategyPlay=K;const he={class:"grid"},de=["open"],fe={class:"grid"},pe={style:{"font-size":"small"}},ce=["disabled"],ve=["disabled"],ge=["disabled"],be=["disabled"],Ce=["disabled"],ke=["disabled"],ye=["disabled"],we=["disabled"],Ae=["disabled"],Me=["disabled"],Se=["disabled"],De=["disabled"],Te=["disabled"],xe={style:{"text-align":"right"}},je={class:"flex-between"},Ee={class:"flex-between"},Ie={class:"flex-between"},Fe={class:"grid"},Pe={class:"grid"},Ne={class:"grid"},Ve={colspan:"6"},He={colspan:"2"},Le={colspan:"2"},$e={colspan:"2"},ze={colspan:"2"},Oe={colspan:"2"},Re={colspan:"2"},Ue=["onClick"],qe={colspan:"2",style:{"text-align":"center"}},Ye={__name:"Stage",setup(r){const e=E(!1),t=E(!1),s=E([]),i=E(!1),m=E(),h=E(),n=E({qc:140,sh:3.3,deckLength:17,apSpeed:2.34,apMax:20,sp:"",effect:"",jewelryCountTargetMin:0,jewelryCountTargetMax:16,cardTimes:373,skipTimes:36,strategy:"cost",jewelryCountTarget:0});let d=localStorage.getItem("formData");try{d&&(n.value={...n.value,...JSON.parse(d)})}catch{}const v=b=>b.slice().sort((l,u)=>typeof l.member=="number"&&typeof u.member=="number"?l.member-u.member:typeof l.member=="number"&&typeof u.member!="number"?-1:typeof l.member!="number"&&typeof u.member=="number"||l.member>u.member?1:l.member<u.member?-1:0).sort((l,u)=>l.year&&u.year?u.year-l.year:l.year&&!u.year?-1:!l.year&&u.year?1:0),w=v(G.map(b=>new F(b.short))),f=E([]);let k=localStorage.getItem("deck");try{k&&(f.value=JSON.parse(k).map(b=>new F(b)))}catch{}f.value.length||(f.value=G.filter(b=>typeof b.member=="number").map(b=>new F(b.short)).slice(0,16));const o=E();window.getStage=()=>o.value;const x=()=>{o.value=new te([]),o.value.apSpeed=Number(n.value.apSpeed),o.value.apMax=Number(n.value.apMax),o.value.sp=n.value.sp,o.value.effect=n.value.effect,o.value.strategy=n.value.strategy,o.value.yama=f.value.map(b=>new F(b.short))};x();const $=()=>{e.value=!1,x()},N=async b=>{var l;if(localStorage.setItem("formData",JSON.stringify(n.value)),localStorage.setItem("deck",JSON.stringify(f.value.map(u=>u.short))),i.value=!1,e.value=!0,t.value=b,b){s.value.push({deck:f.value.map(u=>u.short).join(", "),formData:{...n.value},dict:{}});for(let u=Number(n.value.jewelryCountTargetMin);u<=Number(n.value.jewelryCountTargetMax)&&e.value;u++){let A=0,S=0,D={apSkip:0};for(let j of f.value)D[j.short]=0;for(let j=0;j<Number(n.value.skipTimes);j++){await C(),x(),o.value.jewelryCountTarget=u,o.value.start();for(let P=0;P<Number(n.value.cardTimes)&&e.value;P++)o.value.useCard(K(o.value,u));if(!e.value)break;A+=o.value.score,S+=(l=o.value.getAllCards().filter(P=>P.member=="jewelry"))==null?void 0:l.length;for(let P in o.value.cardTimesDict)D[P]||(D[P]=0),D[P]+=o.value.cardTimesDict[P]}if(!e.value)break;for(let j in D)D[j]=Number((D[j]/n.value.skipTimes).toFixed(2));s.value.at(-1).dict[u]={score:Number((A/n.value.skipTimes).toFixed(2)),jewelryCount:Number((S/n.value.skipTimes).toFixed(2)),cardTimesDict:D}}e.value=!1}else x(),o.value.jewelryCountTarget=n.value.jewelryCountTarget,o.value.start(),H()},C=async b=>new Promise(l=>setTimeout(l,b)),V=E(-1),H=()=>{V.value=K(o.value,n.value.jewelryCountTarget)};return(b,l)=>(c(),g("div",null,[!e.value||t.value?(c(),g(T,{key:0},[a("h2",null,[l[23]||(l[23]=y(" DECK ")),a("button",{onClick:l[0]||(l[0]=u=>f.value=v(f.value))},"⇅")]),l[25]||(l[25]=a("hr",null,null,-1)),a("div",he,[(c(!0),g(T,null,L(f.value,(u,A)=>(c(),O(R,{card:u,close:!0,onClick:S=>f.value.splice(A,1),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))]),a("details",{open:i.value},[l[24]||(l[24]=a("summary",null,[y(" CARD "),a("hr")],-1)),a("div",fe,[(c(!0),g(T,null,L(B(w),(u,A)=>(c(),O(R,{card:u,onClick:S=>f.value.push(new(B(F))(u.short)),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))])],8,de)],64)):z("",!0),a("form",null,[l[45]||(l[45]=a("h2",null,"STAGE",-1)),l[46]||(l[46]=a("hr",null,null,-1)),a("div",pe,[l[26]||(l[26]=a("label",{for:"qc"},"曲长: ",-1)),M(a("input",{"onUpdate:modelValue":l[1]||(l[1]=u=>n.value.qc=u),type:"text",disabled:e.value,id:"qc"},null,8,ce),[[I,n.value.qc]]),l[27]||(l[27]=y(" s  ")),l[28]||(l[28]=a("label",{for:"qc"},"生化值: ",-1)),M(a("input",{"onUpdate:modelValue":l[2]||(l[2]=u=>n.value.sh=u),type:"text",disabled:e.value,id:"sh"},null,8,ve),[[I,n.value.sh]]),l[29]||(l[29]=y("   ")),l[30]||(l[30]=a("label",{for:"deckLength"},"卡组牌数: ",-1)),M(a("input",{"onUpdate:modelValue":l[3]||(l[3]=u=>n.value.deckLength=u),type:"number",disabled:e.value,id:"deckLength"},null,8,ge),[[I,n.value.deckLength]]),l[31]||(l[31]=y("   ")),a("button",{onClick:l[4]||(l[4]=u=>{n.value.apSpeed=Number((1200/n.value.qc/n.value.sh*(1-.1*Math.min(9,18-n.value.deckLength))).toFixed(2)),n.value.cardTimes=Math.floor(n.value.qc*8/3)}),disabled:e.value}," 计算AP回复速度/暂停回数 ",8,be)]),a("div",null,[l[32]||(l[32]=a("label",{for:"ap"},"AP回复速度: ",-1)),M(a("input",{"onUpdate:modelValue":l[5]||(l[5]=u=>n.value.apSpeed=u),type:"text",disabled:e.value,id:"ap"},null,8,Ce),[[I,n.value.apSpeed]])]),a("div",null,[l[33]||(l[33]=a("label",{for:"card-time"},"暂停回数: ",-1)),M(a("input",{"onUpdate:modelValue":l[6]||(l[6]=u=>n.value.cardTimes=u),disabled:e.value,type:"number",id:"card-time"},null,8,ke),[[I,n.value.cardTimes]])]),a("div",null,[l[34]||(l[34]=a("label",{for:"ap-max"},"最大AP: ",-1)),M(a("input",{"onUpdate:modelValue":l[7]||(l[7]=u=>n.value.apMax=u),disabled:e.value,type:"number",id:"ap-max"},null,8,ye),[[I,n.value.apMax]])]),a("div",null,[l[36]||(l[36]=a("label",{for:"sp"},"SP: ",-1)),M(a("select",{"onUpdate:modelValue":l[8]||(l[8]=u=>n.value.sp=u),disabled:e.value,id:"sp",onChange:l[9]||(l[9]=u=>n.value.sp.includes("2")?n.value.strategy="score":n.value.strategy="cost")},l[35]||(l[35]=[J('<option value="" data-v-e9008698>--</option><option value="tz" data-v-e9008698>舞会缀</option><option value="sy" data-v-e9008698>舞会沙耶</option><option value="tz2" data-v-e9008698>银河缀</option><option value="mg2" data-v-e9008698>银河慈</option>',5)]),40,we),[[Y,n.value.sp]])]),a("div",null,[l[38]||(l[38]=a("label",{for:"effect"},"效果: ",-1)),M(a("select",{"onUpdate:modelValue":l[10]||(l[10]=u=>n.value.effect=u),disabled:e.value,id:"effect"},l[37]||(l[37]=[J('<option value="" data-v-e9008698>--</option><option value="st1a" data-v-e9008698> (2025/01 公会战A) skill6回使用 deck全card消费AP+1 </option><option value="kj1a" data-v-e9008698> (2025/01 个人战A) 山札切 AP3回复 main效果reshuffle效果deck全card消费AP+1 </option><option value="kj1b" data-v-e9008698> (2025/01 个人战B) skill5回使用 手札全捨 山札手札上限引直 </option><option value="gc1a" data-v-e9008698> (2025/01 GC A) skill30回使用 main效果mental回复deck全card消费APstage中常-1 </option><option value="gc1b" data-v-e9008698> (2025/01 GC B) skill15回使用 deck全スリブcard消费APstage中常-1 </option><option value="gc1c" data-v-e9008698> (2025/01 GC C) skill20回使用 deck全ドルケcard消费APstage中常-1 </option>',7)]),8,Ae),[[Y,n.value.effect]])]),a("div",null,[l[40]||(l[40]=a("label",{for:"strategy"},"策略: ",-1)),M(a("select",{"onUpdate:modelValue":l[11]||(l[11]=u=>n.value.strategy=u),disabled:e.value,id:"strategy"},l[39]||(l[39]=[a("option",{value:"cost"},"LOVE/AP优先",-1),a("option",{value:"score"},"LOVE优先",-1)]),8,Me),[[Y,n.value.strategy]])]),a("div",null,[l[41]||(l[41]=a("label",{for:"jewelry"},"LIVE TARGET💎: ",-1)),M(a("input",{"onUpdate:modelValue":l[12]||(l[12]=u=>n.value.jewelryCountTarget=u),type:"number",id:"jewelry",onChange:l[13]||(l[13]=u=>{e.value&&!t.value&&(o.value.jewelryCountTarget=n.value.jewelryCountTarget,o.value.testAllCards(),H())})},null,544),[[I,n.value.jewelryCountTarget]])]),a("div",null,[l[42]||(l[42]=a("label",{for:"jewelry"},"SKIP TARGET💎: ",-1)),M(a("input",{"onUpdate:modelValue":l[14]||(l[14]=u=>n.value.jewelryCountTargetMin=u),disabled:e.value,type:"number",id:"jewelry"},null,8,Se),[[I,n.value.jewelryCountTargetMin]]),l[43]||(l[43]=y(" ~ ")),M(a("input",{"onUpdate:modelValue":l[15]||(l[15]=u=>n.value.jewelryCountTargetMax=u),disabled:e.value,type:"number",id:"jewelry"},null,8,De),[[I,n.value.jewelryCountTargetMax]])]),a("div",null,[l[44]||(l[44]=a("label",{for:"skip-time"},"SKIP回数: ",-1)),M(a("input",{"onUpdate:modelValue":l[16]||(l[16]=u=>n.value.skipTimes=u),disabled:e.value,type:"number",id:"skip-time"},null,8,Te),[[I,n.value.skipTimes]])])]),a("div",xe,[e.value&&!t.value?(c(),g("button",{key:0,onClick:l[17]||(l[17]=u=>{h.value={key:o.value.jewelryCountTarget,score:o.value.score,cardTimesDict:o.value.cardTimesDict},Q(()=>m.value.showModal())})}," LOG ")):z("",!0),e.value?(c(),g("button",{key:1,onClick:$},"RETIRE")):(c(),g(T,{key:2},[s.value.length?(c(),g("button",{key:0,onClick:l[18]||(l[18]=u=>s.value=[])}," CLEAR RESULTS ")):z("",!0),a("button",{onClick:l[19]||(l[19]=u=>N(!0))},"SKIP"),a("button",{onClick:l[20]||(l[20]=u=>N(!1))},"LIVE START")],64))]),e.value&&!t.value?(c(),g(T,{key:1},[a("h2",je,[a("div",null,p(o.value.score),1),a("div",null,p(o.value.timesCount)+"回",1)]),a("h2",Ee,[a("div",null,p(o.value.sp=="mg2"?"∞":o.value.mental?"100%":"-%"),1),a("div",null,p(o.value.ignition?"🔥":"🚫")+" "+p(o.value.sp=="kz2"?"∞":o.value.ap),1)]),l[47]||(l[47]=a("div",{style:{"text-align":"right"}},null,-1)),a("h2",Ie,[a("div",null,"手札 "+p(o.value.te.length),1),a("button",{onClick:l[21]||(l[21]=u=>{o.value.useCard(void 0),H()})}," AP SKIP ")]),l[48]||(l[48]=a("hr",null,null,-1)),a("div",Fe,[(c(!0),g(T,null,L(o.value.te,(u,A)=>(c(),O(R,{card:u,stage:o.value,te:!0,class:re({highlight:V.value==A}),onClick:S=>{o.value.useCard(A),H()}},null,8,["card","stage","class","onClick"]))),256))]),a("h2",null,"捨札 "+p(o.value.sute.length),1),l[49]||(l[49]=a("hr",null,null,-1)),a("div",Pe,[(c(!0),g(T,null,L(o.value.sute,(u,A)=>(c(),O(R,{card:u,stage:o.value,"pointer-events":"none"},null,8,["card","stage"]))),256))]),a("h2",null,"山札 "+p(o.value.yama.length),1),l[50]||(l[50]=a("hr",null,null,-1)),a("div",Ne,[(c(!0),g(T,null,L(o.value.yama,(u,A)=>(c(),O(R,{card:u,stage:o.value,"pointer-events":"none"},null,8,["card","stage"]))),256))])],64)):(c(!0),g(T,{key:2},L(s.value,(u,A)=>(c(),g("table",null,[a("thead",null,[a("tr",null,[a("td",Ve,p(u.deck),1)]),a("tr",null,[a("td",He,"AP回复速度: "+p(u.formData.apSpeed),1),a("td",Le,"暂停回数: "+p(u.formData.cardTimes),1),a("td",$e,"SKIP回数: "+p(u.formData.skipTimes),1)]),a("tr",null,[a("td",ze,"SP: "+p(u.formData.sp),1),a("td",Oe,"效果: "+p(u.formData.effect),1),a("td",Re,"策略: "+p(u.formData.strategy),1)]),l[51]||(l[51]=a("tr",null,[a("td",null,[y("target"),a("br"),y("💎")]),a("td",null,[y("kol慈"),a("br"),y("回数")]),a("td",null,[y("💎"),a("br"),y("回数")]),a("td",null,[y("AP SKIP"),a("br"),y("回数")]),a("td",null,"heart"),a("td",null,"%")],-1))]),a("tbody",null,[(c(!0),g(T,null,L(u.dict,(S,D)=>(c(),g("tr",{style:{cursor:"pointer"},onClick:j=>{h.value={key:D,...S},Q(()=>m.value.showModal())}},[a("td",null,p(D),1),a("td",null,p(S.cardTimesDict.kol慈??0),1),a("td",null,p(S.cardTimesDict["💎"]??0),1),a("td",null,p(S.cardTimesDict.apSkip),1),a("td",null,p(S.score),1),a("td",null,p(Number((S.score/Math.max(...Object.values(u.dict).map(j=>j.score))*100).toFixed(2))),1)],8,Ue))),256))])]))),256)),h.value?(c(),g("dialog",{key:3,ref_key:"dialog",ref:m},[a("table",null,[a("thead",null,[a("tr",null,[l[52]||(l[52]=a("td",null,"target💎",-1)),a("td",null,p(h.value.key),1)]),a("tr",null,[l[53]||(l[53]=a("td",null,"heart",-1)),a("td",null,p(h.value.score),1)])]),a("tbody",null,[(c(!0),g(T,null,L(h.value.cardTimesDict,(u,A)=>(c(),g("tr",null,[a("td",null,p(A),1),a("td",null,p(u)+"回",1)]))),256))]),a("tfoot",null,[a("tr",null,[a("td",qe,[a("button",{onClick:l[22]||(l[22]=u=>h.value=void 0)},"关闭")])])])])],512)):z("",!0)]))}},Ke=ee(Ye,[["__scopeId","data-v-e9008698"]]);export{Ke as default};
