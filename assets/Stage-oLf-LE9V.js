import{_ as ee,o as v,c as b,a as i,n as q,t as c,e as z,f as E,F as T,d as y,g as L,u as B,h as M,v as F,i as Y,j as J,k as Q,l as O,m as re}from"./index-Bf0KcbtX.js";class I{constructor(e){this.short=e,this.props={short:e};let t=G.find(a=>a.short==e);if(t){this.props=t,this.member=t.member;let a=le.find(s=>s.member==t.member);a&&(this.year=a.year,this.unit=a.unit),this.cost=t.cost,this.costDelta=0,this.teCostDelta=0}}copy(){let e=new I(this.short);return e.cost=this.cost,e.costDelta=this.costDelta,e.teCostDelta=this.teCostDelta,e}getMain(e){var t;return(t=this.props)!=null&&t.main?typeof this.props.main=="function"?this.props.main(e):this.props.main:""}getCost(e,t=!0){var s,u,m,o;let a=this.cost;return a+=this.costDelta,e&&((s=this.props)!=null&&s.teCostDelta)&&(a+=(u=this.props)==null?void 0:u.teCostDelta(e)),e&&(a+=this.teCostDelta),t&&((m=this.props)!=null&&m.spCostDelta)&&(a+=(o=this.props)==null?void 0:o.spCostDelta(e)),a>=1?a:1}getCalcCost(e){let t=this.getSkill(e),a=this.getCost(e.te),s=a;return s-=(t==null?void 0:t.ap)??0,s-=(t==null?void 0:t.spAp)??0,(s<1||s>=e.apMax&&a<=e.ap)&&(s=1),s}isReshuffle(e){var t;return(t=this.props)!=null&&t.reshuffle?typeof this.props.reshuffle=="function"?this.props.reshuffle(e):this.props.reshuffle:!1}getSkill(e){var t;if((t=this.props)!=null&&t.skill)return typeof this.props.skill=="function"?this.props.skill(e):this.props.skill}onSkill(e){e.trigger(this.getSkill(e))}afterSkill(e){var t;(t=this.props)!=null&&t.afterSkill&&this.props.afterSkill(e,this)}onDraw(e){var t;this.teCostDelta=0,(t=this.props)!=null&&t.draw&&(typeof this.props.draw=="function"?e.trigger(this.props.draw(e,this)):e.trigger(this.props.draw))}calcDrawHeartCount(e){var m,o,f,g,w,p,h,d,x,$,N,k;let t=0,a;(m=this.props)!=null&&m.draw&&(typeof((o=this.props)==null?void 0:o.draw)=="function"?a=(f=this.props)==null?void 0:f.draw(e):a=(g=this.props)==null?void 0:g.draw),t+=((w=a==null?void 0:a.heart)==null?void 0:w.length)||0,e.sp=="tz"&&(t+=((p=a==null?void 0:a.voltage)==null?void 0:p.length)||0),e.sp=="mg2"&&(t+=(((h=a==null?void 0:a.mental)==null?void 0:h.length)||0)+(((d=a==null?void 0:a.protect)==null?void 0:d.length)||0));let s=0,u=this.getSkill(e);if((u==null?void 0:u.ap)<0){s+=((x=u.heart)==null?void 0:x.length)||0,e.sp=="tz"&&(s+=(($=u==null?void 0:u.voltage)==null?void 0:$.length)||0),e.sp=="mg2"&&(s+=(((N=u==null?void 0:u.mental)==null?void 0:N.length)||0)+(((k=u==null?void 0:u.protect)==null?void 0:k.length)||0));let V=e.getAllCards().length/e.teMax;t+=s*V/(V+e.scoreCardCount)}return t}onCross(e,t){var a;(a=this.props)!=null&&a.cross&&this.props.cross(e,t,this)}matchAttrs(e){return Object.keys(e).every(t=>e[t]==null?!0:e[t]==this[t])}calcSubtractAp(e){let t=0;if(e!=null&&e.length)for(let a of e)this.matchAttrs({...a,cost:void 0})&&(t+=a.cost);return t}}const le=[{member:3,short:"kz",year:102,unit:"srb"},{member:4,short:"tz",year:102,unit:"drk"},{member:6,short:"mg",year:102,unit:"mrp"},{member:1,short:"kh",year:103,unit:"srb"},{member:2,short:"sy",year:103,unit:"drk"},{member:5,short:"rr",year:103,unit:"mrp"},{member:7,short:"gn",year:104,unit:"srb"},{member:8,short:"sz",year:104,unit:"drk"},{member:9,short:"hm",year:104,unit:"mrp"}],G=[{short:"åœ£å¤œåŸ",member:7,cost:8,main:"dress",reshuffle:!0,skill:{cards:["åœ£å¤œğŸ‘—","åœ£å¤œğŸ‘—","åœ£å¤œğŸ‘—","åœ£å¤œğŸ‘—","åœ£å¤œğŸ‘—"]}},{short:"åœ£å¤œğŸ‘—",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill:{mental:[{}],voltage:[{}]}},{short:"paåŸ",member:7,cost:4,main:"dress",skill:{cards:["pağŸ‘—","pağŸ‘—"]}},{short:"pağŸ‘—",member:"dress",cost:2,main:"ap",once:!0},{short:"lttfé“ƒ",member:8,cost:9,main:"voltage",skill:{voltage:[{over:!0,spAp:6}],mental:[{minus:!0}]},drawFilters:[{member:9}]},{short:"ä¸Šå‡å§¬èŠ½",member:9,cost:3,main(r){return r!=null&&r.ignition?"reshuffle":"mental"},reshuffle:r=>r==null?void 0:r.ignition,skill(r){let e={mental:[{}],protect:[{}]};return r.ignition&&(e["ap-"]=[{unit:"mrp",cost:-3}]),e},ignitionTimes:3,cross(r,e){let t=e.getMain(r);r.ignition||(t=="mental"||t=="protect")&&r.trigger({ignition:1})}},{short:"paå§¬èŠ½",member:9,cost:4,main:"reshuffle",reshuffle:!0,skill:{protect:[{}]}},{short:"ç»‡å§¬èŠ±å¸†",member:1,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]}},{short:"éŸ³å‡»èŠ±å¸†",member:1,cost:9,main:"heart",reshuffle:!0,yamaReshuffle:!0,skill:{heart:[{},{},{}]},draw:{heart:[{}],mental:[{}]}},{short:"lttfæ²™è€¶",member:2,cost:5,main:"voltage",skill:{voltage:[{spAp:3}]},drawFilters:[{member:6}]},{short:"æ²èŒ¶ç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:[{}]},draw:{heart:[{}]}},{short:"è›‹ç³•ç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]},draw:{heart:[{}]}},{short:"èŠ±ç»“æ¢¢",member:3,cost:13,main:"reshuffle",reshuffle:!0,drawFilters:[{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"}],skill:{"ap-":[{unit:"srb",cost:-3},{member:"dress",cost:-3}]},cross(r,e,t){e.unit=="srb"&&(r.trigger({heart:[{}]}),t.teCostDelta-=3)}},{short:"kolæ¢¢",member:3,cost:9,main:"mental",skill:{mental:[{spAp:5}],heart:[{}]},draw:{"ap-":[{member:6,cost:-9}]},cross(r,e){e.member==6&&r.trigger({protect:[{}],heart:[{}]})}},{short:"è‡ªç”±ç¼€",member:4,cost:2,main:"mental",skill:{mental:[{spAp:6}],heart:[{}]},draw(r){let e={};return r.mental&&(e={heart:[{}]}),e}},{short:"kolç¼€",member:4,cost:3,main:"voltage",skill:{voltage:[{}],heart:[{}]},draw:{"ap-":[{member:3,cost:-3},{member:6,cost:-3}]},cross(r,e){e.member==6&&r.trigger({voltage:[{}],heart:[{}]})}},{short:"afæ…ˆ",member:6,cost:9,main:"protect",skill:{ap:-1/0,protect:[{spAp:17}],heart:[{over:!0},{},{},{},{},{},{},{},{}]}},{short:"kolæ…ˆ",member:6,cost:39,main:"heart",skill:{heart:[{over:!0}],cards:["ğŸ’"]},cross(r,e,t){(e.member==1||e.member==2||e.member==3||e.member==4||e.member==5||e.member==7||e.member==8||e.member==9)&&(t.teCostDelta-=3)}},{short:"ğŸ’",member:"jewelry",cost:1,main:"ap-",once:!0,skill:{"ap-":[{cost:-1}]},draw:{heart:[{}],voltage:[{}],protect:[{}]}},{short:"èˆä¼šç¼€",member:4,cost:2,main:"voltage",skill:{voltage:[{spAp:5}]}},{short:"èˆä¼šæ²™è€¶",member:2,cost:2,main:"love+"},{short:"é“¶æ²³ç¼€",member:4,cost:2,main:"voltage",skill:{voltage:[{spAp:6}],heart:[{}]}},{short:"é“¶æ²³æ…ˆ",member:6,cost:5,main:"reshuffle",reshuffle:!0,skill:{mental:[{over:!0,spAp:21}],protect:[{spAp:10}]}},{short:"è®´æ­Œæ¢¢",member:3,cost:3,main:"love+",draw:{heart:[{}]}},{short:"ritmæ¢¢",member:3,cost:2,main:"voltage",skill:{voltage:[{spAp:3}]},draw:{mental:[{}]}},{short:"ç§‹è‰²æ¢¢",member:3,cost:6,main:"love+",draw:{mental:[{}]}},{short:"è‡ªç”±æ¢¢",member:3,cost:2,main:"protect",skill:{protect:[{spAp:4}]},draw(r){let e={};return r.mental&&(e={protect:[{spAp:6}]}),e}},{short:"æ•™å¸ˆæ¢¢",member:3,cost:2,main:"heart",skill:{heart:[{}],mental:-1},draw:{mental:[{}]}},{short:"è“è¿œæ¢¢",member:3,cost:3,main:"dress",skill:{cards:["è“è¿œæ¢¢ğŸ‘—"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"è“è¿œæ¢¢ğŸ‘—",member:"dress",cost:3,main:"love+",once:!0},{short:"æ°´æ¯æ¢¢",member:3,cost:5,main:"love+",draw:{cards:["âšª"]}},{short:"âšª",member:"bubble",cost:1,main:"ap-",once:!0,skill:{"ap-":[{unit:"srb",cost:-3},{member:"dress",cost:-3}]}},{short:"afæ¢¢",member:3,cost:0,spCostDelta(r){var e;return((e=r==null?void 0:r.filter(t=>{var a;return!((a=t.props)!=null&&a.spCostDelta)}))==null?void 0:e.reduce((t,a)=>t+a.getCost(r,!1),0))||0},main:"ensemble",reshuffle:!0,drawnFilter:!0,skill:{ap:-1/0,ensemble:!0,heart:[{},{},{},{},{},{},{},{},{}]}},{short:"ssç¼€",member:4,cost:3,main:"heart",skill:{heart:[{}]},draw:{voltage:[{}]}},{short:"é›¨ä¼ç¼€",member:4,cost:5,main:"love+",draw:{heart:[{}]}},{short:"èŠ±ç«ç¼€",member:4,cost:3,main:"voltage",skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"ç§‹è‰²ç¼€",member:4,cost:6,main:"heart",skill(r){let e={};return r.mental?e={heart:[{},{},{}]}:e={heart:[{},{}]},e},draw:{mental:[{}]}},{short:"æŠ±èŠ±ç¼€",member:4,cost:4,main:"voltage",skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"éŸ³å‡»ç¼€",member:4,cost:9,main:"voltage",skill:{voltage:[{}],heart:[{},{},{}]},draw:{voltage:[{}],protect:[{}]}},{short:"afç¼€",member:4,cost:9,main:"voltage",skill:{ap:-1/0,voltage:[{over:!0,spAp:22}],heart:[{over:!0},{},{},{},{},{},{},{},{}]}},{short:"è›‹ç³•æ…ˆ",member:6,cost:4,main:"mental",skill:{mental:[{}]},draw:{mental:[{}],protect:[{}]}},{short:"èˆä¼šæ…ˆ",member:6,cost:3,main:"love+",yamaUse:!0,skill:{mental:-1},draw:{mental:[{}]}},{short:"åœ£è¯æ…ˆ",member:6,cost:4,main:"mental",skill:{mental:[{},{},{}]},draw:{mental:[{}]}},{short:"æŠ±èŠ±æ…ˆ",member:6,cost:4,main:"protect",skill:{protect:[{}]},draw:{protect:[{}]}},{short:"hsctæ…ˆ",member:6,cost:4,main:"reshuffle",reshuffle:!0},{short:"ritmèŠ±å¸†",member:1,cost:1,main:"heart",skill:{heart:[{}]},draw:{mental:[{}]}},{short:"è®´æ­ŒèŠ±å¸†",member:1,cost:3,main:"mental",skill:{mental:[{}]},draw:{voltage:[{}]}},{short:"é›¨ä¼èŠ±å¸†",member:1,cost:3,main:"voltage",skill:{voltage:[{}]},draw:{mental:[{}]}},{short:"è‡ªç”±èŠ±å¸†",member:1,cost:2,main:"voltage",skill:{voltage:[{spAp:3}],heart:[{}]},draw(r){let e={};return r.mental&&(e={voltage:[{spAp:2}]}),e}},{short:"èˆä¼šèŠ±å¸†",member:1,cost:6,main:"heart",skill:{heart:[{}]}},{short:"å¶æ´»èŠ±å¸†",member:1,cost:9,main:"heart",reshuffle:!0,skill:{heart:[{}]},cross(r,e,t){(e.member==2||e.member==5)&&(t.teCostDelta-=2)}},{short:"å¿«ä¹èŠ±å¸†",member:1,cost:2,main:"mental",skill:{mental:[{}],voltage:[{}]},draw:{mental:[{}],heart:[{}]}},{short:"è“è¿œèŠ±å¸†",member:1,cost:3,main:"dress",skill:{cards:["è“è¿œèŠ±å¸†ğŸ‘—"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"è“è¿œèŠ±å¸†ğŸ‘—",member:"dress",cost:3,main:"heart",once:!0,skill:{heart:[{}]}},{short:"é›¨ä¼æ²™è€¶",member:2,cost:4,main:"mental",skill:{mental:[{}]},draw:{voltage:[{}]}},{short:"tcæ²™è€¶",member:2,cost:3,main:"love+",skill:{mental:-1},draw:{voltage:[{}]}},{short:"å®‡å®™æ²™è€¶",member:2,cost:4,main:"teMax",skill:{voltage:[{}]}},{short:"æ²èŒ¶æ²™è€¶",member:2,cost:2,main:"love+",skill:{voltage:[{}]}},{short:"åœ£è¯æ²™è€¶",member:2,cost:4,main:"voltage",skill:{voltage:[{}],heart:[{},{}]},draw:{voltage:[{}]}},{short:"dbç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"æ¢¦å¢ƒç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]}},{short:"rodç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]},draw:{mental:[{}]}},{short:"ä¸€ä¸“ç‘ ç’ƒ",member:5,cost:5,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]}},{short:"abdlç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]}},{short:"ç™½æ˜¼ç‘ ç’ƒ",member:5,cost:3,main:"reshuffle",reshuffle:!0,skill:{mental:-1},draw:{heart:[{}]}},{short:"mcç‘ ç’ƒ",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill(r){let e;return r.ignition?e={heart:[{}]}:e={ap:1},e}},{short:"ritmåŸ",member:7,cost:5,main:"dress",skill:{cards:["ritmğŸ‘—1","ritmğŸ‘—2","ritmğŸ‘—3"]},draw:{protect:[{}]}},{short:"ritmğŸ‘—1",member:"dress",cost:1,main:"heart",once:!0,skill:{heart:[{}]}},{short:"ritmğŸ‘—2",member:"dress",cost:1,main:"voltage",once:!0,skill:{voltage:[{}]}},{short:"ritmğŸ‘—3",member:"dress",cost:1,main:"teMax",once:!0},{short:"è“è¿œåŸ",member:7,cost:3,main:"dress",skill:{cards:["è“è¿œğŸ‘—","è“è¿œğŸ‘—","è“è¿œğŸ‘—"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"è“è¿œğŸ‘—",member:"dress",cost:2,main:"reshuffle",reshuffle:!0,once:!0,skill:{heart:[{}]}},{short:"èŠ±ç»“åŸ",member:7,cost:13,teCostDelta(r){let e=0;for(let t of r)t.unit=="srb"&&(e-=3);return e},main:"dress",reshuffle:!0,skill:{cards:["èŠ±ç»“ğŸ‘—1","èŠ±ç»“ğŸ‘—1","èŠ±ç»“ğŸ‘—1","èŠ±ç»“ğŸ‘—2","èŠ±ç»“ğŸ‘—2","èŠ±ç»“ğŸ‘—2","èŠ±ç»“ğŸ‘–3","èŠ±ç»“ğŸ‘–3","èŠ±ç»“ğŸ‘–3"]},drawFilters:[{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"}]},{short:"èŠ±ç»“ğŸ‘—1",member:"dress",cost:3,main:"voltage",once:!0,skill(r){let e={voltage:[{over:!0,spAp:9}]};return r.getAllCards().length>=33&&(e.heart=[{over:!0}]),e}},{short:"èŠ±ç»“ğŸ‘—2",member:"dress",cost:3,main:"protect",once:!0,skill(r){let e={protect:[{spAp:8}]};return r.getAllCards().length>=33&&(e.heart=[{over:!0}]),e}},{short:"èŠ±ç»“ğŸ‘–3",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill(r){return r.getAllCards().length>=30?{heart:[{over:!0}]}:res},drawFilters:[{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"}]},{short:"dbé“ƒ",member:8,cost:5,main:"heart",skill:{heart:[{}]},afterSkill(r,e){e.costDelta--}},{short:"é›ªçººé“ƒ",member:8,cost:3,main:"mental",skill:{mental:[{}]}}];let te=class se{constructor(e){this.score=0,this.te=[],this.sute=[],this.yama=e,this.mental=!0,this.protect=!1,this.apMax=20,this.ignition=!1,this.ignitionTimesDict={},this.cardTimesDict={apSkip:0},this.ignitionChangeQueue=[],this.drawFilterStack=[],this.timesCount=0,this.cardsCount=0,this.sp="",this.effect="",this.teMax=8,this.ap=0,this.apSpeed=2.5,this.drawHeartCount=0,this.jewelryCountTarget=0,this.hasCostEffect=!1,this.testResults=[],this.hasIgnitionAndScoreCard=!1,this.hasEnsemble=!1,this.scoreCardCount=0}getAllCards(){return[...this.te,...this.sute,...this.yama]}getDrawYama(){return this.yama.length?this.yama:this.sute}start(){this.ap=this.apSpeed,this.hasIgnitionAndScoreCard=this.getAllCards().filter(e=>{var t,a,s;return(((t=e.props)==null?void 0:t.main)=="mental"||((a=e.props)==null?void 0:a.main)=="protect")&&(e.isReshuffle(this)||((s=e.getSkill(this))==null?void 0:s.ap)<0)}).length>0,this.hasEnsemble=this.getAllCards().filter(e=>{var t;return((t=e.props)==null?void 0:t.main)=="ensemble"}).length>0,this.scoreCardCount=this.getAllCards().filter(e=>{var t;return((t=e.getSkill(this))==null?void 0:t.ap)<0}).length,this.sp=="kz2"&&(this.ap=1/0);for(let e=0;e<this.teMax;e++){let t=Math.floor(Math.random()*this.yama.length),a=this.yama.splice(t,1)[0];this.te.push(a)}this.hasCostEffect=["st1a"].includes(this.effect),this.testAllCards()}draw(e){this.yama.length||(this.yama=[...this.sute],this.sute=[],this.effect=="kj1a"&&(this.addAp(3),this.yama.forEach(m=>{m.getMain(this)=="reshuffle"&&m.cost++})));let t,a=this.drawFilterStack.pop();a?(t=this.yama.filter(m=>m.matchAttrs(a)),t.length||(t=this.yama)):t=this.yama.filter(m=>{var o;return(o=m.props)==null?void 0:o.drawnFilter}),t.length||(t=this.yama);let s=Math.floor(Math.random()*t.length),u=t[s];this.yama.splice(this.yama.indexOf(u),1),this.te[e]=u,u.onDraw(this)}autoAp(){this.sp!="kz2"&&this.addAp(this.apSpeed)}useCard(e,t=!1){var u,m,o,f,g,w,p;if(e==null){this.cardTimesDict.apSkip++,this.autoAp(),this.timesCount++;return}this.usingCard={heart:!1};let a=[...this.te],s=a[e];(u=s.props)!=null&&u.drawFilters&&this.drawFilterStack.push(...(m=s.props)==null?void 0:m.drawFilters),this.cardTimesDict[s.short]||(this.cardTimesDict[s.short]=0),this.cardTimesDict[s.short]++,this.sp!="kz2"&&this.addAp(-s.getCost(a)),s.cost=s.props.cost,s.onSkill(this),this.sp=="sy"&&this.trigger({heart:[{}]}),this.ignition&&((o=s.props)!=null&&o.ignitionTimes)&&(this.ignitionTimesDict[s.short]==null&&(this.ignitionTimesDict[s.short]=0),this.ignitionTimesDict[s.short]++,this.ignitionTimesDict[s.short]>=((f=s.props)==null?void 0:f.ignitionTimes)&&(this.trigger({ignition:0}),this.ignitionTimesDict[s.short]=0));for(let h of a)h.onCross(this,s);if(s.afterSkill(this),(g=s.props)!=null&&g.yamaUse&&(s.toYama=!0),(w=s.props)!=null&&w.yamaReshuffle&&this.getAllCards().forEach(h=>{h!=s&&(h.toYama=!0)}),(p=s.props)!=null&&p.once&&(s.toOut=!0),!t){if(s.isReshuffle(this)){for(let h in a)h!=e&&this.sute.push(a[h]);this.yama.push(...this.sute.filter(h=>h.toYama&&!h.toOut)),this.sute=this.sute.filter(h=>!h.toYama&&!h.toOut);for(let h=0;h<this.teMax;h++)this.draw(h)}else this.draw(e);this.usingCard=!1;for(let h=0;h<this.ignitionChangeQueue.length;h++)this.trigger({ignition:this.ignitionChangeQueue.shift()});s.toOut||(s.toYama?this.yama.push(s):this.sute.push(s)),this.getAllCards().forEach(h=>h.toYama=!1)}if(this.timesCount++,this.cardsCount++,this.effect=="gc1a"&&this.cardsCount%30==0)this.getAllCards().forEach(h=>{h.getMain()=="mental"&&h.costDelta--});else if(this.effect=="gc1b"&&this.cardsCount%15==0)this.getAllCards().forEach(h=>{h.unit=="srb"&&h.costDelta--});else if(this.effect=="gc1c"&&this.cardsCount%20==0)this.getAllCards().forEach(h=>{h.unit=="drk"&&h.costDelta--});else if(this.effect=="kj1b"&&this.cardsCount%5==0){this.sute.push(...this.te.splice(0));for(let h=0;h<this.teMax;h++)this.draw(h)}else this.effect=="st1a"&&this.cardsCount%6==0&&this.getAllCards().forEach(h=>h.cost++);!this.protect&&this.sp!="mg2"&&(this.mental=!1),t||(this.autoAp(),this.testAllCards())}calcTestDrawHeartCount(){let e=0,t=this.getAllCards(),a=t.filter(s=>s.short=="ğŸ’").length;if(a<this.jewelryCountTarget)for(let s=0;s<this.jewelryCountTarget-a;s++)t.push(new I("ğŸ’"));return t.forEach(s=>{e+=s.calcDrawHeartCount(this)}),this.drawHeartCount=e,e}calcNextDrawHeartCount(e){var o;let t=0,a=0,s=[],u=[],m=this.getAllCards();return s=(o=e.props)!=null&&o.yamaReshuffle?m.filter(f=>f!=e):this.yama,s.forEach(f=>{t+=f.calcDrawHeartCount(this)}),s.length<this.teMax?(u=[...this.sute,...this.te.filter(f=>f!=e)],u.forEach(f=>a+=f.calcDrawHeartCount(this)),(t+a/u.length*(this.teMax-s.length))/m.length*Math.min(m.length,this.teMax*2)+this.drawHeartCount*this.teMax/m.length*Math.max(0,m.length-this.teMax*2)/m.length):t/s.length*this.teMax/m.length*Math.min(m.length,this.teMax*2)+this.drawHeartCount*this.teMax/m.length*Math.max(0,m.length-this.teMax*2)/m.length}testCard(e,t){var d,x,$,N;let a=t?t.short:this.te[e].short;if(a=="kolæ…ˆ")return .01;if(a=="ğŸ’")return 0;if(["ritmåŸ","è“è¿œæ¢¢","è“è¿œèŠ±å¸†","paåŸ","èŠ±ç»“åŸ"].includes(a))return-.01;let s=new se([]);s.usingCard={heart:!1};for(let k of this.te)s.te.push(k.copy());for(let k of this.sute)s.sute.push(k.copy());for(let k of this.yama)s.yama.push(k.copy());s.mental=this.mental,s.protect=this.protect,s.ap=this.ap,s.apMax=this.apMax,s.apSpeed=this.apSpeed,s.ignition=this.ignition,s.ignitionTimesDict={...this.ignitionTimesDict},s.sp=this.sp,s.jewelryCountTarget=this.jewelryCountTarget,s.scoreCardCount=this.scoreCardCount;let u=s.getAllCards().length,m,o;if(t&&(m=s.te[e].getCost(s.te),s.te[e]=t,o=s.te[e].getCost(s.te),(s.sp=="mg2"||s.sp=="tz2"||s.sp=="kz2")&&(m=1,o=1),o>s.apMax))return 0;let f=s.te[e],g=f.getSkill(s);g&&(g={...g,ensemble:!1});let w=f.isReshuffle(s);f.onSkill(s);for(let k of s.te)k.onCross(s,f);s.calcTestDrawHeartCount();let p=s.score,h=s.getAllCards().length;if(w&&(p+=s.calcNextDrawHeartCount(f)),((x=(d=f.props)==null?void 0:d.drawFilters)==null?void 0:x.length)==1&&!t){let k=($=f.props)==null?void 0:$.drawFilters[0],V=s.getDrawYama().filter(H=>Object.keys(k).every(C=>H[C]==k[C]));V.forEach(H=>p+=s.testCard(e,H)/V.length)}return(N=f.props)!=null&&N.once&&(p+=((s.drawHeartCount-f.calcDrawHeartCount(s))/(u-1)-s.drawHeartCount/u)*Math.min(this.hasEnsemble?h/s.teMax:1/0,w?s.teMax:s.teMax**3)),p+=(s.drawHeartCount/h-s.drawHeartCount/u)*Math.min(this.hasEnsemble?h/s.teMax:1/0,s.teMax),h>u&&(p/=(h-u)/(this.hasEnsemble?h/s.teMax:1)+1),(g==null?void 0:g.ap)<=-s.apMax&&(p/=Math.ceil(Math.min(...this.te.filter(k=>k!=f&&k.member!="jewelry").map(k=>k.getCost(this.te)))/s.apSpeed)),f.short=="ä¸Šå‡å§¬èŠ½"&&(this.hasIgnitionAndScoreCard||(p*=3/4),this.hasCostEffect&&(p*=f.getCost(s.te))),t&&(p/=Math.max(2,(m+o)/m)),p<0?0:p}testAllCards(){this.testResults=this.te.map((e,t)=>this.testCard(t))}trigger(e){if(e)for(let t in e){let a=e[t];t=="ap"&&this.addAp(a),t=="heart"&&this.addHeart(a),t=="voltage"&&this.addVoltage(a),t=="mental"&&this.addMental(a),t=="protect"&&this.addProtect(a),t=="ap-"&&this.subtractAp(a),t=="cards"&&this.addCard(a),t=="ensemble"&&this.ensemble(a),t=="ignition"&&this.changeIgnition(a),t=="spAp"&&this.addAp(a)}}addHeart(e){if(e!=null&&e.length){if(!this.usingCard)debugger;!this.usingCard.heart&&e[0].over&&this.score++,this.score+=e.length,this.usingCard.heart=!0}}addVoltage(e){e!=null&&e.length&&(this.sp=="tz"&&this.addHeart(e),this.sp=="tz2"&&e.forEach(t=>this.addAp(t.spAp??1)))}addMental(e){e!=null&&e.length&&e.forEach(t=>{!t.minus&&this.sp=="mg2"&&(this.addHeart([t]),this.addAp(t.spAp??1)),t.minus&&this.sp!="mg2"?this.mental=!1:this.mental=!0})}addProtect(e){e!=null&&e.length&&(this.sp=="mg2"&&(this.addHeart(e),e.forEach(t=>this.addAp(t.spAp??2))),this.protect=!0)}subtractAp(e){if(e!=null&&e.length)for(let t of this.getAllCards())t.cost+=t.calcSubtractAp(e)}addCard(e){if(e!=null&&e.length)for(let t of e)this.yama.push(new I(t))}addAp(e){if(e){let t=this.ap+e;t>this.apMax&&(t=this.apMax),t<0&&(t=0),this.ap=Number(t.toFixed(2))}}changeIgnition(e){e!=null&&(this.usingCard?this.ignitionChangeQueue.push(e):e==1?this.ignition=!0:e==0?this.ignition=!1:e==-1&&(this.ignition=!this.ignition))}ensemble(e){e&&this.te.forEach((t,a)=>{var s;(s=t.getSkill(this))!=null&&s.ensemble||this.useCard(a,this.te)})}};const ie={class:"cost"},ae={key:0,class:"close"},oe={key:1,class:"test"},ne={key:2,class:"time"},ue={__name:"Card",props:{card:{type:I},stage:{type:te},te:{default:!1},close:{default:!1},pointerEvents:{default:"auto"}},setup(r){const e=r,t={heart:"rgb(204,39,39)","love+":"rgb(174,141,24)",voltage:"rgb(174,141,24)",mental:"rgb(48,124,24)",reshuffle:"rgb(134,82,195)",teMax:"rgb(134,82,195)",protect:"rgb(48,124,24)",dress:"rgb(134,82,195)",ap:"rgb(174,141,24)","ap-":"rgb(134,82,195)",ensemble:"black","":"transparent"},a={1:"#f8b500",2:"#5383c3",3:"#68be8d",4:"#ba2636",5:"#e7609e",6:"#c8c2c6",7:"#a2d7dd",8:"#fad764",9:"#9d8de2",bubble:"#555555",jewelry:"#555555"};return(s,u)=>{var m,o,f,g;return v(),b("div",{class:"card",style:q({pointerEvents:r.te&&e.card.getCost(r.te?e.stage.te:void 0)>e.stage.ap?"none":e.pointerEvents})},[i("div",{class:"background",style:q({backgroundColor:a[e.card.member]?`${a[e.card.member]}`:"transparent"})},null,4),i("div",{style:q({fontWeight:e.card.isReshuffle(e.stage)?"bold":"",fontStyle:e.card.isReshuffle(e.stage)?"italic":""})},c(e.card.short),5),i("div",ie,c(e.card.getCost(r.te?e.stage.te:void 0)),1),i("div",{class:"main",style:q({backgroundColor:t[e.card.getMain(e.stage)]})},null,4),e.close?(v(),b("div",ae,"Ã—")):z("",!0),e.te?(v(),b("div",oe,c(Number(e.stage.testResults[e.stage.te.indexOf(e.card)].toFixed(2))),1)):z("",!0),(m=e.stage)!=null&&m.ignition&&((f=(o=e.card)==null?void 0:o.props)!=null&&f.ignitionTimes)?(v(),b("div",ne,c(((g=e.stage)==null?void 0:g.ignitionTimesDict[e.card.short])??0),1)):z("",!0)],4)}}},R=ee(ue,[["__scopeId","data-v-41d7c9d5"]]);function U(r,e){let t=[];for(let a=0;a<r.te.length;a++)r.te[a].getCost(r.te)<=r.ap+(e?r.apSpeed:0)&&r.testResults[a]>=0&&t.push(a);return t}function W(r,e){let t=e.map(s=>r.testResults[s]),a=Math.max(...t);return e.filter((s,u)=>t[u]==a)}function X(r,e,t){let a=r.te.map((o,f)=>r.testResults[f]/r.te[f].getCalcCost(r)),s=e.map(o=>a[o]),u=Math.max(...s),m=Math.max(...U(r,!0).map(o=>a[o]))/2;if(!t&&u<=m&&Math.max(...a)>0){let o=e.filter(g=>s[g]>=0),f=Math.min(...o.map(g=>r.te[g].getCost(r.te)));return f<=r.apSpeed?o.filter(g=>r.te[g].getCost(r.te)==f):[]}else return e.filter((o,f)=>s[f]==u)}function me(r,e){let t=e.filter(u=>{var m;return(m=r.te[u].getSkill(r))==null?void 0:m["ap-"]});t.length||(t=e);let a=t.map(u=>{let m=r.te[u],o=0;return r.getAllCards().forEach(f=>{var g,w,p,h;(w=(g=f.props)==null?void 0:g.draw)!=null&&w["ap-"]&&(o+=m.calcSubtractAp((h=(p=f.props)==null?void 0:p.draw)==null?void 0:h["ap-"]))}),o}),s=Math.min(...a);return t.filter((u,m)=>a[m]==s)}function Z(r,e){let t=e.filter(a=>{var s,u;return(u=(s=r.te[a].props)==null?void 0:s.drawFilters)==null?void 0:u.length});return t.length?t:e}function _(r,e,t){if(r.getAllCards().filter(u=>u.member=="jewelry").length>e)return t;let s=t.filter(u=>r.te[u].member!="jewelry");return s.length?s:t}function K(r,e=8,t){let a,s;return t==null&&(t=r.strategy??(r.sp=="mg2"||r.sp=="tz2"||r.sp=="kz2"?"score":"cost"),r.ap+r.apSpeed*(r.apMax/10)>=r.apMax&&(t="score")),!r.ignition&&r.te.find(u=>u.short=="ä¸Šå‡å§¬èŠ½")&&r.te.find(u=>(u.getMain(r)=="mental"||u.getMain(r)=="protect")&&u.short!="ä¸Šå‡å§¬èŠ½")&&(t=="score"?a=W(r,U(r).filter(u=>{let m=r.te[u];return(m.getMain(r)=="mental"||m.getMain(r)=="protect")&&m.short!="ä¸Šå‡å§¬èŠ½"}))[0]:a=X(r,U(r).filter(u=>{let m=r.te[u];return(m.getMain(r)=="mental"||m.getMain(r)=="protect")&&m.short!="ä¸Šå‡å§¬èŠ½"}),!0)[0]),a==null&&(s=r.te.findIndex(u=>u.short=="kolæ…ˆ"),s>=0&&r.getAllCards().filter(u=>u.member=="jewelry").length<e&&r.te[s].getCost(r.te)<(t=="score"?r.ap-r.apSpeed:r.ap-r.apSpeed*(r.apMax/10))&&(a=s)),a==null&&(s=r.te.findIndex(u=>u.member=="jewelry"&&r.hasCostEffect),s>=0&&r.getAllCards().filter(u=>u.member=="jewelry").length>e&&(a=s)),a==null&&(t=="score"?a=Z(r,_(r,e,W(r,U(r))))[0]:a=me(r,Z(r,_(r,e,X(r,U(r)))))[0]),a}window.strategyPlay=K;const he={class:"grid"},de=["open"],fe={class:"grid"},pe={style:{"font-size":"small"}},ce=["disabled"],ve=["disabled"],ge=["disabled"],be=["disabled"],Ce=["disabled"],ke=["disabled"],ye=["disabled"],we=["disabled"],Ae=["disabled"],Me=["disabled"],Se=["disabled"],De=["disabled"],Te=["disabled"],xe={style:{"text-align":"right"}},je={class:"flex-between"},Ee={class:"flex-between"},Fe={class:"flex-between"},Ie={class:"grid"},Pe={class:"grid"},Ne={class:"grid"},Ve={colspan:"6"},He={colspan:"2"},Le={colspan:"2"},$e={colspan:"2"},ze={colspan:"2"},Oe={colspan:"2"},Re={colspan:"2"},Ue=["onClick"],qe={colspan:"2",style:{"text-align":"center"}},Ye={__name:"Stage",setup(r){const e=E(!1),t=E(!1),a=E([]),s=E(!1),u=E(),m=E(),o=E({qc:140,sh:3.3,deckLength:17,apSpeed:2.34,apMax:20,sp:"",effect:"",jewelryCountTargetMin:0,jewelryCountTargetMax:16,cardTimes:373,skipTimes:36,strategy:"cost",jewelryCountTarget:0});let f=localStorage.getItem("formData");try{f&&(o.value={...o.value,...JSON.parse(f)})}catch{}const g=C=>C.slice().sort((l,n)=>typeof l.member=="number"&&typeof n.member=="number"?l.member-n.member:typeof l.member=="number"&&typeof n.member!="number"?-1:typeof l.member!="number"&&typeof n.member=="number"||l.member>n.member?1:l.member<n.member?-1:0).sort((l,n)=>l.year&&n.year?n.year-l.year:l.year&&!n.year?-1:!l.year&&n.year?1:0),w=g(G.map(C=>new I(C.short))),p=E([]);let h=localStorage.getItem("deck");try{h&&(p.value=JSON.parse(h).map(C=>new I(C)))}catch{}p.value.length||(p.value=G.filter(C=>typeof C.member=="number").map(C=>new I(C.short)).slice(0,16));const d=E();window.getStage=()=>d.value;const x=()=>{d.value=new te([]),d.value.apSpeed=Number(o.value.apSpeed),d.value.apMax=Number(o.value.apMax),d.value.sp=o.value.sp,d.value.effect=o.value.effect,d.value.strategy=o.value.strategy,d.value.yama=p.value.map(C=>new I(C.short))};x();const $=()=>{e.value=!1,x()},N=async C=>{var l;if(localStorage.setItem("formData",JSON.stringify(o.value)),localStorage.setItem("deck",JSON.stringify(p.value.map(n=>n.short))),s.value=!1,e.value=!0,t.value=C,C){a.value.push({deck:p.value.map(n=>n.short).join(", "),formData:{...o.value},dict:{}});for(let n=Number(o.value.jewelryCountTargetMin);n<=Number(o.value.jewelryCountTargetMax)&&e.value;n++){let A=0,S=0,D={apSkip:0};for(let j of p.value)D[j.short]=0;for(let j=0;j<Number(o.value.skipTimes);j++){await k(),x(),d.value.jewelryCountTarget=n,d.value.start();for(let P=0;P<Number(o.value.cardTimes)&&e.value;P++)d.value.useCard(K(d.value,n));if(!e.value)break;A+=d.value.score,S+=(l=d.value.getAllCards().filter(P=>P.member=="jewelry"))==null?void 0:l.length;for(let P in d.value.cardTimesDict)D[P]||(D[P]=0),D[P]+=d.value.cardTimesDict[P]}if(!e.value)break;for(let j in D)D[j]=Number((D[j]/o.value.skipTimes).toFixed(2));a.value.at(-1).dict[n]={score:Number((A/o.value.skipTimes).toFixed(2)),jewelryCount:Number((S/o.value.skipTimes).toFixed(2)),cardTimesDict:D}}e.value=!1}else x(),d.value.jewelryCountTarget=o.value.jewelryCountTarget,d.value.start(),H()},k=async C=>new Promise(l=>setTimeout(l,C)),V=E(-1),H=()=>{V.value=K(d.value,o.value.jewelryCountTarget)};return(C,l)=>(v(),b("div",null,[!e.value||t.value?(v(),b(T,{key:0},[i("h2",null,[l[23]||(l[23]=y(" DECK ")),i("button",{onClick:l[0]||(l[0]=n=>p.value=g(p.value))},"â‡…")]),l[25]||(l[25]=i("hr",null,null,-1)),i("div",he,[(v(!0),b(T,null,L(p.value,(n,A)=>(v(),O(R,{card:n,close:!0,onClick:S=>p.value.splice(A,1),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))]),i("details",{open:s.value},[l[24]||(l[24]=i("summary",null,[y(" CARD "),i("hr")],-1)),i("div",fe,[(v(!0),b(T,null,L(B(w),(n,A)=>(v(),O(R,{card:n,onClick:S=>p.value.push(new(B(I))(n.short)),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))])],8,de)],64)):z("",!0),i("form",null,[l[45]||(l[45]=i("h2",null,"STAGE",-1)),l[46]||(l[46]=i("hr",null,null,-1)),i("div",pe,[l[26]||(l[26]=i("label",{for:"qc"},"æ›²é•¿: ",-1)),M(i("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.qc=n),type:"text",disabled:e.value,id:"qc"},null,8,ce),[[F,o.value.qc]]),l[27]||(l[27]=y(" sÂ  ")),l[28]||(l[28]=i("label",{for:"qc"},"ç”ŸåŒ–å€¼: ",-1)),M(i("input",{"onUpdate:modelValue":l[2]||(l[2]=n=>o.value.sh=n),type:"text",disabled:e.value,id:"sh"},null,8,ve),[[F,o.value.sh]]),l[29]||(l[29]=y(" Â  ")),l[30]||(l[30]=i("label",{for:"deckLength"},"å¡ç»„ç‰Œæ•°: ",-1)),M(i("input",{"onUpdate:modelValue":l[3]||(l[3]=n=>o.value.deckLength=n),type:"number",disabled:e.value,id:"deckLength"},null,8,ge),[[F,o.value.deckLength]]),l[31]||(l[31]=y(" Â  ")),i("button",{onClick:l[4]||(l[4]=n=>{o.value.apSpeed=Number((1200/o.value.qc/o.value.sh*(1-.1*Math.min(9,18-o.value.deckLength))).toFixed(2)),o.value.cardTimes=Math.floor(o.value.qc*8/3)}),disabled:e.value}," è®¡ç®—APå›å¤é€Ÿåº¦/æš‚åœå›æ•° ",8,be)]),i("div",null,[l[32]||(l[32]=i("label",{for:"ap"},"APå›å¤é€Ÿåº¦: ",-1)),M(i("input",{"onUpdate:modelValue":l[5]||(l[5]=n=>o.value.apSpeed=n),type:"text",disabled:e.value,id:"ap"},null,8,Ce),[[F,o.value.apSpeed]])]),i("div",null,[l[33]||(l[33]=i("label",{for:"card-time"},"æš‚åœå›æ•°: ",-1)),M(i("input",{"onUpdate:modelValue":l[6]||(l[6]=n=>o.value.cardTimes=n),disabled:e.value,type:"number",id:"card-time"},null,8,ke),[[F,o.value.cardTimes]])]),i("div",null,[l[34]||(l[34]=i("label",{for:"ap-max"},"æœ€å¤§AP: ",-1)),M(i("input",{"onUpdate:modelValue":l[7]||(l[7]=n=>o.value.apMax=n),disabled:e.value,type:"number",id:"ap-max"},null,8,ye),[[F,o.value.apMax]])]),i("div",null,[l[36]||(l[36]=i("label",{for:"sp"},"SP: ",-1)),M(i("select",{"onUpdate:modelValue":l[8]||(l[8]=n=>o.value.sp=n),disabled:e.value,id:"sp",onChange:l[9]||(l[9]=n=>o.value.sp.includes("2")?o.value.strategy="score":o.value.strategy="cost")},l[35]||(l[35]=[J('<option value="" data-v-e9008698>--</option><option value="tz" data-v-e9008698>èˆä¼šç¼€</option><option value="sy" data-v-e9008698>èˆä¼šæ²™è€¶</option><option value="tz2" data-v-e9008698>é“¶æ²³ç¼€</option><option value="mg2" data-v-e9008698>é“¶æ²³æ…ˆ</option>',5)]),40,we),[[Y,o.value.sp]])]),i("div",null,[l[38]||(l[38]=i("label",{for:"effect"},"æ•ˆæœ: ",-1)),M(i("select",{"onUpdate:modelValue":l[10]||(l[10]=n=>o.value.effect=n),disabled:e.value,id:"effect"},l[37]||(l[37]=[J('<option value="" data-v-e9008698>--</option><option value="st1a" data-v-e9008698> (2025/01 å…¬ä¼šæˆ˜A) skill6å›ä½¿ç”¨ deckå…¨cardæ¶ˆè´¹AP+1 </option><option value="kj1a" data-v-e9008698> (2025/01 ä¸ªäººæˆ˜A) å±±æœ­åˆ‡ AP3å›å¤ mainæ•ˆæœreshuffleæ•ˆæœdeckå…¨cardæ¶ˆè´¹AP+1 </option><option value="kj1b" data-v-e9008698> (2025/01 ä¸ªäººæˆ˜B) skill5å›ä½¿ç”¨ æ‰‹æœ­å…¨æ¨ å±±æœ­æ‰‹æœ­ä¸Šé™å¼•ç›´ </option><option value="gc1a" data-v-e9008698> (2025/01 GC A) skill30å›ä½¿ç”¨ mainæ•ˆæœmentalå›å¤deckå…¨cardæ¶ˆè´¹APstageä¸­å¸¸-1 </option><option value="gc1b" data-v-e9008698> (2025/01 GC B) skill15å›ä½¿ç”¨ deckå…¨ã‚¹ãƒªãƒ–cardæ¶ˆè´¹APstageä¸­å¸¸-1 </option><option value="gc1c" data-v-e9008698> (2025/01 GC C) skill20å›ä½¿ç”¨ deckå…¨ãƒ‰ãƒ«ã‚±cardæ¶ˆè´¹APstageä¸­å¸¸-1 </option>',7)]),8,Ae),[[Y,o.value.effect]])]),i("div",null,[l[40]||(l[40]=i("label",{for:"strategy"},"ç­–ç•¥: ",-1)),M(i("select",{"onUpdate:modelValue":l[11]||(l[11]=n=>o.value.strategy=n),disabled:e.value,id:"strategy"},l[39]||(l[39]=[i("option",{value:"cost"},"LOVE/APä¼˜å…ˆ",-1),i("option",{value:"score"},"LOVEä¼˜å…ˆ",-1)]),8,Me),[[Y,o.value.strategy]])]),i("div",null,[l[41]||(l[41]=i("label",{for:"jewelry"},"LIVE TARGETğŸ’: ",-1)),M(i("input",{"onUpdate:modelValue":l[12]||(l[12]=n=>o.value.jewelryCountTarget=n),type:"number",id:"jewelry",onChange:l[13]||(l[13]=n=>{e.value&&!t.value&&(d.value.jewelryCountTarget=o.value.jewelryCountTarget,d.value.testAllCards(),H())})},null,544),[[F,o.value.jewelryCountTarget]])]),i("div",null,[l[42]||(l[42]=i("label",{for:"jewelry"},"SKIP TARGETğŸ’: ",-1)),M(i("input",{"onUpdate:modelValue":l[14]||(l[14]=n=>o.value.jewelryCountTargetMin=n),disabled:e.value,type:"number",id:"jewelry"},null,8,Se),[[F,o.value.jewelryCountTargetMin]]),l[43]||(l[43]=y(" ~ ")),M(i("input",{"onUpdate:modelValue":l[15]||(l[15]=n=>o.value.jewelryCountTargetMax=n),disabled:e.value,type:"number",id:"jewelry"},null,8,De),[[F,o.value.jewelryCountTargetMax]])]),i("div",null,[l[44]||(l[44]=i("label",{for:"skip-time"},"SKIPå›æ•°: ",-1)),M(i("input",{"onUpdate:modelValue":l[16]||(l[16]=n=>o.value.skipTimes=n),disabled:e.value,type:"number",id:"skip-time"},null,8,Te),[[F,o.value.skipTimes]])])]),i("div",xe,[e.value&&!t.value?(v(),b("button",{key:0,onClick:l[17]||(l[17]=n=>{m.value={key:d.value.jewelryCountTarget,score:d.value.score,cardTimesDict:d.value.cardTimesDict},Q(()=>u.value.showModal())})}," LOG ")):z("",!0),e.value?(v(),b("button",{key:1,onClick:$},"RETIRE")):(v(),b(T,{key:2},[a.value.length?(v(),b("button",{key:0,onClick:l[18]||(l[18]=n=>a.value=[])}," CLEAR RESULTS ")):z("",!0),i("button",{onClick:l[19]||(l[19]=n=>N(!0))},"SKIP"),i("button",{onClick:l[20]||(l[20]=n=>N(!1))},"LIVE START")],64))]),e.value&&!t.value?(v(),b(T,{key:1},[i("h2",je,[i("div",null,c(d.value.score),1),i("div",null,c(d.value.timesCount)+"å›",1)]),i("h2",Ee,[i("div",null,c(d.value.sp=="mg2"?"âˆ":d.value.mental?"100%":"-%"),1),i("div",null,c(d.value.ignition?"ğŸ”¥":"ğŸš«")+" "+c(d.value.sp=="kz2"?"âˆ":d.value.ap),1)]),l[47]||(l[47]=i("div",{style:{"text-align":"right"}},null,-1)),i("h2",Fe,[i("div",null,"æ‰‹æœ­ "+c(d.value.te.length),1),i("button",{onClick:l[21]||(l[21]=n=>{d.value.useCard(void 0),H()})}," AP SKIP ")]),l[48]||(l[48]=i("hr",null,null,-1)),i("div",Ie,[(v(!0),b(T,null,L(d.value.te,(n,A)=>(v(),O(R,{card:n,stage:d.value,te:!0,class:re({highlight:V.value==A}),onClick:S=>{d.value.useCard(A),H()}},null,8,["card","stage","class","onClick"]))),256))]),i("h2",null,"æ¨æœ­ "+c(d.value.sute.length),1),l[49]||(l[49]=i("hr",null,null,-1)),i("div",Pe,[(v(!0),b(T,null,L(d.value.sute,(n,A)=>(v(),O(R,{card:n,stage:d.value,"pointer-events":"none"},null,8,["card","stage"]))),256))]),i("h2",null,"å±±æœ­ "+c(d.value.yama.length),1),l[50]||(l[50]=i("hr",null,null,-1)),i("div",Ne,[(v(!0),b(T,null,L(d.value.yama,(n,A)=>(v(),O(R,{card:n,stage:d.value,"pointer-events":"none"},null,8,["card","stage"]))),256))])],64)):(v(!0),b(T,{key:2},L(a.value,(n,A)=>(v(),b("table",null,[i("thead",null,[i("tr",null,[i("td",Ve,c(n.deck),1)]),i("tr",null,[i("td",He,"APå›å¤é€Ÿåº¦: "+c(n.formData.apSpeed),1),i("td",Le,"æš‚åœå›æ•°: "+c(n.formData.cardTimes),1),i("td",$e,"SKIPå›æ•°: "+c(n.formData.skipTimes),1)]),i("tr",null,[i("td",ze,"SP: "+c(n.formData.sp),1),i("td",Oe,"æ•ˆæœ: "+c(n.formData.effect),1),i("td",Re,"ç­–ç•¥: "+c(n.formData.strategy),1)]),l[51]||(l[51]=i("tr",null,[i("td",null,[y("target"),i("br"),y("ğŸ’")]),i("td",null,[y("kolæ…ˆ"),i("br"),y("å›æ•°")]),i("td",null,[y("ğŸ’"),i("br"),y("å›æ•°")]),i("td",null,[y("AP SKIP"),i("br"),y("å›æ•°")]),i("td",null,"heart"),i("td",null,"%")],-1))]),i("tbody",null,[(v(!0),b(T,null,L(n.dict,(S,D)=>(v(),b("tr",{style:{cursor:"pointer"},onClick:j=>{m.value={key:D,...S},Q(()=>u.value.showModal())}},[i("td",null,c(D),1),i("td",null,c(S.cardTimesDict.kolæ…ˆ??0),1),i("td",null,c(S.cardTimesDict["ğŸ’"]??0),1),i("td",null,c(S.cardTimesDict.apSkip),1),i("td",null,c(S.score),1),i("td",null,c(Number((S.score/Math.max(...Object.values(n.dict).map(j=>j.score))*100).toFixed(2))),1)],8,Ue))),256))])]))),256)),m.value?(v(),b("dialog",{key:3,ref_key:"dialog",ref:u},[i("table",null,[i("thead",null,[i("tr",null,[l[52]||(l[52]=i("td",null,"targetğŸ’",-1)),i("td",null,c(m.value.key),1)]),i("tr",null,[l[53]||(l[53]=i("td",null,"heart",-1)),i("td",null,c(m.value.score),1)])]),i("tbody",null,[(v(!0),b(T,null,L(m.value.cardTimesDict,(n,A)=>(v(),b("tr",null,[i("td",null,c(A),1),i("td",null,c(n)+"å›",1)]))),256))]),i("tfoot",null,[i("tr",null,[i("td",qe,[i("button",{onClick:l[22]||(l[22]=n=>m.value=void 0)},"å…³é—­")])])])])],512)):z("",!0)]))}},Ke=ee(Ye,[["__scopeId","data-v-e9008698"]]);export{Ke as default};
