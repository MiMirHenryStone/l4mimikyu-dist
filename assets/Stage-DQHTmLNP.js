import{_ as te,o as h,c,a as s,n as N,t as f,b as R,r as D,F as M,d as x,e as w,u as Y,w as S,v as ie,f as G,g as P,h as A,i as ae}from"./index-BJrSXmHx.js";let re=class se{constructor(e){this.score=0,this.te=[],this.sute=[],this.yama=e,this.mental=!0,this.protect=!1,this.ignition=!1,this.timesDict={kol慈:0,"💎":0},this.timesCount=0,this.sp="",this.effects={},this.teMax=8,this.apMax=20}getAllCards(){return[...this.te,...this.sute,...this.yama]}getDrawYama(){return this.yama.length?this.yama:this.sute}start(){for(let e=0;e<this.teMax;e++){let r=Math.floor(Math.random()*this.yama.length),i=this.yama.splice(r,1)[0];this.te.push(i)}}draw(e,r){this.yama.length||(this.yama=[...this.sute],this.sute=[],this.effects.a&&this.yama.forEach(u=>{u.getMain(this)=="reshuffle"&&(u.cost+=1)}));let i;r?(i=this.yama.filter(u=>u.matchAttrs(r)),i.length||(i=this.yama)):i=this.yama;let n=Math.floor(Math.random()*i.length),l=i[n];this.yama.splice(this.yama.findIndex(u=>u.short==l.short),1),this.te[e]=l,l.onDraw(this)}useCard(e){var n,l,u,p,k,m,v;let r=this.te[e];(r.short=="kol慈"||r.short=="💎")&&this.timesDict[r.short]++;let i=r.isReshuffle(this);r.onSkill(this);for(let d of this.te)d.onCross(this,r);if(this.sp=="sy"&&this.score++,i){for(let d in this.te)d!=e&&this.sute.push(this.te[d]);(n=r.props)!=null&&n.yamaReshuffle&&this.yama.push(...this.sute.splice(0));for(let d=0;d<this.teMax;d++)this.draw(d,(u=(l=r.props)==null?void 0:l.drawFilters)==null?void 0:u[d])}else this.draw(e,(k=(p=r.props)==null?void 0:p.drawFilters)==null?void 0:k[0]);if((m=r.props)!=null&&m.once||((v=r.props)!=null&&v.yamaUse?this.yama.push(r):this.sute.push(r)),r.cost=r.props.cost,r.afterSkill(this),this.timesCount++,this.effects.b&&this.timesCount%5==0){this.sute.push(...this.te.splice(0));for(let d=0;d<this.teMax;d++)this.draw(d)}!this.protect&&this.sp!="mg2"&&(this.mental=!1)}testCard(e){let r=new se([]);for(let n of this.te)r.te.push(n.copy());r.mental=this.mental,r.protect=this.protect,r.ignition=this.ignition,r.timesDict=this.timesDict,r.sp=this.sp;let i=r.te[e];i.onSkill(r);for(let n of r.te)n.onCross(r,i);return r.score}trigger(e){this.addHeart(e.heart),this.addVoltage(e.voltage),this.addMental(e.mental),this.addProtect(e.protect),this.subtractAp(e["ap-"])}addHeart(e){e&&(this.score+=e)}addVoltage(e){e&&this.sp=="td"&&(this.score+=e)}addMental(e){e&&(e>0&&this.sp=="mg2"&&(this.score+=e),e>0?this.mental=!0:e<0&&this.sp!="mg2"&&(this.mental=!1))}addProtect(e){e&&(this.sp=="mg2"&&(this.score+=e),this.protect=!0)}subtractAp(e){if(e!=null&&e.length)for(let r of this.getAllCards())r.cost+=r.calcSubtractAp(e)}};class y{constructor(e){this.short=e,this.props={short:e};let r=O.find(i=>i.short==e);if(r){this.props=r,this.member=r.member;let i=oe.find(n=>n.member==r.member);i&&(this.year=i.year,this.unit=i.unit),this.cost=r.cost,this.teCostDelta=0}}copy(){let e=new y(this.short);return e.cost=this.cost,e.teCostDelta=this.teCostDelta,e}getMain(e){var r;return(r=this.props)!=null&&r.main?typeof this.props.main=="function"?this.props.main(e):this.props.main:""}getCost(e=!1){let r=this.cost;return e&&(r+=this.teCostDelta),r>=1?r:1}isReshuffle(e){var r;return(r=this.props)!=null&&r.reshuffle?typeof this.props.reshuffle=="function"?this.props.reshuffle(e):this.props.reshuffle:!1}onSkill(e){var r;(r=this.props)!=null&&r.skill&&(typeof this.props.skill=="function"?this.props.skill(e):e.trigger(this.props.skill))}afterSkill(e){var r;(r=this.props)!=null&&r.afterSkill&&this.props.afterSkill(e)}onDraw(e){var r;this.teCostDelta=0,(r=this.props)!=null&&r.draw&&(typeof this.props.draw=="function"?this.props.draw(e,this):e.trigger(this.props.draw))}onCross(e,r){var i;(i=this.props)!=null&&i.cross&&this.props.cross(e,r,this)}matchAttrs(e){return Object.keys(e).every(r=>e[r]==null?!0:e[r]==this[r])}calcSubtractAp(e){let r=0;if(e!=null&&e.length)for(let i of e)this.matchAttrs({...i,cost:void 0})&&(r+=i.cost);return r}}const oe=[{member:3,short:"kz",year:102,unit:"srb"},{member:4,short:"td",year:102,unit:"drk"},{member:6,short:"mg",year:102,unit:"mrp"},{member:1,short:"kh",year:103,unit:"srb"},{member:2,short:"sy",year:103,unit:"drk"},{member:5,short:"rr",year:103,unit:"mrp"},{member:7,short:"gn",year:104,unit:"srb"},{member:8,short:"sz",year:104,unit:"drk"},{member:9,short:"hm",year:104,unit:"mrp"}],O=[{short:"圣夜吟",member:7,cost:8,main:"dress",reshuffle:!0,skill(t){for(let e=0;e<5;e++)t.yama.push(new y("圣夜👗"))}},{short:"圣夜👗",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill:{mental:1,voltage:1}},{short:"pa吟",member:7,cost:4,main:"dress",skill(t){for(let e=0;e<2;e++)t.yama.push(new y("pa吟👗"))}},{short:"pa吟👗",member:"dress",cost:2,main:"ap",once:!0},{short:"lttf铃",member:8,cost:9,main:"voltage",skill:{voltage:1,mental:-1},drawFilters:[{member:9}]},{short:"上升姬芽",member:9,cost:3,main(t){return t!=null&&t.ignition?"reshuffle":"mental"},reshuffle:t=>t==null?void 0:t.ignition,skill:{mental:1,protect:1},afterSkill(t){t.ignition&&(t.timesDict[this.short]==null?t.timesDict[this.short]=0:t.timesDict[this.short]++,t.timesDict[this.short]>=3&&(t.ignition=!1,t.timesDict[this.short]=void 0),t.getAllCards().forEach(e=>{e.unit=="mrp"&&(e.cost-=3)}))},cross(t,e){if(!t.ignition){let r=e.getMain(t);(r=="mental"||r=="protect")&&(t.ignition=!0)}}},{short:"pa姬芽",member:9,cost:4,main:"reshuffle",reshuffle:!0,skill:{protect:1}},{short:"织姬花帆",member:1,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:1}},{short:"音击花帆",member:1,cost:9,main:"heart",reshuffle:!0,yamaReshuffle:!0,skill:{heart:3},draw:{heart:1,mental:1}},{short:"lttf沙耶",member:2,cost:5,main:"voltage",skill:{voltage:1},drawFilters:[{member:6}]},{short:"沏茶瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:1},draw:{heart:1}},{short:"蛋糕瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:1},draw:{heart:1}},{short:"花结梢",member:3,cost:13,main:"reshuffle",reshuffle:!0,drawFilters:[{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"}],cross(t,e,r){e.unit=="srb"&&(t.trigger({heart:1}),r.teCostDelta-=3)},afterSkill(t){t.getAllCards().forEach(e=>{(e.unit=="srb"||e.member=="dress")&&(e.cost-=3)})}},{short:"kol梢",member:3,cost:9,main:"mental",skill:{mental:1,heart:1},draw:{"ap-":[{member:6,cost:-9}]},cross(t,e){e.member==6&&t.trigger({protect:1,heart:1})}},{short:"自由缀",member:4,cost:2,main:"mental",skill:{mental:1,heart:1},draw:t=>{t.mental&&t.trigger({heart:1})}},{short:"kol缀",member:4,cost:3,main:"voltage",skill:{voltage:1,heart:1},draw:{"ap-":[{member:3,cost:-3},{member:6,cost:-3}]},cross(t,e){e.member==6&&t.trigger({voltage:1,heart:1})}},{short:"hsct慈",member:6,cost:4,main:"reshuffle",reshuffle:!0},{short:"kol慈",member:6,cost:39,main:"heart",skill:{heart:2},cross(t,e,r){(e.member==1||e.member==2||e.member==3||e.member==4||e.member==5||e.member==7||e.member==8||e.member==9)&&(r.teCostDelta-=3)},afterSkill(t){t.yama.push(new y("💎"))}},{short:"💎",member:"jewelry",cost:1,main:"ap-",once:!0,draw:{heart:1,voltage:1,protect:1}},{short:"舞会缀",member:4,cost:2,main:"voltage",skill:{voltage:1}},{short:"舞会沙耶",member:2,cost:2,main:"love+"},{short:"银河慈",member:6,cost:5,main:"reshuffle",reshuffle:!0,skill:{mental:2,protect:1}},{short:"讴歌梢",member:3,cost:3,main:"love+",draw:{heart:1}},{short:"雨伞缀",member:4,cost:5,main:"love+",draw:{heart:1}},{short:"快乐花帆",member:1,cost:2,main:"mental",skill:{mental:1,voltage:1},draw:{mental:1,heart:1}},{short:"白昼瑠璃",member:5,cost:3,main:"reshuffle",reshuffle:!0,skill:{mental:-1},draw:{heart:1}},{short:"ss缀",member:4,cost:3,main:"heart",skill:{heart:1},draw:{voltage:1}},{short:"花火缀",member:4,cost:3,main:"voltage",skill:{voltage:1},draw:{voltage:1}},{short:"抱花缀",member:4,cost:4,main:"voltage",skill:{voltage:1},draw:{voltage:1}},{short:"音击缀",member:4,cost:9,main:"voltage",skill:{voltage:1,heart:3},draw:{voltage:1,protect:1}},{short:"讴歌花帆",member:1,cost:3,main:"mental",skill:{mental:1},draw:{voltage:1}},{short:"自由花帆",member:1,cost:2,main:"voltage",skill:{voltage:1,heart:1},draw:t=>{t.mental&&t.trigger({voltage:1})}},{short:"雨伞沙耶",member:2,cost:4,main:"mental",skill:{mental:1},draw:{voltage:1}},{short:"tc沙耶",member:2,cost:3,main:"love+",skill:{mental:-1},draw:{voltage:1}},{short:"圣诞沙耶",member:2,cost:4,main:"voltage",skill:{voltage:1,heart:2},draw:{voltage:1}},{short:"db瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:1},draw:{voltage:1}},{short:"教师梢",member:3,cost:2,main:"heart",skill:{heart:1,mental:-1},draw:{mental:1}},{short:"ritm梢",member:3,cost:2,main:"voltage",skill:{voltage:1},draw:{mental:1}},{short:"秋色梢",member:3,cost:6,main:"love+",draw:{mental:1}},{short:"自由梢",member:3,cost:2,main:"protect",skill:{protect:1},draw:t=>{t.mental&&t.trigger({protect:1})}},{short:"秋色缀",member:4,cost:6,main:"heart",skill:t=>{t.mental?t.trigger({heart:3}):t.trigger({heart:2})},draw:{mental:1}},{short:"蛋糕慈",member:6,cost:4,main:"mental",skill:{mental:1},draw:{mental:1,protect:1}},{short:"舞会慈",member:6,cost:3,main:"love+",yamaUse:!0,skill:{mental:-1},draw:{mental:1}},{short:"圣诞慈",member:6,cost:4,main:"mental",skill:{mental:3},draw:{mental:1}},{short:"抱花慈",member:6,cost:4,main:"protect",skill:{protect:1},draw:{protect:1}},{short:"ritm花帆",member:1,cost:1,main:"heart",skill:{heart:1},draw:{mental:1}},{short:"雨伞花帆",member:1,cost:3,main:"voltage",skill:{voltage:1},draw:{mental:1}},{short:"rod瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:1},draw:{mental:1}},{short:"ritm吟",member:7,cost:5,main:"dress",skill(t){t.yama.push(new y("ritm👗1")),t.yama.push(new y("ritm👗2")),t.yama.push(new y("ritm👗3"))},draw:{protect:1}},{short:"ritm👗1",member:"dress",cost:1,main:"heart",once:!0,skill:{heart:1}},{short:"ritm👗2",member:"dress",cost:1,main:"voltage",once:!0,skill:{voltage:1}},{short:"ritm👗3",member:"dress",cost:1,main:"teMax",once:!0}],ne={class:"cost"},me={key:0,class:"close"},ue={key:1,class:"test"},he={key:2,class:"time"},fe={__name:"Card",props:{card:{type:y},stage:{type:re},te:{default:!1},close:{default:!1},pointerEvents:{default:"auto"}},setup(t){const e=t,r={heart:"rgb(204,39,39)","love+":"rgb(174,141,24)",voltage:"rgb(174,141,24)",mental:"rgb(48,124,24)",reshuffle:"rgb(134,82,195)",teMax:"rgb(134,82,195)",protect:"rgb(48,124,24)",dress:"rgb(134,82,195)",ap:"rgb(174,141,24)","ap-":"rgb(134,82,195)","":"transparent"},i={1:"#f8b500",2:"#5383c3",3:"#68be8d",4:"#ba2636",5:"#e7609e",6:"#c8c2c6",7:"#a2d7dd",8:"#fad764",9:"#9d8de2"};return(n,l)=>{var u,p;return h(),c("div",{class:"card",style:N({pointerEvents:t.te&&e.card.getCost(t.te)>20?"none":e.pointerEvents})},[s("div",{class:"background",style:N({backgroundColor:i[e.card.member]?`${i[e.card.member]}`:"transparent"})},null,4),s("div",{style:N({fontWeight:e.card.isReshuffle(e.stage)?"bold":""})},f(e.card.short),5),s("div",ne,f(e.card.getCost(t.te)),1),s("div",{class:"main",style:N({backgroundColor:r[e.card.getMain(e.stage)]})},null,4),e.close?(h(),c("div",me,"×")):R("",!0),e.te?(h(),c("div",ue,f(e.stage.testCard(e.stage.te.indexOf(e.card))),1)):R("",!0),((u=e.stage)==null?void 0:u.timesDict[e.card.short])!=null?(h(),c("div",he,f((p=e.stage)==null?void 0:p.timesDict[e.card.short]),1)):R("",!0)],4)}}},E=te(fe,[["__scopeId","data-v-ecf7fecb"]]);function T(t){let e=[];for(let r=0;r<t.te.length;r++)t.te[r].getCost()<=t.apMax&&e.push(r);return e}function j(t,e){let r=e.map(n=>t.testCard(n)),i=Math.max(...r);return e.filter((n,l)=>r[l]==i)}function L(t,e){let r=e.map(n=>t.te[n].getCost(!0)),i=Math.min(...r);return e.filter((n,l)=>r[l]==i)}function H(t,e){let r=e.map(n=>{let l=t.te[n],u=0;return t.getAllCards().forEach(p=>{var k,m,v,d;(m=(k=p.props)==null?void 0:k.draw)!=null&&m["ap-"]&&(u+=l.calcSubtractAp((d=(v=p.props)==null?void 0:v.draw)==null?void 0:d["ap-"]))}),u}),i=Math.min(...r);return e.filter((n,l)=>r[l]==i)}function W(t,e){let r=t.getDrawYama(),i=e.map(l=>{var k,m;let u=t.te[l],p=r;if((k=u.props)!=null&&k.drawFilters){let v=(m=u.props)==null?void 0:m.drawFilters[0];p=r.filter(d=>Object.keys(v).every(F=>d[F]==v[F])),p.length||(p=r)}return p.filter(v=>v.isReshuffle(t)).length/p.length}),n=Math.max(...i);return e.filter((l,u)=>i[u]==n)}function J(t,e){let r=e.filter(i=>{var n,l;return(l=(n=t.te[i].props)==null?void 0:n.drawFilters)==null?void 0:l.length});return r.length?r:e}function q(t,e){let r=e.filter(i=>{var n;return(n=t.te[i].props)==null?void 0:n.yamaReshuffle});return r.length?r:e}function Q(t,e){let r=e.filter(i=>{var n,l;return!(((l=(n=t.te[i].props)==null?void 0:n.skill)==null?void 0:l.mental)<0)});return r.length?r:e}function _(t,e){let r=e.filter(i=>t.te[i].member=="dress");return r.length?r:e}function U(t,e){let r=e.filter(i=>t.te[i].getMain(t)!="dress");return r.length?r:e}function X(t,e){let r=e.filter(i=>{var n;return typeof((n=t.te[i].props)==null?void 0:n.reshuffle)!="function"});return r.length?r:e}function Z(t,e){let r=e.filter(i=>t.te[i].member!="jewelry");return r.length?r:e}function ee(t,e=9,r="score"){let i,n;if(!t.ignition&&t.te.find(l=>l.short=="上升姬芽")&&t.te.find(l=>(l.getMain(t)=="mental"||l.getMain(t)=="protect")&&l.short!="上升姬芽"))r=="cost"?i=j(t,L(t,T(t).filter(l=>{let u=t.te[l];return(u.getMain(t)=="mental"||u.getMain(t)=="protect")&&u.short!="上升姬芽"})))[0]:i=j(t,T(t).filter(l=>{let u=t.te[l];return(u.getMain(t)=="mental"||u.getMain(t)=="protect")&&u.short!="上升姬芽"}))[0];else if(n=t.te.findIndex(l=>l.short=="kol慈"),n>=0&&t.getAllCards().filter(l=>l.member=="jewelry").length<e&&t.te[n].getCost(!0)<(r=="score"?t.apMax:10))i=n;else if(T(t).find(l=>t.te[l].isReshuffle(t))!=null){let l=T(t).filter(u=>t.te[u].isReshuffle(t));r=="cost"?i=H(t,J(t,X(t,j(t,L(t,Q(t,U(t,_(t,q(t,l)))))))))[0]:i=J(t,j(t,X(t,U(t,_(t,q(t,l))))))[0]}else r=="cost"?i=H(t,j(t,L(t,W(t,Q(t,Z(t,U(t,_(t,T(t)))))))))[0]:i=j(t,W(t,Z(t,U(t,_(t,T(t))))))[0];if(i==null)debugger;return i}const de={class:"grid"},ce=["open"],pe={class:"grid"},ve=["disabled"],be=["disabled"],ke=["disabled"],ge=["disabled"],ye=["disabled"],we=["disabled"],Ce=["disabled"],Me={style:{"text-align":"right"}},De={style:{float:"right"}},xe={style:{float:"right"}},Se={class:"grid"},Te={class:"grid"},je={class:"grid"},Fe={style:{width:"100%"}},Ae={colspan:"6"},Ee={colspan:"3"},Re={colspan:"3"},Ve={colspan:"3"},$e={colspan:"3"},Ie={__name:"Stage",setup(t){const e=D(!1),r=D(!1),i=D([]),n=D(!1),l=D({sp:"",effects:{},jewelryCountTargetMin:0,jewelryCountTargetMax:20,cardTimes:360,skipTimes:36}),u=D(10),p=O.map(g=>new y(g.short)),k=D(O.filter(g=>typeof g.member=="number").map(g=>new y(g.short)).slice(0,16)),m=D(),v=()=>{m.value=new re([]),m.value.sp=l.value.sp,m.value.effects=l.value.effects,m.value.yama=k.value.map(g=>new y(g.short))};v();const d=()=>{e.value=!1,v()},F=async g=>{var a;if(n.value=!1,e.value=!0,r.value=g,g){i.value.push({deck:k.value.map(o=>o.short).join(", "),formData:{...l.value,effects:{...l.value.effects}},dict:{}});for(let o=Number(l.value.jewelryCountTargetMin);o<=Number(l.value.jewelryCountTargetMax)&&e.value;o++){let C=0,b=0,V=0,$=0;for(let K=0;K<Number(l.value.skipTimes);K++){await le(),v(),m.value.start();for(let I=0;I<Number(l.value.cardTimes)&&e.value;I++)m.value.useCard(ee(m.value,o,m.value.sp=="mg2"?"score":"cost"));if(!e.value)break;C+=m.value.score,b+=(a=m.value.getAllCards().filter(I=>I.member=="jewelry"))==null?void 0:a.length,V+=m.value.timesDict.kol慈,$+=m.value.timesDict["💎"]}if(i.value.at(-1).dict[o]={score:Number((C/l.value.skipTimes).toFixed(2)),jewelryCount:Number((b/l.value.skipTimes).toFixed(2)),kt:Number((V/l.value.skipTimes).toFixed(2)),jt:Number(($/l.value.skipTimes).toFixed(2))},!e.value)break}e.value=!1}else v(),m.value.start(),B()},le=async g=>new Promise(a=>setTimeout(a,g)),z=D(-1),B=()=>{z.value=ee(m.value,u.value,m.value.sp=="mg2"?"score":"cost")};return(g,a)=>(h(),c("div",null,[!e.value||r.value?(h(),c(M,{key:0},[a[11]||(a[11]=s("h2",null,"DECK",-1)),a[12]||(a[12]=s("hr",null,null,-1)),s("div",de,[(h(!0),c(M,null,x(k.value,(o,C)=>(h(),A(E,{card:o,close:!0,onClick:b=>k.value.splice(C,1),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))]),s("details",{open:n.value},[a[10]||(a[10]=s("summary",null,[w(" CARD "),s("hr")],-1)),s("div",pe,[(h(!0),c(M,null,x(Y(p),(o,C)=>(h(),A(E,{card:o,onClick:b=>k.value.push(new(Y(y))(o.short)),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))])],8,ce)],64)):R("",!0),s("form",null,[a[21]||(a[21]=s("h2",null,"STAGE",-1)),a[22]||(a[22]=s("hr",null,null,-1)),s("div",null,[a[14]||(a[14]=s("label",{for:"sp"},"SP: ",-1)),S(s("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>l.value.sp=o),disabled:e.value,id:"sp"},a[13]||(a[13]=[s("option",{value:""},"--",-1),s("option",{value:"td"},"舞会缀",-1),s("option",{value:"sy"},"舞会沙耶",-1),s("option",{value:"mg2"},"银河慈",-1)]),8,ve),[[ie,l.value.sp]])]),s("div",null,[S(s("input",{"onUpdate:modelValue":a[1]||(a[1]=o=>l.value.effects.a=o),disabled:e.value,type:"checkbox",id:"104-3-3-1-a"},null,8,be),[[G,l.value.effects.a]]),a[15]||(a[15]=s("label",{for:"104-3-3-1-a"}," 山札切 main效果reshuffle效果deck全card消费AP+1 ",-1))]),s("div",null,[S(s("input",{"onUpdate:modelValue":a[2]||(a[2]=o=>l.value.effects.b=o),disabled:e.value,type:"checkbox",id:"104-3-3-1-b"},null,8,ke),[[G,l.value.effects.b]]),a[16]||(a[16]=s("label",{for:"104-3-3-1-b"}," skill5回使用 手札全捨 山札手札上限引直 ",-1))]),s("div",null,[a[17]||(a[17]=s("label",{for:"jewelry"},"TARGET JEWELRY: ",-1)),S(s("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>l.value.jewelryCountTargetMin=o),disabled:e.value,type:"number",id:"jewelry"},null,8,ge),[[P,l.value.jewelryCountTargetMin]]),a[18]||(a[18]=w(" ~ ")),S(s("input",{"onUpdate:modelValue":a[4]||(a[4]=o=>l.value.jewelryCountTargetMax=o),disabled:e.value,type:"number",id:"jewelry"},null,8,ye),[[P,l.value.jewelryCountTargetMax]])]),s("div",null,[a[19]||(a[19]=s("label",{for:"card-time"},"CARD回数: ",-1)),S(s("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>l.value.cardTimes=o),disabled:e.value,type:"number",id:"card-time"},null,8,we),[[P,l.value.cardTimes]])]),s("div",null,[a[20]||(a[20]=s("label",{for:"skip-time"},"SKIP回数: ",-1)),S(s("input",{"onUpdate:modelValue":a[6]||(a[6]=o=>l.value.skipTimes=o),disabled:e.value,type:"number",id:"skip-time"},null,8,Ce),[[P,l.value.skipTimes]])])]),s("div",Me,[e.value?(h(),c("button",{key:0,onClick:d},"RETIRE")):(h(),c(M,{key:1},[i.value.length?(h(),c("button",{key:0,onClick:a[7]||(a[7]=o=>i.value=[])}," CLEAR RESULTS ")):R("",!0),s("button",{onClick:a[8]||(a[8]=o=>F(!0))},"SKIP"),s("button",{onClick:a[9]||(a[9]=o=>F(!1))},"LIVE START")],64))]),e.value&&!r.value?(h(),c(M,{key:1},[s("h2",null,[w(f(m.value.score)+" ",1),s("div",De,f(m.value.timesCount)+"回",1)]),s("h2",null,[w(f(m.value.mental?"100%":"-%")+" ",1),s("div",xe,f(m.value.ignition?"🔥":"🚫"),1)]),s("h2",null,"手札 "+f(m.value.te.length),1),a[23]||(a[23]=s("hr",null,null,-1)),s("div",Se,[(h(!0),c(M,null,x(m.value.te,(o,C)=>(h(),A(E,{card:o,stage:m.value,te:!0,class:ae({highlight:z.value==C}),onClick:b=>{m.value.useCard(C),B()}},null,8,["card","stage","class","onClick"]))),256))]),s("h2",null,"捨札 "+f(m.value.sute.length),1),a[24]||(a[24]=s("hr",null,null,-1)),s("div",Te,[(h(!0),c(M,null,x(m.value.sute,(o,C)=>(h(),A(E,{card:o,stage:m.value,"pointer-events":"none"},null,8,["card","stage"]))),256))]),s("h2",null,"山札 "+f(m.value.yama.length),1),a[25]||(a[25]=s("hr",null,null,-1)),s("div",je,[(h(!0),c(M,null,x(m.value.yama,(o,C)=>(h(),A(E,{card:o,stage:m.value,"pointer-events":"none"},null,8,["card","stage"]))),256))])],64)):(h(!0),c(M,{key:2},x(i.value,(o,C)=>(h(),c("table",Fe,[s("thead",null,[s("tr",null,[s("td",Ae,f(o.deck),1)]),s("tr",null,[s("td",Ee,"SP: "+f(o.formData.sp),1),s("td",Re," 效果: "+f(Object.keys(o.formData.effects).filter(b=>o.formData.effects[b]).map(b=>b).join(", ")),1)]),s("tr",null,[s("td",Ve,"CARD回数: "+f(o.formData.cardTimes),1),s("td",$e,"SKIP回数: "+f(o.formData.skipTimes),1)]),a[26]||(a[26]=s("tr",null,[s("td",null,[w("target"),s("br"),w("💎")]),s("td",null,[w("actual"),s("br"),w("💎")]),s("td",null,[w("kol慈"),s("br"),w("回数")]),s("td",null,[w("💎"),s("br"),w("回数")]),s("td",null,"pt"),s("td",null,"%")],-1))]),s("tbody",null,[(h(!0),c(M,null,x(o.dict,(b,V)=>(h(),c("tr",null,[s("td",null,f(V),1),s("td",null,f(b.jewelryCount),1),s("td",null,f(b.kt),1),s("td",null,f(b.jt),1),s("td",null,f(b.score),1),s("td",null,f(Number((b.score/Math.max(...Object.values(o.dict).map($=>$.score))*100).toFixed(2))),1)]))),256))])]))),256))]))}},Pe=te(Ie,[["__scopeId","data-v-4500871f"]]);export{Pe as default};
