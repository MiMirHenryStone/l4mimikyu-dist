import{_ as ee,o as v,c as C,a as i,n as q,t as c,e as z,f as F,F as T,d as w,g as L,u as B,h as M,v as I,i as Y,j as J,k as Q,l as O,m as re}from"./index--0Cdn17K.js";class P{constructor(e){this.short=e,this.props={short:e};let t=G.find(a=>a.short==e);if(t){this.props=t,this.member=t.member;let a=le.find(s=>s.member==t.member);a&&(this.year=a.year,this.unit=a.unit),this.cost=t.cost,this.costDelta=0,this.teCostDelta=0}}copy(){let e=new P(this.short);return e.cost=this.cost,e.costDelta=this.costDelta,e.teCostDelta=this.teCostDelta,e}getMain(e){var t;return(t=this.props)!=null&&t.main?typeof this.props.main=="function"?this.props.main(e):this.props.main:""}getCost(e){var a,s,m,u;let t=this.cost;return t+=this.costDelta,e&&((a=this.props)!=null&&a.teCostDelta)&&(t+=(s=this.props)==null?void 0:s.teCostDelta(e)),e&&(t+=this.teCostDelta),(m=this.props)!=null&&m.spCostDelta&&(t+=(u=this.props)==null?void 0:u.spCostDelta(e)),t>=1?t:1}getCalcCost(e){let t=this.getSkill(e),s=this.getCost(e.te);return s-=(t==null?void 0:t.ap)??0,s-=(t==null?void 0:t.spAp)??0,s<1&&(s=1),s}isReshuffle(e){var t;return(t=this.props)!=null&&t.reshuffle?typeof this.props.reshuffle=="function"?this.props.reshuffle(e):this.props.reshuffle:!1}getSkill(e){var t;if((t=this.props)!=null&&t.skill)return typeof this.props.skill=="function"?this.props.skill(e):this.props.skill}onSkill(e){e.trigger(this.getSkill(e))}afterSkill(e){var t;(t=this.props)!=null&&t.afterSkill&&this.props.afterSkill(e,this)}onDraw(e){var t;this.teCostDelta=0,(t=this.props)!=null&&t.draw&&(typeof this.props.draw=="function"?e.trigger(this.props.draw(e,this)):e.trigger(this.props.draw))}calcDrawHeartCount(e){var u,o,f,g,y,p,h,d,x,$,V,k;let t=0,a;(u=this.props)!=null&&u.draw&&(typeof((o=this.props)==null?void 0:o.draw)=="function"?a=(f=this.props)==null?void 0:f.draw(e):a=(g=this.props)==null?void 0:g.draw),t+=((y=a==null?void 0:a.heart)==null?void 0:y.length)||0,e.sp=="tz"&&(t+=((p=a==null?void 0:a.voltage)==null?void 0:p.length)||0),e.sp=="mg2"&&(t+=(((h=a==null?void 0:a.mental)==null?void 0:h.length)||0)+(((d=a==null?void 0:a.protect)==null?void 0:d.length)||0));let s=0,m=this.getSkill(e);if((m==null?void 0:m.ap)<0){s+=((x=m.heart)==null?void 0:x.length)||0,e.sp=="tz"&&(s+=(($=m==null?void 0:m.voltage)==null?void 0:$.length)||0),e.sp=="mg2"&&(s+=(((V=m==null?void 0:m.mental)==null?void 0:V.length)||0)+(((k=m==null?void 0:m.protect)==null?void 0:k.length)||0));let H=e.getAllCards().length/e.teMax;t+=s*H/(H+e.scoreCardCount)}return t}onCross(e,t){var a;(a=this.props)!=null&&a.cross&&this.props.cross(e,t,this)}matchAttrs(e){return Object.keys(e).every(t=>e[t]==null?!0:e[t]==this[t])}calcSubtractAp(e){let t=0;if(e!=null&&e.length)for(let a of e)this.matchAttrs({...a,cost:void 0})&&(t+=a.cost);return t}}const le=[{member:3,short:"kz",year:102,unit:"srb"},{member:4,short:"tz",year:102,unit:"drk"},{member:6,short:"mg",year:102,unit:"mrp"},{member:1,short:"kh",year:103,unit:"srb"},{member:2,short:"sy",year:103,unit:"drk"},{member:5,short:"rr",year:103,unit:"mrp"},{member:7,short:"gn",year:104,unit:"srb"},{member:8,short:"sz",year:104,unit:"drk"},{member:9,short:"hm",year:104,unit:"mrp"}],G=[{short:"圣夜吟",member:7,cost:8,main:"dress",reshuffle:!0,skill:{cards:["圣夜👗","圣夜👗","圣夜👗","圣夜👗","圣夜👗"]}},{short:"圣夜👗",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill:{mental:[{}],voltage:[{}]}},{short:"pa吟",member:7,cost:4,main:"dress",skill:{cards:["pa👗","pa👗"]}},{short:"pa👗",member:"dress",cost:2,main:"ap",once:!0},{short:"lttf铃",member:8,cost:9,main:"voltage",skill:{voltage:[{over:!0,spAp:6}],mental:[{minus:!0}]},drawFilters:[{member:9}]},{short:"上升姬芽",member:9,cost:3,main(r){return r!=null&&r.ignition?"reshuffle":"mental"},reshuffle:r=>r==null?void 0:r.ignition,skill(r){let e={mental:[{}],protect:[{}]};return r.ignition&&(e["ap-"]=[{unit:"mrp",cost:-3}]),e},ignitionTimes:3,cross(r,e){let t=e.getMain(r);r.ignition||(t=="mental"||t=="protect")&&r.trigger({ignition:1})}},{short:"pa姬芽",member:9,cost:4,main:"reshuffle",reshuffle:!0,skill:{protect:[{}]}},{short:"织姬花帆",member:1,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]}},{short:"音击花帆",member:1,cost:9,main:"heart",reshuffle:!0,yamaReshuffle:!0,skill:{heart:[{},{},{}]},draw:{heart:[{}],mental:[{}]}},{short:"lttf沙耶",member:2,cost:5,main:"voltage",skill:{voltage:[{spAp:3}]},drawFilters:[{member:6}]},{short:"沏茶瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:[{}]},draw:{heart:[{}]}},{short:"蛋糕瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]},draw:{heart:[{}]}},{short:"花结梢",member:3,cost:13,main:"reshuffle",reshuffle:!0,drawFilters:[{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"},{unit:"srb"},{member:"dress"}],skill:{"ap-":[{unit:"srb",cost:-3},{member:"dress",cost:-3}]},cross(r,e,t){e.unit=="srb"&&(r.trigger({heart:[{}]}),t.teCostDelta-=3)}},{short:"kol梢",member:3,cost:9,main:"mental",skill:{mental:[{spAp:5}],heart:[{}]},draw:{"ap-":[{member:6,cost:-9}]},cross(r,e){e.member==6&&r.trigger({protect:[{}],heart:[{}]})}},{short:"自由缀",member:4,cost:2,main:"mental",skill:{mental:[{spAp:6}],heart:[{}]},draw(r){let e={};return r.mental&&(e={heart:[{}]}),e}},{short:"kol缀",member:4,cost:3,main:"voltage",skill:{voltage:[{}],heart:[{}]},draw:{"ap-":[{member:3,cost:-3},{member:6,cost:-3}]},cross(r,e){e.member==6&&r.trigger({voltage:[{}],heart:[{}]})}},{short:"af慈",member:6,cost:9,main:"protect",skill:{ap:-1/0,protect:[{spAp:17}],heart:[{over:!0},{},{},{},{},{},{},{},{}]}},{short:"kol慈",member:6,cost:39,main:"heart",skill:{heart:[{over:!0}],cards:["💎"]},cross(r,e,t){(e.member==1||e.member==2||e.member==3||e.member==4||e.member==5||e.member==7||e.member==8||e.member==9)&&(t.teCostDelta-=3)}},{short:"💎",member:"jewelry",cost:1,main:"ap-",once:!0,skill:{"ap-":[{cost:-1}]},draw:{heart:[{}],voltage:[{}],protect:[{}]}},{short:"舞会缀",member:4,cost:2,main:"voltage",skill:{voltage:[{spAp:5}]}},{short:"舞会沙耶",member:2,cost:2,main:"love+"},{short:"银河缀",member:4,cost:2,main:"voltage",skill:{voltage:[{spAp:6}],heart:[{}]}},{short:"银河慈",member:6,cost:5,main:"reshuffle",reshuffle:!0,skill:{mental:[{over:!0,spAp:21}],protect:[{spAp:10}]}},{short:"讴歌梢",member:3,cost:3,main:"love+",draw:{heart:[{}]}},{short:"ritm梢",member:3,cost:2,main:"voltage",skill:{voltage:[{spAp:3}]},draw:{mental:[{}]}},{short:"秋色梢",member:3,cost:6,main:"love+",draw:{mental:[{}]}},{short:"自由梢",member:3,cost:2,main:"protect",skill:{protect:[{spAp:4}]},draw(r){let e={};return r.mental&&(e={protect:[{spAp:6}]}),e}},{short:"教师梢",member:3,cost:2,main:"heart",skill:{heart:[{}],mental:-1},draw:{mental:[{}]}},{short:"蓝远梢",member:3,cost:3,main:"dress",skill:{cards:["蓝远梢👗"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"蓝远梢👗",member:"dress",cost:3,main:"love+",once:!0},{short:"水母梢",member:3,cost:5,main:"love+",draw:{cards:["⚪"]}},{short:"⚪",member:"bubble",cost:1,main:"ap-",once:!0,skill:{"ap-":[{unit:"srb",cost:-3},{member:"dress",cost:-3}]}},{short:"af梢",member:3,cost:0,spCostDelta(r){var e;return((e=r==null?void 0:r.filter(t=>{var a;return!((a=t.props)!=null&&a.spCostDelta)}))==null?void 0:e.reduce((t,a)=>t+a.getCost(r,!1),0))||0},main:"ensemble",reshuffle:!0,drawnFilter:!0,skill:{ap:-1/0,ensemble:!0,heart:[{},{},{},{},{},{},{},{},{}]}},{short:"ss缀",member:4,cost:3,main:"heart",skill:{heart:[{}]},draw:{voltage:[{}]}},{short:"雨伞缀",member:4,cost:5,main:"love+",draw:{heart:[{}]}},{short:"花火缀",member:4,cost:3,main:"voltage",skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"秋色缀",member:4,cost:6,main:"heart",skill(r){let e={};return r.mental?e={heart:[{},{},{}]}:e={heart:[{},{}]},e},draw:{mental:[{}]}},{short:"抱花缀",member:4,cost:4,main:"voltage",skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"音击缀",member:4,cost:9,main:"voltage",skill:{voltage:[{}],heart:[{},{},{}]},draw:{voltage:[{}],protect:[{}]}},{short:"af缀",member:4,cost:9,main:"voltage",skill:{ap:-1/0,voltage:[{over:!0,spAp:22}],heart:[{over:!0},{},{},{},{},{},{},{},{}]}},{short:"蛋糕慈",member:6,cost:4,main:"mental",skill:{mental:[{}]},draw:{mental:[{}],protect:[{}]}},{short:"舞会慈",member:6,cost:3,main:"love+",yamaUse:!0,skill:{mental:-1},draw:{mental:[{}]}},{short:"圣诞慈",member:6,cost:4,main:"mental",skill:{mental:[{},{},{}]},draw:{mental:[{}]}},{short:"抱花慈",member:6,cost:4,main:"protect",skill:{protect:[{}]},draw:{protect:[{}]}},{short:"hsct慈",member:6,cost:4,main:"reshuffle",reshuffle:!0},{short:"ritm花帆",member:1,cost:1,main:"heart",skill:{heart:[{}]},draw:{mental:[{}]}},{short:"讴歌花帆",member:1,cost:3,main:"mental",skill:{mental:[{}]},draw:{voltage:[{}]}},{short:"雨伞花帆",member:1,cost:3,main:"voltage",skill:{voltage:[{}]},draw:{mental:[{}]}},{short:"自由花帆",member:1,cost:2,main:"voltage",skill:{voltage:[{spAp:3}],heart:[{}]},draw(r){let e={};return r.mental&&(e={voltage:[{spAp:2}]}),e}},{short:"舞会花帆",member:1,cost:6,main:"heart",skill:{heart:[{}]}},{short:"偶活花帆",member:1,cost:9,main:"heart",reshuffle:!0,skill:{heart:[{}]},cross(r,e,t){(e.member==2||e.member==5)&&(t.teCostDelta-=2)}},{short:"快乐花帆",member:1,cost:2,main:"mental",skill:{mental:[{}],voltage:[{}]},draw:{mental:[{}],heart:[{}]}},{short:"蓝远花帆",member:1,cost:3,main:"dress",skill:{cards:["蓝远花帆👗"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"蓝远花帆👗",member:"dress",cost:3,main:"heart",once:!0,skill:{heart:[{}]}},{short:"雨伞沙耶",member:2,cost:4,main:"mental",skill:{mental:[{}]},draw:{voltage:[{}]}},{short:"tc沙耶",member:2,cost:3,main:"love+",skill:{mental:-1},draw:{voltage:[{}]}},{short:"宇宙沙耶",member:2,cost:4,main:"teMax",skill:{voltage:[{}]}},{short:"沏茶沙耶",member:2,cost:2,main:"love+",skill:{voltage:[{}]}},{short:"圣诞沙耶",member:2,cost:4,main:"voltage",skill:{voltage:[{}],heart:[{},{}]},draw:{voltage:[{}]}},{short:"db瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{voltage:[{}]},draw:{voltage:[{}]}},{short:"梦境瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]}},{short:"rod瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]},draw:{mental:[{}]}},{short:"一专瑠璃",member:5,cost:5,main:"reshuffle",reshuffle:!0,skill:{heart:[{}]}},{short:"abdl瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill:{mental:[{}]}},{short:"白昼瑠璃",member:5,cost:3,main:"reshuffle",reshuffle:!0,skill:{mental:-1},draw:{heart:[{}]}},{short:"mc瑠璃",member:5,cost:4,main:"reshuffle",reshuffle:!0,skill(r){let e;return r.ignition?e={heart:[{}]}:e={ap:1},e}},{short:"ritm吟",member:7,cost:5,main:"dress",skill:{cards:["ritm👗1","ritm👗2","ritm👗3"]},draw:{protect:[{}]}},{short:"ritm👗1",member:"dress",cost:1,main:"heart",once:!0,skill:{heart:[{}]}},{short:"ritm👗2",member:"dress",cost:1,main:"voltage",once:!0,skill:{voltage:[{}]}},{short:"ritm👗3",member:"dress",cost:1,main:"teMax",once:!0},{short:"蓝远吟",member:7,cost:3,main:"dress",skill:{cards:["蓝远👗","蓝远👗","蓝远👗"]},cross(r,e){e.unit=="srb"&&r.trigger({voltage:[{}]})}},{short:"蓝远👗",member:"dress",cost:2,main:"reshuffle",reshuffle:!0,once:!0,skill:{heart:[{}]}},{short:"花结吟",member:7,cost:13,teCostDelta(r){let e=0;for(let t of r)t.unit=="srb"&&(e-=3);return e},main:"dress",reshuffle:!0,skill:{cards:["花结👗1","花结👗1","花结👗1","花结👗2","花结👗2","花结👗2","花结👖3","花结👖3","花结👖3"]},drawFilters:[{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"},{member:"dress"}]},{short:"花结👗1",member:"dress",cost:3,main:"voltage",once:!0,skill(r){let e={voltage:[{over:!0,spAp:9}]};return r.getAllCards().length>=33&&(e.heart=[{over:!0}]),e}},{short:"花结👗2",member:"dress",cost:3,main:"protect",once:!0,skill(r){let e={protect:[{spAp:8}]};return r.getAllCards().length>=33&&(e.heart=[{over:!0}]),e}},{short:"花结👖3",member:"dress",cost:3,main:"reshuffle",reshuffle:!0,once:!0,skill(r){return r.getAllCards().length>=30?{heart:[{over:!0}]}:res},drawFilters:[{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"},{unit:"srb"}]},{short:"db铃",member:8,cost:5,main:"heart",skill:{heart:[{}]},afterSkill(r,e){e.costDelta--}},{short:"雪纺铃",member:8,cost:3,main:"mental",skill:{mental:[{}]}}];let te=class se{constructor(e){this.score=0,this.te=[],this.sute=[],this.yama=e,this.mental=!0,this.protect=!1,this.apMax=20,this.ignition=!1,this.ignitionTimesDict={},this.cardTimesDict={apSkip:0},this.ignitionChangeQueue=[],this.drawFilterStack=[],this.timesCount=0,this.cardsCount=0,this.sp="",this.effect="",this.teMax=8,this.ap=0,this.apSpeed=2.5,this.drawHeartCount=0,this.jewelryCountTarget=0,this.hasCostEffect=!1,this.testResults=[],this.hasIgnitionAndScoreCard=!1,this.hasEnsemble=!1,this.scoreCardCount=0}getAllCards(){return[...this.te,...this.sute,...this.yama]}getDrawYama(){return this.yama.length?this.yama:this.sute}start(){this.ap=this.apSpeed,this.hasIgnitionAndScoreCard=this.getAllCards().filter(e=>{var t,a,s;return(((t=e.props)==null?void 0:t.main)=="mental"||((a=e.props)==null?void 0:a.main)=="protect")&&(e.isReshuffle(this)||((s=e.getSkill(this))==null?void 0:s.ap)<0)}).length>0,this.hasEnsemble=this.getAllCards().filter(e=>{var t;return((t=e.props)==null?void 0:t.main)=="ensemble"}).length>0,this.scoreCardCount=this.getAllCards().filter(e=>{var t;return((t=e.getSkill(this))==null?void 0:t.ap)<0}).length,this.sp=="kz2"&&(this.ap=1/0);for(let e=0;e<this.teMax;e++){let t=Math.floor(Math.random()*this.yama.length),a=this.yama.splice(t,1)[0];this.te.push(a)}this.hasCostEffect=["st1a"].includes(this.effect),this.testAllCards()}draw(e){this.yama.length||(this.yama=[...this.sute],this.sute=[],this.effect=="kj1a"&&(this.addAp(3),this.yama.forEach(u=>{u.getMain(this)=="reshuffle"&&u.cost++})));let t,a=this.drawFilterStack.pop();a?(t=this.yama.filter(u=>u.matchAttrs(a)),t.length||(t=this.yama)):t=this.yama.filter(u=>{var o;return(o=u.props)==null?void 0:o.drawnFilter}),t.length||(t=this.yama);let s=Math.floor(Math.random()*t.length),m=t[s];this.yama.splice(this.yama.indexOf(m),1),this.te[e]=m,m.onDraw(this)}autoAp(){this.sp!="kz2"&&this.addAp(this.apSpeed)}useCard(e,t=!1){var m,u,o,f,g,y,p;if(e==null){this.cardTimesDict.apSkip++,this.autoAp(),this.timesCount++;return}this.usingCard={heart:!1};let a=[...this.te],s=a[e];(m=s.props)!=null&&m.drawFilters&&this.drawFilterStack.push(...(u=s.props)==null?void 0:u.drawFilters),this.cardTimesDict[s.short]||(this.cardTimesDict[s.short]=0),this.cardTimesDict[s.short]++,this.sp!="kz2"&&this.addAp(-s.getCost(a)),s.cost=s.props.cost,s.onSkill(this),this.sp=="sy"&&this.trigger({heart:[{}]}),this.ignition&&((o=s.props)!=null&&o.ignitionTimes)&&(this.ignitionTimesDict[s.short]==null&&(this.ignitionTimesDict[s.short]=0),this.ignitionTimesDict[s.short]++,this.ignitionTimesDict[s.short]>=((f=s.props)==null?void 0:f.ignitionTimes)&&(this.trigger({ignition:0}),this.ignitionTimesDict[s.short]=0));for(let h of a)h.onCross(this,s);if(s.afterSkill(this),(g=s.props)!=null&&g.yamaUse&&(s.toYama=!0),(y=s.props)!=null&&y.yamaReshuffle&&this.getAllCards().forEach(h=>{h!=s&&(h.toYama=!0)}),(p=s.props)!=null&&p.once&&(s.toOut=!0),!t){if(s.isReshuffle(this)){for(let h in a)h!=e&&this.sute.push(a[h]);this.yama.push(...this.sute.filter(h=>h.toYama&&!h.toOut)),this.sute=this.sute.filter(h=>!h.toYama&&!h.toOut);for(let h=0;h<this.teMax;h++)this.draw(h)}else this.draw(e);this.usingCard=!1;for(let h=0;h<this.ignitionChangeQueue.length;h++)this.trigger({ignition:this.ignitionChangeQueue.shift()});s.toOut||(s.toYama?this.yama.push(s):this.sute.push(s)),this.getAllCards().forEach(h=>h.toYama=!1)}if(this.timesCount++,this.cardsCount++,this.effect=="gc1a"&&this.cardsCount%30==0)this.getAllCards().forEach(h=>{h.getMain()=="mental"&&h.costDelta--});else if(this.effect=="gc1b"&&this.cardsCount%15==0)this.getAllCards().forEach(h=>{h.unit=="srb"&&h.costDelta--});else if(this.effect=="gc1c"&&this.cardsCount%20==0)this.getAllCards().forEach(h=>{h.unit=="drk"&&h.costDelta--});else if(this.effect=="kj1b"&&this.cardsCount%5==0){this.sute.push(...this.te.splice(0));for(let h=0;h<this.teMax;h++)this.draw(h)}else this.effect=="st1a"&&this.cardsCount%6==0&&this.getAllCards().forEach(h=>h.cost++);!this.protect&&this.sp!="mg2"&&(this.mental=!1),t||(this.autoAp(),this.testAllCards())}calcTestDrawHeartCount(){let e=0,t=this.getAllCards(),a=t.filter(s=>s.short=="💎").length;if(a<this.jewelryCountTarget)for(let s=0;s<this.jewelryCountTarget-a;s++)t.push(new P("💎"));return t.forEach(s=>{e+=s.calcDrawHeartCount(this)}),this.drawHeartCount=e,e}calcNextDrawHeartCount(e){var o;let t=0,a=0,s=[],m=[],u=this.getAllCards();return s=(o=e.props)!=null&&o.yamaReshuffle?u.filter(f=>f!=e):this.yama,s.forEach(f=>{t+=f.calcDrawHeartCount(this)}),s.length<this.teMax?(m=[...this.sute,...this.te.filter(f=>f!=e)],m.forEach(f=>a+=f.calcDrawHeartCount(this)),(t+a/m.length*(this.teMax-s.length))/u.length*Math.min(u.length,this.teMax*2)+this.drawHeartCount*this.teMax/u.length*Math.max(0,u.length-this.teMax*2)/u.length):t/s.length*this.teMax/u.length*Math.min(u.length,this.teMax*2)+this.drawHeartCount*this.teMax/u.length*Math.max(0,u.length-this.teMax*2)/u.length}testCard(e,t){var d,x,$,V;let a=t?t.short:this.te[e].short;if(a=="kol慈")return .01;if(a=="💎")return 0;if(["ritm吟","蓝远梢","蓝远花帆","pa吟","花结吟"].includes(a))return-.01;let s=new se([]);s.usingCard={heart:!1};for(let k of this.te)s.te.push(k.copy());for(let k of this.sute)s.sute.push(k.copy());for(let k of this.yama)s.yama.push(k.copy());s.mental=this.mental,s.protect=this.protect,s.ap=this.ap,s.apMax=this.apMax,s.apSpeed=this.apSpeed,s.ignition=this.ignition,s.ignitionTimesDict={...this.ignitionTimesDict},s.sp=this.sp,s.jewelryCountTarget=this.jewelryCountTarget,s.scoreCardCount=this.scoreCardCount;let m=s.getAllCards().length,u,o;if(t&&(u=s.te[e].getCost(s.te),s.te[e]=t,o=s.te[e].getCost(s.te),(s.sp=="mg2"||s.sp=="tz2"||s.sp=="kz2")&&(u=1,o=1),o>s.apMax))return 0;let f=s.te[e],g=f.getSkill(s);g&&(g={...g,ensemble:!1});let y=f.isReshuffle(s);f.onSkill(s);for(let k of s.te)k.onCross(s,f);s.calcTestDrawHeartCount();let p=s.score,h=s.getAllCards().length;if(y&&(p+=s.calcNextDrawHeartCount(f)),((x=(d=f.props)==null?void 0:d.drawFilters)==null?void 0:x.length)==1&&!t){let k=($=f.props)==null?void 0:$.drawFilters[0],H=s.getDrawYama().filter(j=>Object.keys(k).every(b=>j[b]==k[b]));H.forEach(j=>{let b=[...s.te];b[e]=j,j.getCost(b)>=s.ap-f.getCost(s.te)+s.apSpeed&&(p+=s.testCard(e,j)/H.length)})}return(V=f.props)!=null&&V.once&&(p+=((s.drawHeartCount-f.calcDrawHeartCount(s))/(m-1)-s.drawHeartCount/m)*Math.min(this.hasEnsemble?h/s.teMax:1/0,y?s.teMax:s.teMax**3)),p+=(s.drawHeartCount/h-s.drawHeartCount/m)*Math.min(this.hasEnsemble?h/s.teMax:1/0,s.teMax),h>m&&(p/=(h-m)/(this.hasEnsemble?h/s.teMax:1)+1),(g==null?void 0:g.ap)<=-s.apMax&&!y&&(p/=Math.ceil(Math.min(...this.te.filter(k=>k!=f&&k.member!="jewelry").map(k=>k.getCost(this.te)))/s.apSpeed)),f.short=="上升姬芽"&&(this.hasIgnitionAndScoreCard||(p*=3/4),this.hasCostEffect&&(p*=f.getCost(s.te))),t&&(p/=Math.max(2,(u+o)/u)),p<0?0:p}testAllCards(){this.testResults=this.te.map((e,t)=>this.testCard(t))}trigger(e){if(e)for(let t in e){let a=e[t];t=="ap"&&this.addAp(a),t=="heart"&&this.addHeart(a),t=="voltage"&&this.addVoltage(a),t=="mental"&&this.addMental(a),t=="protect"&&this.addProtect(a),t=="ap-"&&this.subtractAp(a),t=="cards"&&this.addCard(a),t=="ensemble"&&this.ensemble(a),t=="ignition"&&this.changeIgnition(a),t=="spAp"&&this.addAp(a)}}addHeart(e){if(e!=null&&e.length){if(!this.usingCard)debugger;!this.usingCard.heart&&e[0].over&&this.score++,this.score+=e.length,this.usingCard.heart=!0}}addVoltage(e){e!=null&&e.length&&(this.sp=="tz"&&this.addHeart(e),this.sp=="tz2"&&e.forEach(t=>this.addAp(t.spAp??1)))}addMental(e){e!=null&&e.length&&e.forEach(t=>{!t.minus&&this.sp=="mg2"&&(this.addHeart([t]),this.addAp(t.spAp??1)),t.minus&&this.sp!="mg2"?this.mental=!1:this.mental=!0})}addProtect(e){e!=null&&e.length&&(this.sp=="mg2"&&(this.addHeart(e),e.forEach(t=>this.addAp(t.spAp??2))),this.protect=!0)}subtractAp(e){if(e!=null&&e.length)for(let t of this.getAllCards())t.cost+=t.calcSubtractAp(e)}addCard(e){if(e!=null&&e.length)for(let t of e)this.yama.push(new P(t))}addAp(e){if(e){let t=this.ap+e;t>this.apMax&&(t=this.apMax),t<0&&(t=0),this.ap=Number(t.toFixed(2))}}changeIgnition(e){e!=null&&(this.usingCard?this.ignitionChangeQueue.push(e):e==1?this.ignition=!0:e==0?this.ignition=!1:e==-1&&(this.ignition=!this.ignition))}ensemble(e){e&&this.te.forEach((t,a)=>{var s;(s=t.getSkill(this))!=null&&s.ensemble||this.useCard(a,this.te)})}};const ie={class:"cost"},ae={key:0,class:"close"},oe={key:1,class:"test"},ne={key:2,class:"time"},ue={__name:"Card",props:{card:{type:P},stage:{type:te},te:{default:!1},close:{default:!1},pointerEvents:{default:"auto"}},setup(r){const e=r,t={heart:"rgb(204,39,39)","love+":"rgb(174,141,24)",voltage:"rgb(174,141,24)",mental:"rgb(48,124,24)",reshuffle:"rgb(134,82,195)",teMax:"rgb(134,82,195)",protect:"rgb(48,124,24)",dress:"rgb(134,82,195)",ap:"rgb(174,141,24)","ap-":"rgb(134,82,195)",ensemble:"black","":"transparent"},a={1:"#f8b500",2:"#5383c3",3:"#68be8d",4:"#ba2636",5:"#e7609e",6:"#c8c2c6",7:"#a2d7dd",8:"#fad764",9:"#9d8de2",bubble:"#555555",jewelry:"#555555"};return(s,m)=>{var u,o,f,g;return v(),C("div",{class:"card",style:q({pointerEvents:r.te&&e.card.getCost(r.te?e.stage.te:void 0)>e.stage.ap?"none":e.pointerEvents})},[i("div",{class:"background",style:q({backgroundColor:a[e.card.member]?`${a[e.card.member]}`:"transparent"})},null,4),i("div",{style:q({fontWeight:e.card.isReshuffle(e.stage)?"bold":"",fontStyle:e.card.isReshuffle(e.stage)?"italic":""})},c(e.card.short),5),i("div",ie,c(e.card.getCost(r.te?e.stage.te:void 0)),1),i("div",{class:"main",style:q({backgroundColor:t[e.card.getMain(e.stage)]})},null,4),e.close?(v(),C("div",ae,"×")):z("",!0),e.te?(v(),C("div",oe,c(Number(e.stage.testResults[e.stage.te.indexOf(e.card)].toFixed(2))),1)):z("",!0),(u=e.stage)!=null&&u.ignition&&((f=(o=e.card)==null?void 0:o.props)!=null&&f.ignitionTimes)?(v(),C("div",ne,c(((g=e.stage)==null?void 0:g.ignitionTimesDict[e.card.short])??0),1)):z("",!0)],4)}}},R=ee(ue,[["__scopeId","data-v-41d7c9d5"]]);function U(r,e){let t=[];for(let a=0;a<r.te.length;a++)r.te[a].getCost(r.te)<=r.ap+(e?r.apSpeed:0)&&r.testResults[a]>=0&&t.push(a);return t}function W(r,e){let t=e.map(s=>r.testResults[s]),a=Math.max(...t);return e.filter((s,m)=>t[m]==a)}function X(r,e,t){let a=r.te.map((o,f)=>r.testResults[f]/r.te[f].getCalcCost(r)),s=e.map(o=>a[o]),m=Math.max(...s),u=Math.max(...U(r,!0).map(o=>a[o]))/2;if(!t&&m<=u&&Math.max(...a)>0){let o=e.filter(g=>s[g]>=0),f=Math.min(...o.map(g=>r.te[g].getCost(r.te)));return f<=r.apSpeed?o.filter(g=>r.te[g].getCost(r.te)==f):[]}else return e.filter((o,f)=>s[f]==m)}function me(r,e){let t=e.filter(m=>{var u;return(u=r.te[m].getSkill(r))==null?void 0:u["ap-"]});t.length||(t=e);let a=t.map(m=>{let u=r.te[m],o=0;return r.getAllCards().forEach(f=>{var g,y,p,h;(y=(g=f.props)==null?void 0:g.draw)!=null&&y["ap-"]&&(o+=u.calcSubtractAp((h=(p=f.props)==null?void 0:p.draw)==null?void 0:h["ap-"]))}),o}),s=Math.min(...a);return t.filter((m,u)=>a[u]==s)}function Z(r,e){let t=e.filter(a=>{var s,m;return(m=(s=r.te[a].props)==null?void 0:s.drawFilters)==null?void 0:m.length});return t.length?t:e}function _(r,e,t){if(r.getAllCards().filter(m=>m.member=="jewelry").length>e)return t;let s=t.filter(m=>r.te[m].member!="jewelry");return s.length?s:t}function K(r,e=8,t){var m;let a,s;return t==null&&(t=r.strategy??(r.sp=="mg2"||r.sp=="tz2"||r.sp=="kz2"?"score":"cost"),(r.ap+r.apSpeed*(r.apMax/10)>=r.apMax||((m=r.te.filter(u=>{var o;return((o=u.getSkill(r))==null?void 0:o.ap)<0&&u.getCost(r.te)<=r.ap}))==null?void 0:m.length)>0)&&(t="score")),!r.ignition&&r.te.find(u=>u.short=="上升姬芽")&&r.te.find(u=>(u.getMain(r)=="mental"||u.getMain(r)=="protect")&&u.short!="上升姬芽")&&(t=="score"?a=W(r,U(r).filter(u=>{let o=r.te[u];return(o.getMain(r)=="mental"||o.getMain(r)=="protect"||o.getMain(r)=="ensemble")&&o.short!="上升姬芽"}))[0]:a=X(r,U(r).filter(u=>{let o=r.te[u];return(o.getMain(r)=="mental"||o.getMain(r)=="protect"||o.getMain(r)=="ensemble")&&o.short!="上升姬芽"}),!0)[0]),a==null&&(s=r.te.findIndex(u=>u.short=="kol慈"),s>=0&&r.getAllCards().filter(u=>u.member=="jewelry").length<e&&r.te[s].getCost(r.te)<(t=="score"?r.ap-r.apSpeed:r.ap-r.apSpeed*(r.apMax/10))&&(a=s)),a==null&&(s=r.te.findIndex(u=>u.member=="jewelry"&&r.hasCostEffect),s>=0&&r.getAllCards().filter(u=>u.member=="jewelry").length>e&&(a=s)),a==null&&(t=="score"?a=Z(r,_(r,e,W(r,U(r))))[0]:a=me(r,Z(r,_(r,e,X(r,U(r)))))[0]),a}window.strategyPlay=K;const he={class:"grid"},de=["open"],fe={class:"grid"},pe={style:{"font-size":"small"}},ce=["disabled"],ve=["disabled"],ge=["disabled"],be=["disabled"],Ce=["disabled"],ke=["disabled"],ye=["disabled"],we=["disabled"],Ae=["disabled"],Me=["disabled"],Se=["disabled"],De=["disabled"],Te=["disabled"],xe={style:{"text-align":"right"}},je={class:"flex-between"},Ee={class:"flex-between"},Fe={class:"flex-between"},Ie={class:"grid"},Pe={class:"grid"},Ne={class:"grid"},Ve={colspan:"6"},He={colspan:"2"},Le={colspan:"2"},$e={colspan:"2"},ze={colspan:"2"},Oe={colspan:"2"},Re={colspan:"2"},Ue=["onClick"],qe={colspan:"2",style:{"text-align":"center"}},Ye={__name:"Stage",setup(r){const e=F(!1),t=F(!1),a=F([]),s=F(!1),m=F(),u=F(),o=F({qc:140,sh:3.3,deckLength:17,apSpeed:2.34,apMax:20,sp:"",effect:"",jewelryCountTargetMin:0,jewelryCountTargetMax:16,cardTimes:373,skipTimes:36,strategy:"cost",jewelryCountTarget:0});let f=localStorage.getItem("formData");try{f&&(o.value={...o.value,...JSON.parse(f)})}catch{}const g=b=>b.slice().sort((l,n)=>typeof l.member=="number"&&typeof n.member=="number"?l.member-n.member:typeof l.member=="number"&&typeof n.member!="number"?-1:typeof l.member!="number"&&typeof n.member=="number"||l.member>n.member?1:l.member<n.member?-1:0).sort((l,n)=>l.year&&n.year?n.year-l.year:l.year&&!n.year?-1:!l.year&&n.year?1:0),y=g(G.map(b=>new P(b.short))),p=F([]);let h=localStorage.getItem("deck");try{h&&(p.value=JSON.parse(h).map(b=>new P(b)))}catch{}p.value.length||(p.value=G.filter(b=>typeof b.member=="number").map(b=>new P(b.short)).slice(0,16));const d=F();window.getStage=()=>d.value;const x=()=>{d.value=new te([]),d.value.apSpeed=Number(o.value.apSpeed),d.value.apMax=Number(o.value.apMax),d.value.sp=o.value.sp,d.value.effect=o.value.effect,d.value.strategy=o.value.strategy,d.value.yama=p.value.map(b=>new P(b.short))};x();const $=()=>{e.value=!1,x()},V=async b=>{var l;if(localStorage.setItem("formData",JSON.stringify(o.value)),localStorage.setItem("deck",JSON.stringify(p.value.map(n=>n.short))),s.value=!1,e.value=!0,t.value=b,b){a.value.push({deck:p.value.map(n=>n.short).join(", "),formData:{...o.value},dict:{}});for(let n=Number(o.value.jewelryCountTargetMin);n<=Number(o.value.jewelryCountTargetMax)&&e.value;n++){let A=0,S=0,D={apSkip:0};for(let E of p.value)D[E.short]=0;for(let E=0;E<Number(o.value.skipTimes);E++){await k(),x(),d.value.jewelryCountTarget=n,d.value.start();for(let N=0;N<Number(o.value.cardTimes)&&e.value;N++)d.value.useCard(K(d.value,n));if(!e.value)break;A+=d.value.score,S+=(l=d.value.getAllCards().filter(N=>N.member=="jewelry"))==null?void 0:l.length;for(let N in d.value.cardTimesDict)D[N]||(D[N]=0),D[N]+=d.value.cardTimesDict[N]}if(!e.value)break;for(let E in D)D[E]=Number((D[E]/o.value.skipTimes).toFixed(2));a.value.at(-1).dict[n]={score:Number((A/o.value.skipTimes).toFixed(2)),jewelryCount:Number((S/o.value.skipTimes).toFixed(2)),cardTimesDict:D}}e.value=!1}else x(),d.value.jewelryCountTarget=o.value.jewelryCountTarget,d.value.start(),j()},k=async b=>new Promise(l=>setTimeout(l,b)),H=F(-1),j=()=>{H.value=K(d.value,o.value.jewelryCountTarget)};return(b,l)=>(v(),C("div",null,[!e.value||t.value?(v(),C(T,{key:0},[i("h2",null,[l[23]||(l[23]=w(" DECK ")),i("button",{onClick:l[0]||(l[0]=n=>p.value=g(p.value))},"⇅")]),l[25]||(l[25]=i("hr",null,null,-1)),i("div",he,[(v(!0),C(T,null,L(p.value,(n,A)=>(v(),O(R,{card:n,close:!0,onClick:S=>p.value.splice(A,1),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))]),i("details",{open:s.value},[l[24]||(l[24]=i("summary",null,[w(" CARD "),i("hr")],-1)),i("div",fe,[(v(!0),C(T,null,L(B(y),(n,A)=>(v(),O(R,{card:n,onClick:S=>p.value.push(new(B(P))(n.short)),"pointer-events":e.value?"none":"auto"},null,8,["card","onClick","pointer-events"]))),256))])],8,de)],64)):z("",!0),i("form",null,[l[45]||(l[45]=i("h2",null,"STAGE",-1)),l[46]||(l[46]=i("hr",null,null,-1)),i("div",pe,[l[26]||(l[26]=i("label",{for:"qc"},"曲长: ",-1)),M(i("input",{"onUpdate:modelValue":l[1]||(l[1]=n=>o.value.qc=n),type:"text",disabled:e.value,id:"qc"},null,8,ce),[[I,o.value.qc]]),l[27]||(l[27]=w(" s  ")),l[28]||(l[28]=i("label",{for:"qc"},"生化值: ",-1)),M(i("input",{"onUpdate:modelValue":l[2]||(l[2]=n=>o.value.sh=n),type:"text",disabled:e.value,id:"sh"},null,8,ve),[[I,o.value.sh]]),l[29]||(l[29]=w("   ")),l[30]||(l[30]=i("label",{for:"deckLength"},"卡组牌数: ",-1)),M(i("input",{"onUpdate:modelValue":l[3]||(l[3]=n=>o.value.deckLength=n),type:"number",disabled:e.value,id:"deckLength"},null,8,ge),[[I,o.value.deckLength]]),l[31]||(l[31]=w("   ")),i("button",{onClick:l[4]||(l[4]=n=>{o.value.apSpeed=Number((1200/o.value.qc/o.value.sh*(1-.1*Math.min(9,18-o.value.deckLength))).toFixed(2)),o.value.cardTimes=Math.floor(o.value.qc*8/3)}),disabled:e.value}," 计算AP回复速度/暂停回数 ",8,be)]),i("div",null,[l[32]||(l[32]=i("label",{for:"ap"},"AP回复速度: ",-1)),M(i("input",{"onUpdate:modelValue":l[5]||(l[5]=n=>o.value.apSpeed=n),type:"text",disabled:e.value,id:"ap"},null,8,Ce),[[I,o.value.apSpeed]])]),i("div",null,[l[33]||(l[33]=i("label",{for:"card-time"},"暂停回数: ",-1)),M(i("input",{"onUpdate:modelValue":l[6]||(l[6]=n=>o.value.cardTimes=n),disabled:e.value,type:"number",id:"card-time"},null,8,ke),[[I,o.value.cardTimes]])]),i("div",null,[l[34]||(l[34]=i("label",{for:"ap-max"},"最大AP: ",-1)),M(i("input",{"onUpdate:modelValue":l[7]||(l[7]=n=>o.value.apMax=n),disabled:e.value,type:"number",id:"ap-max"},null,8,ye),[[I,o.value.apMax]])]),i("div",null,[l[36]||(l[36]=i("label",{for:"sp"},"SP: ",-1)),M(i("select",{"onUpdate:modelValue":l[8]||(l[8]=n=>o.value.sp=n),disabled:e.value,id:"sp",onChange:l[9]||(l[9]=n=>o.value.sp.includes("2")?o.value.strategy="score":o.value.strategy="cost")},l[35]||(l[35]=[J('<option value="" data-v-e9008698>--</option><option value="tz" data-v-e9008698>舞会缀</option><option value="sy" data-v-e9008698>舞会沙耶</option><option value="tz2" data-v-e9008698>银河缀</option><option value="mg2" data-v-e9008698>银河慈</option>',5)]),40,we),[[Y,o.value.sp]])]),i("div",null,[l[38]||(l[38]=i("label",{for:"effect"},"效果: ",-1)),M(i("select",{"onUpdate:modelValue":l[10]||(l[10]=n=>o.value.effect=n),disabled:e.value,id:"effect"},l[37]||(l[37]=[J('<option value="" data-v-e9008698>--</option><option value="st1a" data-v-e9008698> (2025/01 公会战A) skill6回使用 deck全card消费AP+1 </option><option value="kj1a" data-v-e9008698> (2025/01 个人战A) 山札切 AP3回复 main效果reshuffle效果deck全card消费AP+1 </option><option value="kj1b" data-v-e9008698> (2025/01 个人战B) skill5回使用 手札全捨 山札手札上限引直 </option><option value="gc1a" data-v-e9008698> (2025/01 GC A) skill30回使用 main效果mental回复deck全card消费APstage中常-1 </option><option value="gc1b" data-v-e9008698> (2025/01 GC B) skill15回使用 deck全スリブcard消费APstage中常-1 </option><option value="gc1c" data-v-e9008698> (2025/01 GC C) skill20回使用 deck全ドルケcard消费APstage中常-1 </option>',7)]),8,Ae),[[Y,o.value.effect]])]),i("div",null,[l[40]||(l[40]=i("label",{for:"strategy"},"策略: ",-1)),M(i("select",{"onUpdate:modelValue":l[11]||(l[11]=n=>o.value.strategy=n),disabled:e.value,id:"strategy"},l[39]||(l[39]=[i("option",{value:"cost"},"LOVE/AP优先",-1),i("option",{value:"score"},"LOVE优先",-1)]),8,Me),[[Y,o.value.strategy]])]),i("div",null,[l[41]||(l[41]=i("label",{for:"jewelry"},"LIVE TARGET💎: ",-1)),M(i("input",{"onUpdate:modelValue":l[12]||(l[12]=n=>o.value.jewelryCountTarget=n),type:"number",id:"jewelry",onChange:l[13]||(l[13]=n=>{e.value&&!t.value&&(d.value.jewelryCountTarget=o.value.jewelryCountTarget,d.value.testAllCards(),j())})},null,544),[[I,o.value.jewelryCountTarget]])]),i("div",null,[l[42]||(l[42]=i("label",{for:"jewelry"},"SKIP TARGET💎: ",-1)),M(i("input",{"onUpdate:modelValue":l[14]||(l[14]=n=>o.value.jewelryCountTargetMin=n),disabled:e.value,type:"number",id:"jewelry"},null,8,Se),[[I,o.value.jewelryCountTargetMin]]),l[43]||(l[43]=w(" ~ ")),M(i("input",{"onUpdate:modelValue":l[15]||(l[15]=n=>o.value.jewelryCountTargetMax=n),disabled:e.value,type:"number",id:"jewelry"},null,8,De),[[I,o.value.jewelryCountTargetMax]])]),i("div",null,[l[44]||(l[44]=i("label",{for:"skip-time"},"SKIP回数: ",-1)),M(i("input",{"onUpdate:modelValue":l[16]||(l[16]=n=>o.value.skipTimes=n),disabled:e.value,type:"number",id:"skip-time"},null,8,Te),[[I,o.value.skipTimes]])])]),i("div",xe,[e.value&&!t.value?(v(),C("button",{key:0,onClick:l[17]||(l[17]=n=>{u.value={key:d.value.jewelryCountTarget,score:d.value.score,cardTimesDict:d.value.cardTimesDict},Q(()=>m.value.showModal())})}," LOG ")):z("",!0),e.value?(v(),C("button",{key:1,onClick:$},"RETIRE")):(v(),C(T,{key:2},[a.value.length?(v(),C("button",{key:0,onClick:l[18]||(l[18]=n=>a.value=[])}," CLEAR RESULTS ")):z("",!0),i("button",{onClick:l[19]||(l[19]=n=>V(!0))},"SKIP"),i("button",{onClick:l[20]||(l[20]=n=>V(!1))},"LIVE START")],64))]),e.value&&!t.value?(v(),C(T,{key:1},[i("h2",je,[i("div",null,c(d.value.score),1),i("div",null,c(d.value.timesCount)+"回",1)]),i("h2",Ee,[i("div",null,c(d.value.sp=="mg2"?"∞":d.value.mental?"100%":"-%"),1),i("div",null,c(d.value.ignition?"🔥":"🚫")+" "+c(d.value.sp=="kz2"?"∞":d.value.ap),1)]),l[47]||(l[47]=i("div",{style:{"text-align":"right"}},null,-1)),i("h2",Fe,[i("div",null,"手札 "+c(d.value.te.length),1),i("button",{onClick:l[21]||(l[21]=n=>{d.value.useCard(void 0),j()})}," AP SKIP ")]),l[48]||(l[48]=i("hr",null,null,-1)),i("div",Ie,[(v(!0),C(T,null,L(d.value.te,(n,A)=>(v(),O(R,{card:n,stage:d.value,te:!0,class:re({highlight:H.value==A}),onClick:S=>{d.value.useCard(A),j()}},null,8,["card","stage","class","onClick"]))),256))]),i("h2",null,"捨札 "+c(d.value.sute.length),1),l[49]||(l[49]=i("hr",null,null,-1)),i("div",Pe,[(v(!0),C(T,null,L(d.value.sute,(n,A)=>(v(),O(R,{card:n,stage:d.value,"pointer-events":"none"},null,8,["card","stage"]))),256))]),i("h2",null,"山札 "+c(d.value.yama.length),1),l[50]||(l[50]=i("hr",null,null,-1)),i("div",Ne,[(v(!0),C(T,null,L(d.value.yama,(n,A)=>(v(),O(R,{card:n,stage:d.value,"pointer-events":"none"},null,8,["card","stage"]))),256))])],64)):(v(!0),C(T,{key:2},L(a.value,(n,A)=>(v(),C("table",null,[i("thead",null,[i("tr",null,[i("td",Ve,c(n.deck),1)]),i("tr",null,[i("td",He,"AP回复速度: "+c(n.formData.apSpeed),1),i("td",Le,"暂停回数: "+c(n.formData.cardTimes),1),i("td",$e,"SKIP回数: "+c(n.formData.skipTimes),1)]),i("tr",null,[i("td",ze,"SP: "+c(n.formData.sp),1),i("td",Oe,"效果: "+c(n.formData.effect),1),i("td",Re,"策略: "+c(n.formData.strategy),1)]),l[51]||(l[51]=i("tr",null,[i("td",null,[w("target"),i("br"),w("💎")]),i("td",null,[w("kol慈"),i("br"),w("回数")]),i("td",null,[w("💎"),i("br"),w("回数")]),i("td",null,[w("AP SKIP"),i("br"),w("回数")]),i("td",null,"heart"),i("td",null,"%")],-1))]),i("tbody",null,[(v(!0),C(T,null,L(n.dict,(S,D)=>(v(),C("tr",{style:{cursor:"pointer"},onClick:E=>{u.value={key:D,...S},Q(()=>m.value.showModal())}},[i("td",null,c(D),1),i("td",null,c(S.cardTimesDict.kol慈??0),1),i("td",null,c(S.cardTimesDict["💎"]??0),1),i("td",null,c(S.cardTimesDict.apSkip),1),i("td",null,c(S.score),1),i("td",null,c(Number((S.score/Math.max(...Object.values(n.dict).map(E=>E.score))*100).toFixed(2))),1)],8,Ue))),256))])]))),256)),u.value?(v(),C("dialog",{key:3,ref_key:"dialog",ref:m},[i("table",null,[i("thead",null,[i("tr",null,[l[52]||(l[52]=i("td",null,"target💎",-1)),i("td",null,c(u.value.key),1)]),i("tr",null,[l[53]||(l[53]=i("td",null,"heart",-1)),i("td",null,c(u.value.score),1)])]),i("tbody",null,[(v(!0),C(T,null,L(u.value.cardTimesDict,(n,A)=>(v(),C("tr",null,[i("td",null,c(A),1),i("td",null,c(n)+"回",1)]))),256))]),i("tfoot",null,[i("tr",null,[i("td",qe,[i("button",{onClick:l[22]||(l[22]=n=>u.value=void 0)},"关闭")])])])])],512)):z("",!0)]))}},Ke=ee(Ye,[["__scopeId","data-v-e9008698"]]);export{Ke as default};
